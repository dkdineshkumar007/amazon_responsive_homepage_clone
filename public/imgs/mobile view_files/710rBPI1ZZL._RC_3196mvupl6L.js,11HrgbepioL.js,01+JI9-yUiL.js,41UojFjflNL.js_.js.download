(function(n){var u=window.AmazonUIPageJS||window.P,w=u._namespace||u.attributeErrors,k=w?w("QTipsWebLibrary",""):u;k.guardFatal?k.guardFatal(n)(k,window):k.execute(function(){n(k,window)})})(function(n,u,w){(function(){n.when("jQuery","QTipsConstants","ready").register("QTipLibrary",function(k,b){var a={Model:function(a){this.attributes=a||{};this.set(a);this.initialize.apply(this,arguments)}};k.extend(a.Model.prototype,{initialize:function(){},get:function(a){if(this.attributes&&this.attributes.hasOwnProperty(a))return this.attributes[a]},
has:function(a){return null!==this.get(a)&&this.get(a)!==w},set:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.attributes[b]=a[b])},unset:function(a){delete this.attributes[a]},parse:function(a,b){return a},toJson:function(){return this.attributes?JSON.stringify(this.attributes):""}});a.Collection=function(a){this.models=a||{};this.initialize.apply(this,arguments)};k.extend(a.Collection.prototype,{initialize:function(){},at:function(a){if(this.models&&this.models.hasOwnProperty(a))return this.models[a]},
add:function(a){a&&(this.models[this.modelLength()]=a)},remove:function(a){for(var b in this.models)this.models[b]===a&&delete this.models[b]},create:function(a){a=this.parse(a);for(var b in a)a.hasOwnProperty(b)&&this.add(a[b])},_prepareModel:function(e){if(this.model&&e){for(var f in e)if(e.hasOwnProperty(f)){var d=e[f];b.regex.numberRegex.test(d)&&(d=Number(d));e[f]=d}e=new a.Model(e)}return e},set:function(a){this.model=a},modelLength:function(){if(this.models)return Object.keys(this.models).length},
parse:function(a,b){return a},toJson:function(){return JSON.stringify(this.models)}});a.View=function(a){this.tagName=a||"\x3cdiv/\x3e";this.template=this.template||"";this.initialize.apply(this,arguments)};k.extend(a.View.prototype,{events:{},initialize:function(){},render:function(){},remove:function(){},_removeElement:function(a){a=k(a);this.isDefined(a)&&this.isDefined(a[0])&&(a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a))},setElement:function(a,b){k(a).append(b)},getElement:function(a){if((a=
k(a))&&0<a.length)return a[0].lastChild},add:function(a,b){b=this._createElement(this.template,b);this.setElement(a,b);return b},_createElement:function(a,b){a=this._processTemplate(a,b);return k(this.tagName).html(a)},_processTemplate:function(a,f){var d=a.match(b.regex.templateSpliterRegex);if(d)for(var c=0;c<d.length;c++){var e=d[c].match(/\w+/)[0];f&&f.has(e)&&(a=a.replace(d[c],f.get(e)))}return a},isDefined:function(a){return null!==a&&a!==w}});a.Model.extend=a.Collection.extend=a.View.extend=
function(a,b){var d=this,c=a&&"object"===typeof a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)};k.extend(c,d,b);b=function(){this.constructor=c};b.prototype=d.prototype;c.prototype=new b;a&&k.extend(c.prototype,a);c.__super__=d.prototype;return c};return a})})();(function(){n.when("A","a-sheet","QTips").execute(function(k,b,a){k.on("a:sheet:beforeShow",function(b){a.view.dismissAndRender()});k.on("a:sheet:afterHide",function(b){a.view.dismissAndRender()})});
n.when("A","a-popover","QTips").execute(function(k,b,a){k.on("a:popover:beforeShow",function(b){a.view.dismissAndRender()});k.on("a:popover:afterHide",function(b){a.view.dismissAndRender()})});n.when("A","all-offers-display-content-loader","QTips").execute(function(k,b,a){k.on("aod-event-opened",function(b){a.view.dismissAndRender()});k.on("aod-event-closed",function(b){a.view.dismissAndRender()})});n.when("A","jQuery","QTipsConstants","QTipLibrary","QTipsStyles","QTipsMetrics","SAConfig","NestedShoppingAidHelper",
"ShoppingAidsGenericUtils","AnchorBasedSAUtils","SAMetricConstants").register("QTips",function(k,b,a,e,f,d,c,l,g,h,q){var t={isDefined:function(a){return g.isDefined(a)},platformCheck:function(){return g.platformCheck()},cleanUpCachingInstrumentation:function(){var a=g.removeFromLocalStorageIfPresent("SAcacheConfig_4");d.incrementCounter("SAcacheConfig_4_"+a)},getCurrentLoP:function(){return g.getCookie(c.cookies.language)||c.defaultLoP},getPreviousLoP:function(){return g.isMShop()&&g.isAndroidDevice()?
g.getQueryParameter("previous_lop"):g.getFromLocalStorage("previous_lop")||c.defaultLoP},saveCurrentLoP:function(){g.setInLocalStorage("current_lop",this.getCurrentLoP())},savePreviousLoP:function(){if(!g.isMShop()||!g.isAndroidDevice()){var a=g.getFromLocalStorage("current_lop");a&&g.setInLocalStorage("previous_lop",a)}},isGuidedTour:function(a){return"guidedtour"===a.get("dismissalType")}},m={};m.model=new e.Model;m.utils=t;m.addStyles=function(){var a=document.createElement("style");a.innerHTML=
f;document.head.appendChild(a)};var r=e.Collection.extend({model:m.model,elementAnchorList:[],invokingEventsMap:{},auiTriggerHandler:{},tipStartTime:0,isSet:!1,registerEvent:function(a,b){if(b){b=a.eventType;var d=a.invokingEventElement;a=this}else b=a.data.eventType,d=a.data.invokingEventElement,a=a.data.self;if(b in a.invokingEventsMap)g.isDefined(a.invokingEventsMap[b])&&-1===a.invokingEventsMap[b].indexOf(d)&&a.invokingEventsMap[b].push(d);else{var p=[];p.push(d);a.invokingEventsMap[b]=p}},add:function(p){try{if(d.incrementCounter("qtips_add_initiated"),
g.isDefined(p)&&g.isDefined(p.get("elementAnchor"))&&(p.get("weblabTriggerOnlyFlag")||g.isDefined(p.get("maxDisplayCount"))&&0<p.get("maxDisplayCount"))){var c=p.get("elementAnchor");var e=isNaN(c)?h.processAnchor(c,a.regex.anchorSpliterRegex):c;p.set({elementAnchor:e});c={};c[p.get("elementAnchor")]=p.get("sequenceNum");c.schedulingType=p.get("schedulingType");p.get("onDemand")?this.elementAnchorList.unshift(c):this.elementAnchorList.push(c);this.models[p.get("elementAnchor")]=p;var f=p.get("invokingEventElement"),
q=p.get("invokingEventType");if(g.isDefined(f)&&0<f.length&&g.isDefined(q)&&0<q.length&&q.toLowerCase()!==a.PartnerEvent)f=h.processAnchor(f,a.regex.anchorSpliterRegex),b(f).bind(q,{eventType:q,invokingEventElement:f,self:this},this.registerEvent);else if(g.isDefined(f)&&0<f.length&&g.isDefined(q)&&0<q.length){var l=k.on(f,function(){m.collection.registerEvent({eventType:q,invokingEventElement:f},!0)});this.auiTriggerHandler[f]=l}}}catch(z){d.incrementCounter("qtips_model_undefined"),n.log(z,"WARN",
"QTips")}},parse:function(a,b){if(t.isDefined(a)){var d=this._prepareModel.bind(this);a.forEach(function(b,p,c){a[p]=d(b)});return a}}});m.collection=new r;e=e.View.extend({isDismissInvoked:!0,isToolTipSafeToBeDisplayed:!0,nativeToolTipDisplayBackoffMap:{},currentSequence:0,qtipsId:"#qtips",highlighterId:"#sa-highlighter",pageAnchor:"body",qtipDismissIcon:"#qtip-dismiss-cross",qtipVideoId:"#qtip-video",popoverClass:a.popOverAnchors.popoverClass,searchSugesstions:a.popOverAnchors.searchSugesstions,
searchFilterPage:a.popOverAnchors.searchFilterPage,anchor:"#buyNow",defaultArrowPosition:"topright",qtipThumbnailId:"#qtip-thumbnail",qtipThumbnailTextId:"#qtip-thumbnail-text",identifier:"",collection:m.collection,events:{"touchstart click keyup":"dismissAndRender",scroll:"dismissAndRender",orientationchange:"dismissAndRender","blur focus":"dismissOrRender","visibilitychange webkitvisibilitychange":"visibilityChange"},eventHandlers:{},toolTipVideoPlayed:{},pageType:"unknown",setPageType:function(a){a&&
(this.pageType=a)},getPageType:function(){return this.pageType},addStaticToolTipHandlers:function(a){if(a.get("videoSource")){var d=this,c=a.get("identifier");d.addDismissIconHandlers(a);b(d.qtipsId).bind("click.videoToolTip",{model:a,tipId:c},function(c){g.isDefined(d.animateIntervalId)&&(clearInterval(d.animateIntervalId),d.animateIntervalId=w);d.animateVideo(a);d.clearFadeOut();b(d.qtipsId).unbind("click.videoToolTip");d.addVideoToolTipHandlers(a);d.addDismissIconHandlers(a)})}},addDismissIconHandlers:function(a){var d=
this;a=a.get("identifier");b(this.qtipDismissIcon).bind("click.staticToolTip",{eventType:"dismissalByUser",tipId:a},function(a){var b=a.data.tipId;d.countLogger("dismiss_icon_clicked",b);d.toolTipVideoPlayed&&d.toolTipVideoPlayed[b]?d.countLogger("dismissed_after_video_played",b):d.countLogger("dismissed_before_video_played",b);d.dismissAndRender.call(d,a);a.stopPropagation()})},addVideoToolTipHandlers:function(a){var d=this;a=a.get("identifier");b(this.qtipVideoId).bind("play.videoToolTip",{tipId:a},
function(a){a=a.data.tipId;d.toolTipVideoPlayed&&!d.toolTipVideoPlayed[a]&&(d.toolTipVideoPlayed[a]=d.getVideoPlayedMetricsObject());d.countLogger("video_played",a)});b(this.qtipVideoId).bind("timeupdate.videoToolTip",{tipId:a},k.throttle(function(a){a=a.data.tipId;var c=b(d.qtipVideoId);if(c[0]){c=Math.ceil(4*c[0].currentTime/c[0].duration);var p=d.toolTipVideoPlayed[a];if(d.toolTipVideoPlayed&&p&&1<=c){if(!p.firstQuarterPublished){var g=1;p.firstQuarterPublished=!0}2<=c&&(p.secondQuarterPublished||
(g=2,p.secondQuarterPublished=!0),3<=c&&(p.thirdQuartedrublished||(g=3,p.thirdQuartedrublished=!0),4<=c&&!p.fourthQuarterPublished&&(g=4,p.fourthQuarterPublished=!0)));g&&d.countLogger("video_length_played_"+g,a);d.toolTipVideoPlayed[a]=p}}},1E3));b(this.qtipVideoId).bind("error.videoToolTip",{tipId:a},function(a){d.countLogger("video_failed_to_load",a.data.tipId)})},getVideoPlayedMetricsObject:function(){return{firstQuarterPublished:!1,secondQuarterPublished:!1,thirdQuartedrublished:!1,fourthQuarterPublished:!1}},
addAutoDismissalHandlers:function(){for(var a in this.events)this.events.hasOwnProperty(a)&&!g.isDefined(this.eventHandlers[a])&&(this.eventHandlers[a]=this[this.events[a]].bind(this),b(u).bind(a,this.eventHandlers[a]))},removeStaticToolTipHandlers:function(){b(this.qtipDismissIcon).unbind("click.staticToolTip");b(this.qtipsId).unbind("click.videoToolTip");b(this.qtipVideoId).unbind("play.videoToolTip");b(this.qtipVideoId).unbind("error.videoToolTip");b(this.qtipVideoId).unbind("timeupdate.videoToolTip")},
removeAutoDismissalHandlers:function(){for(var a in this.events)this.events.hasOwnProperty(a)&&g.isDefined(this.eventHandlers[a])&&(b(u).unbind(a,this.eventHandlers[a]),this.eventHandlers[a]=w)},render:function(d){var c=d.get("identifier");if(g.weblabTriggerAndCheck(d))if(g.isShoppingAidForWeblabTesting(c))d=h.getIndexByAnchor(this.collection.elementAnchorList,this.anchor),-1!==d&&this.dismissalHandler(d),this.nextQTip();else{this.fadeOut(this.remove.bind(this));var p=this.addAndPosition(this.anchor,
d);"hidden"!==document.visibilityState&&g.isDefined(p)&&(g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||h.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),d.get("elementAnchor")))?(this.animateIn(d),b(this.qtipsId).attr(a.view.saDOMNameAttribute,c),"hotspot"!==d.get("tipType")&&(c=b(".qtips-text").width()+a.view.deltaX,p=b(this.qtipsId).width(),d.get("videoWidth"),c<p&&!d.get("videoSource")&&!m.utils.isGuidedTour(d)&&(b(this.qtipsId).width(c),a.regex.positionRightRegex.test(d.get("elementArrowPosition"))&&
(c=parseInt(b(this.qtipsId).css("left"),10)+(p-c)+a.view.deltaX,b(this.qtipsId).css({left:c}))),d=d.get("elementDuration")||a.timer.defaultAnimationTime,this.fadeTimeoutId=setTimeout(this.fadeOut.bind(this),d,this.nextQTip)),d=h.getIndexByAnchor(this.collection.elementAnchorList,this.anchor),-1!==d&&(this.dismissalTimeoutId=setTimeout(this.dismissalHandler.bind(this),a.timer.defaultDismissalCallbackTime,d))):(this.fadeOut(this.remove.bind(this)),this.renderTimeoutId=setTimeout(this.render.bind(this),
d.get("elementStartOffset"),d))}else d=h.getIndexByAnchor(this.collection.elementAnchorList,this.anchor),-1!==d&&this.collection.elementAnchorList.splice(d,1),this.nextQTip()},dismissalHandler:function(a){var b=Object.keys(this.collection.elementAnchorList[a])[0],d=this.collection.elementAnchorList[a][b],c=this.collection.at(b).get("identifier"),p=this.collection.at(b).get("contextAwareIndex"),e=this.collection.at(b).get("schedulingType"),f=this.collection.at(b).get("elementDisplayType"),q=this.collection.at(b).get("maxDisplayCount"),
h=b;g.isDefined(this.collection.at(b).get("featureAttributionAnchor"))&&(h=this.collection.at(b).get("featureAttributionAnchor"));var l=this.collection.at(b).get("onDemand");b=this.collection.at(b).get("successResponse");this.collection.elementAnchorList.splice(a,1);g.isDefined(this.dismissalCallback)&&this.dismissalCallback({identifier:c,sequenceNum:d,schedulingType:e,onDemand:l,contextAwareIndex:p,successResponse:b,featureAttributionAnchor:h,elementDisplayType:f,maxDisplayCount:q})},dismissByUserHandler:function(b){var d=
b.get("elementAnchor"),c=b.get("identifier");b=b.get("schedulingType");var g=this.collection.at(d).get("contextAwareIndex"),p=this.collection.at(d).get("onDemand");d=this.collection.at(d).get("successResponse");c={identifier:c,schedulingType:b,onDemand:p,contextAwareIndex:g,successResponse:d,userEvent:a.userEvent.optOut};t.isDefined(this.dismissalCallback)&&this.dismissalCallback(c)},clickEventHandlerForUserDismissalTip:function(a){b(u).bind("click",function(){m.view.dismissAndRender()})},errorCallbackFunction:function(a,
b){m.view.moveToolTipToEndOfList(b);var c=h.getIndexByAnchor(this.collection.elementAnchorList,b.get("elementAnchor"));b.get("nestedSAList")&&m.utils.isGuidedTour(b)?m.view.handleGuidedTour(b,"Error"):"Class not found"===a&&(d.incrementCounter("ShoppingAids_CordovaRefactoring_PluginNotFound"),this.collection.elementAnchorList.splice(c,1));this.isToolTipSafeToBeDisplayed=!0;this.nativeToolTipDisplayBackoffMap[b.get("identifier")]=!1},successCallbackFunction:function(a,b,c,e){var p=b.get("identifier"),
f=b.get("elementAnchor");f=h.getIndexByAnchor(this.collection.elementAnchorList,f);g.isDefined(c)&&g.isDefined(e)&&(b.set({failureResponse:e}),b.set({successResponse:c}));"displayNativeToolTip"===a?(this.isToolTipSafeToBeDisplayed=!1,this.nativeToolTipDisplayBackoffMap[p]=!0):"NativeTipDisplaySuccessful"===a?(this.setPreviousTipDismissalTime(Date.now()),this.isToolTipSafeToBeDisplayed=!0):"NativeToolTipDisplayStarted"===a?(d.incrementCounter("nativeToolTipShown:".concat(p)),this.dismissalHandler(f)):
"NativeTipNotInView"===a?(this.isToolTipSafeToBeDisplayed=!0,"iPhone"===g.platformCheck()?(d.incrementCounter("nativeToolTipNotInView:".concat(p)),this.collection.elementAnchorList.splice(f,1)):(this.nativeToolTipDisplayBackoffMap[b.get("identifier")]=!1,m.view.moveToolTipToEndOfList(b),b.get("nestedSAList")&&m.utils.isGuidedTour(b)&&m.view.handleGuidedTour(b,"Success",a))):"NativeTipDismissed"===a?(this.setPreviousTipDismissalTime(Date.now()),d.incrementCounter("nativeToolTipDismissed:".concat(p)),
this.isToolTipSafeToBeDisplayed=!0):"NativeToolTipInvalid"===a?(d.incrementCounter("nativeToolTipInvalid:".concat(p)),this.isToolTipSafeToBeDisplayed=!0,this.collection.elementAnchorList.splice(f,1),b.get("nestedSAList")&&m.utils.isGuidedTour(b)&&m.view.handleGuidedTour(b,"Success",a)):"NativeToolTipCrossClick"===a?(this.setPreviousTipDismissalTime(Date.now()),d.incrementCounter("nativeToolTipCrossClicked:".concat(p)),this.isToolTipSafeToBeDisplayed=!0,m.view.logMetricsUserDismissalTip(Date.now(),
b),m.view.dismissByUserHandler(b),m.view.dismissAndRender()):"NativeToolTipCTAClick"===a&&(this.setPreviousTipDismissalTime(Date.now()),this.isToolTipSafeToBeDisplayed=!0,m.view.countLogger("native_tooltip_cta_clicked",b.get("identifier")),b.get("nestedSAList")?m.view.renderNestedSA(b):m.view.logMetricsUserDismissalTip(Date.now(),b),m.view.dismissAndRender())},handleGuidedTour:function(a,b,d){var c=a.get("elementAnchor");c=h.getIndexByAnchor(this.collection.elementAnchorList,c);var g="Error"===b?
"native_tool_tip_error":"native_tool_tip_not_in_view";if("Error"===b||"NativeTipNotInView"===d)this.collection.elementAnchorList.splice(c,1),m.view.countLogger(g,a.get("identifier"));m.view.renderNestedSA(a);m.view.dismissAndRender()},renderNestedSA:function(a){try{var b=JSON.parse(a.get("nestedSAList"));b&&0<b.length&&l.dispatchShoppingAidEvent(b)}catch(x){m.view.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",a.get("identifier"))}},displayNativeToolTip:function(a){var b=this.getPageType(),
d={pageType:b};n.when("com.amazon.mobile.mshop.shoppingaids").execute(function(c){c=u.cordova.require("cordova/exec");var e={};e.ToolTips=[a.attributes];if("iPhone"===g.platformCheck()){if(a.get("onDemand")){var p=a.get("successResponse");var f=a.get("failureResponse");a.unset("failureResponse");a.unset("successResponse")}e=[e,d]}else e.ToolTips[0].pageType=b;document.hidden?this.isToolTipSafeToBeDisplayed=!0:c(function(b){m.view.successCallbackFunction(b,a,p,f)},function(b){m.view.errorCallbackFunction(b,
a)},"MShopShoppingAids","displayNativeToolTip",e)})},moveToolTipToEndOfList:function(a){var b=a.get("elementAnchor"),d=h.getIndexByAnchor(this.collection.elementAnchorList,b);this.collection.elementAnchorList.splice(d,1);d={};d[b]=a.get("sequenceNum");this.collection.elementAnchorList.push(d)},postQTipRender:function(){if(this.collection.elementAnchorList){var b=this.collection.elementAnchorList;this.clearRender();for(var d=0;d<b.length;d++){var c=h.processAnchor(Object.keys(b[d])[0],a.regex.anchorSpliterRegex);
if(!document.hidden){var e=this.collection.at(c);this.identifier=e.get("identifier");h.setDependentElement(e);if(!this.isToolTipTimeGapLessThanThreshold(e)&&this.isToolTipSafeToBeDisplayed)if("NATIVE"===e.get("elementDisplayType")&&!0!==this.nativeToolTipDisplayBackoffMap[e.get("identifier")])this.isToolTipSafeToBeDisplayed=!1,this.displayNativeToolTip(e);else{var f=e.get("onDemand");if(null!==f&&f&&(f=e.get("failureResponse"))&&"function"===typeof f){var t=a.errorCodes.ALREADY_RENDERED;f(t);e.set({failureResponse:null})}if(e.get("nestedSAList"))try{var r=
JSON.parse(e.get("nestedSAList"));if(r&&0<r.length&&!h.isElementPresent(c)){this.remove();this.collection.elementAnchorList.splice(d,1);l.dispatchShoppingAidEvent(r);break}}catch(A){this.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",e.get("identifier"))}e.get("scrollToAnchor")&&h.isElementPresent(c)&&!h.isElementVisible(c)&&(this.scrollPageToAnchor(c,e.get("anchorScrollOffset")),this.adjustCoordTimeoutId=setTimeout(this.adjustCoordinates.bind(this),a.timer.maxAnchorScrollTime+a.timer.anchorReAdjustTime,
c,e.get("elementArrowPosition"),e.get("offsetX"),e.get("offsetY")));if(h.isElementVisible(c)&&this.isEventCheckSatisfied(e)&&h.isDependentCheckSatisfied(e)){e.get("triggerDependentCheck")&&(e=h.onDemandContextAwareSubstitution(e,a.ShoppingAidsTooltips));this.currentSequence=b[d][c];this.anchor=c;b=e.get("elementStartOffset");if(isNaN(b)||0>b)b=a.timer.defaultStartOffset;g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||h.isShoppingAidOverPopoverVisible(e.get("popoverAnchor"),
e.get("elementAnchor"))?(d=e.get("dismissalType"),"hotspot"===e.get("tipType")?this.removeAutoDismissalHandlers():g.isDefined(d)&&-1!==d.toUpperCase().indexOf("USER")?(this.removeAutoDismissalHandlers(),"USER"!==d.toUpperCase()&&m.view.clickEventHandlerForUserDismissalTip(c)):this.addAutoDismissalHandlers(),g.logClientSideWeblabMetrics(e,q.SHOPPINGAIDS_WEBLAB_IN_POST_QTIP_RENDER),this.renderTimeoutId=setTimeout(this.render.bind(this),b,e)):this.renderTimeoutId=setTimeout(this.postQTipRender.bind(this),
b);break}else if(f=e.get("onDemand"),null!==f&&f&&(f=e.get("failureResponse"))&&"function"===typeof f)t=a.errorCodes.UNKNOWN,h.isElementVisible(c)?this.isEventCheckSatisfied(e)?h.isDependentCheckSatisfied(e)||(t=a.errorCodes.DEPENDANT_CHECK_NOT_SATISFIED):t=a.errorCodes.EVENT_CHECK_NOT_SATISFIED:t=a.errorCodes.ELEMENT_NOT_VISIBLE,f(t),e.set({failureResponse:null})}}}g.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postQTipRender.bind(this),a.timer.defaultStartOffset))}},isToolTipTimeGapLessThanThreshold:function(a){if(a.get("invokingEventType")||
a.get("onDemand"))return!1;a=Date.now()-this.previousTipDismissalTime;return 0<a&&a<c.intervalBetweenSuccessiveTips?!0:!1},isEventCheckSatisfied:function(a){var b=a.get("invokingEventType"),d=a.get("invokingEventElement"),c=this.collection.invokingEventsMap[b];if(b&&d&&(!g.isDefined(c)||-1===c.indexOf(d)))return!1;b&&d&&(g.isDefined(c)||-1!==c.indexOf(d))&&(b=a.get("triggerDependentTargeting"),g.isDefined(b)&&(a.set({clientSideTargetting:b}),a.set({triggerDependentCheck:!0})));return!0},dismissAndRender:function(a){var b=
function(){this.clearAdjustCoordinates();this.clearRender();this.fadeOut(function(){this.nextQTip()})},d=k.throttle(b.bind(this),1E3);a&&a.data&&"dismissalByUser"===a.data.eventType?b.call(this):d.call(this)},dismissWithId:function(d,c,e){var f=b(this.qtipsId)[0];f&&f.getAttribute(a.view.saDOMNameAttribute)===d||g.isDefined(this.renderTimeoutId)&&this.identifier===d?(this._stopToolTips(),c&&"function"===typeof c&&c()):e&&"function"===typeof e&&e(a.errorCodes.SA_NOT_DISPLAYED)},_stopToolTips:function(){this.clearAdjustCoordinates();
this.clearRender();this.fadeOut(this.remove.bind(this))},dismissOrRender:function(a){!this.isBlurSet&&a&&"blur"===a.type?(this.clearRender(),this.clearFadeOut(),this.clearAdjustCoordinates(),this.fadeOut(this.remove.bind(this)),this.isBlurSet=!0,this.isWindowVisible=w):this.isBlurSet&&a&&"focus"===a.type&&(this.isWindowVisible||this.postQTipRender(),this.isBlurSet=!1)},visibilityChange:function(){this.isWindowVisible!==w&&!0!==this.isWindowVisible||"hidden"!==document.visibilityState?!1===this.isWindowVisible&&
"hidden"!==document.visibilityState&&(this.postQTipRender(),this.isWindowVisible=!0):(this.isBlurSet||(this.clearFadeOut(),this.clearRender(),this.clearAdjustCoordinates(),this.fadeOut(this.remove.bind(this))),this.isWindowVisible=!1)},clearRender:function(){g.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);g.isDefined(this.dismissalTimeoutId)&&clearTimeout(this.dismissalTimeoutId);g.isDefined(this.scrollTimeoutId)&&(clearTimeout(this.scrollTimeoutId),
delete this.scrollTimeoutId)},clearAdjustCoordinates:function(){g.isDefined(this.adjustCoordTimeoutId)&&(clearTimeout(this.adjustCoordTimeoutId),delete this.adjustCoordTimeoutId)},clearFadeOut:function(){g.isDefined(this.fadeTimeoutId)&&clearTimeout(this.fadeTimeoutId)},postScrollToPageAnchor:function(a){g.isDefined(this.scrollTimeoutId)||(this.scrollTimeoutId=setTimeout(this.postQTipRender.bind(this),a))},scrollPageToAnchor:function(d,c){var e=b(d).offset().top-c;e=parseInt(Math.abs(e-u.scrollY),
10)*a.timer.scrollTimePerPixel;e=Math.min(a.timer.maxAnchorScrollTime,Math.max(a.timer.minAnchorScrollTime,e));b("html, body").animate({scrollTop:b(d).offset().top-c},{duration:e,start:this.postScrollToPageAnchor(e)})},hasNoPopover:function(){return g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)},createUserDismissalOkayGotItToolTip:function(b){var d=this._createElement(a.templates.dismissOkayGotItToolTipTemplate,b),c=document.createElement("BUTTON");b.get("dismissalButtonText")?
c.innerHTML=b.get("dismissalButtonText"):c.innerHTML="OKAY, GOT IT";c.addEventListener("click",function(){m.view.logMetricsUserDismissalTip(Date.now(),b);m.view.dismissByUserHandler(b);m.view.dismissAndRender()});"userOkayGotItBlackBorder"===b.get("dismissalType")?(c.style.cssText="background-color: Transparent; border-width: thin; text-align: center; border-color: black; border-style: solid; display: table-row; float: right;",c.style.color=b.get("elementTextColor")):(c.style.cssText="background-color: Transparent; outline: none; border: 0; padding-top: 2.5%; padding-right: 2%; display: table-row; float: right;text-decoration: underline;",
"userOkayGotItWhiteText"===b.get("dismissalType")?c.style.color="white":c.style.color=b.get("elementTextColor"));d.find(".tooltip-userdismissable").append(c);return d},createUserActionToolTip:function(b){var d=this._createElement(a.templates.userActionToolTipTemplate,b),c=d.find("#qtip-button")[0];b.get("nestedSAList")?c.addEventListener("click",function(){try{var a=JSON.parse(b.get("nestedSAList"));a&&0<a.length&&l.dispatchShoppingAidEvent(a)}catch(D){m.view.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",
b.get("identifier"))}m.view.dismissAndRender()}):c.addEventListener("click",function(){m.view.logMetricsUserDismissalTip(Date.now(),b);m.view.dismissAndRender()});return d},createUpdatedUserActionToolTip:function(b){var d=b.get("highlighter")&&!0===b.get("highlighter")?a.templates.userActionToolTipTemplate_V3:a.templates.userActionToolTipTemplate_V2;d=this._createElement(d,b);d.find("#qtip-button")[0].addEventListener("click",function(){m.view.countLogger("tooltip_cta_clicked",b.get("identifier"));
b.get("nestedSAList")?m.view.renderNestedSA(b):m.view.logMetricsUserDismissalTip(Date.now(),b);m.view.dismissAndRender()});return d},logMetricsUserDismissalTip:function(a,b){a=Math.ceil(4*((a-m.view.tipStartTime)/b.get("elementDuration")));this.countLogger("tooltip_dismissed",b.get("identifier"));this.countLogger("tooltip_dismissal_quarter_"+a,b.get("identifier"))},addAndPosition:function(d,c){var e,f=e=c.get("dismissalType")&&m.utils.isGuidedTour(c)?this.createUpdatedUserActionToolTip(c):c.get("elementCTA")?
this.createUserActionToolTip(c):"userCross"===c.get("dismissalType")?this._createElement(a.templates.dismissCrossToolTipTemplate,c):c.get("dismissalType")&&-1!==c.get("dismissalType").indexOf("userOkayGotIt")?this.createUserDismissalOkayGotItToolTip(c):"hotspot"===c.get("tipType")&&g.isDefined(c.get("nestedSAList"))?this._createElement(a.templates.hotspotTemplate,c):this._createElement(a.templates.defaultTemplate,c);if(c.get("videoSource")){c.get("videoThumbnail")||(f=c.get("videoSource").split(","),
c.set({videoThumbnail:f[0].replace(/^\s*/,"").replace(/\s*$/,"")}),1<f.length?c.set({videoSource:f[1].replace(/^\s*/,"").replace(/\s*$/,"")}):c.set({videoSource:""}));f=this._createElement(a.templates.preVideoTemplate,c);var q=this._createElement(a.templates.dismissIconTemplate,c);e.find("span.qtips-text").html(q).append(f);f=e}this.setElement(this.pageAnchor,f);b(this.qtipsId).hide();this.addStaticToolTipHandlers(c);var h=this;("userCross"===c.get("dismissalType")||m.utils.isGuidedTour(c))&&b("#tooltip-dismiss-cross").click(function(){m.view.logMetricsUserDismissalTip(Date.now(),
c);m.view.dismissByUserHandler(c);m.view.dismissAndRender()});b(f).click(function(){if("hotspot"===c.get("tipType"))l.dispatchShoppingAidEvent(JSON.parse(c.get("nestedSAList"))),m.view.dismissAndRender();else if(c&&c.attributes){var a=c.attributes.identifier;g.isDefined(h.terminationCallback)&&h.terminationCallback({identifier:a})}});if(0<b(this.qtipsId).length){q=b(u).width()*a.view.maxWidthFactor;q=q>=a.view.maxWidth?a.view.maxWidth:q;if(c.get("videoSource")&&c.get("videoWidth")>b(this.qtipsId).width()){var p=
b(this.qtipsId).width();b(this.qtipsId).width(c.get("videoWidth")+a.view.deltaX);var t=c.get("videoWidth");a.regex.positionRightRegex.test(c.get("elementArrowPosition"))&&(p=parseInt(b(this.qtipsId).css("left"),10)-(t-p)-a.view.deltaX,b(this.qtipsId).css({left:p}))}b(this.qtipsId).width()>q&&(b(this.qtipsId).width(q),c.set({videoWidth:q-a.view.deltaX}));this.setThumbnailCss(e,c);if(d!==this.pageAnchor)if("hotspot"===c.get("tipType")){if(!this.adjustHotspotPosition(d,c.get("elementPositionY"),c.get("elementPositionX")))return}else if(!this.adjustCoordinates(d,
c.get("elementArrowPosition")||this.defaultArrowPosition,c.get("offsetX"),c.get("offsetY")))return;return f}},setThumbnailCss:function(a,d){if(d.get("videoSource")){d=.25*b(this.qtipsId).width();var c=.15*b(this.qtipsId).width(),e=a.find("i#qtip-dismiss-cross").height();a.find("div#qtip-thumbnail").css({width:d+"px",height:c+"px"});a.find("img#qtip-thumbnail-image").css({width:d+"px",height:c+"px"});a.find("img#qtip-thumbnail-play").css({width:.64*c+"px",height:.64*c+"px"});var g=b(this.qtipsId).height()>
c?b(this.qtipsId).height():c;a.find("img#qtip-thumbnail-play").css({left:(d-.64*c)/2+"px",top:(g-.64*c)/2+"px"});a.find("i#qtip-dismiss-cross").css({position:"relative",right:"0px",top:(g-e)/2+"px"})}},animateIn:function(d){b(this.qtipsId).fadeIn(a.timer.defaultFadeTime);0<d.get("elementBounceDuration")&&"hotspot"!==d.get("tipType")&&setTimeout(this.bounceAnimate.bind(this),0,d.get("elementBounceDuration"))},animateVideo:function(d){var c=this,e=b(c.qtipsId).prop("classList"),g=!1,f;for(f=0;f<e.length;f++)a.regex.positionTopRegex.test(e[f])&&
(g=!0);b(c.qtipDismissIcon).css({top:""});e=c._createElement(a.templates.videoTemplate,d);c._createElement(a.templates.dismissIconTemplate,d);var q=b(c.qtipThumbnailTextId).position();f=b(c.qtipsId).position().top;var h=b(c.qtipsId).height();b(c.qtipThumbnailId).remove();b(c.qtipThumbnailTextId).css({"padding-left":"","padding-bottom":"10px"});var l=b(c.qtipThumbnailTextId).height();b(c.qtipThumbnailTextId).css({position:"absolute",left:q.left+"px",top:q.top+"px"});b(c.qtipsId).find("span.qtips-text").append(e);
b(c.qtipThumbnailTextId).animate({left:"-\x3d"+q.left+"px"},{duration:800,queue:!1,complete:function(){b(c.qtipThumbnailTextId).css({position:"",left:"",top:""})}});b(c.qtipVideoId).removeAttr("controls");g?(g=e.height(),b(c.qtipVideoId).css({height:e.height()}),b(c.qtipVideoId).attr("poster",d.get("videoThumbnail")),e.hide(),e.animate({height:"toggle"},{duration:1E3,queue:!1,complete:function(){b(c.qtipVideoId).attr("controls","")}})):(g=e.height()+l,b(c.qtipVideoId).css({height:e.height()}),b(c.qtipVideoId).attr("poster",
d.get("videoThumbnail")),e.hide(),b(c.qtipsId).css({top:f+h+"px"}),e.animate({height:"toggle"},{duration:800,queue:!1,complete:function(){b(c.qtipVideoId).attr("controls","")}}),b(c.qtipsId).animate({height:"+\x3d"+g+"px",marginTop:-g+"px"},{duration:1E3,queue:!1,complete:function(){}}).css("overflow","visible"))},bounceAnimate:function(c){var d=a.bounce.amplitude;this.animate({delay:10,duration:c,delta:function(b){return Math.pow(Math.E,-1*a.bounce.gamma*b)*Math.cos(a.bounce.beta*b-a.bounce.alpha)},
anchor:this.qtipsId,basePosition:b(this.qtipsId).position().top,step:function(a){b(this.anchor).css({top:this.basePosition-d*a+"px"})}})},animate:function(a){var b=Date.now();this.tipStartTime=b;this.animateIntervalId=setInterval(function(){var c=(Date.now()-b)/a.duration;1<c&&(c=1);var d=a.delta(c);a.step(d);1===c&&clearInterval(this.animateIntervalId)},a.delay)},fadeOut:function(c){g.isDefined(c)?0<b(this.qtipsId).length?(b(this.qtipsId).fadeOut(a.timer.defaultFadeTime,c.bind(this)),-1!==h.getIndexByAnchor(this.collection.elementAnchorList,
this.anchor)?this.setPreviousTipDismissalTime(0):this.setPreviousTipDismissalTime(Date.now())):(c=c.bind(this),c()):b(this.qtipsId).fadeOut(a.timer.defaultFadeTime);g.isDefined(this.animateIntervalId)&&(clearInterval(this.animateIntervalId),this.animateIntervalId=w)},nextQTip:function(){this.clearFadeOut();this.clearAdjustCoordinates();g.isDefined(this.collection.elementAnchorList)&&0<this.collection.elementAnchorList.length?(this.remove(),this.postQTipRender()):this.stopQTips()},stopQTips:function(){this.removeAutoDismissalHandlers();
this.removeStaticToolTipHandlers();var c=this.collection.invokingEventsMap,d;for(d in c)if(c.hasOwnProperty(d)&&g.isDefined(c[d]))for(var e=c[d],f=0;f<e.length;f++)d.toLowerCase()===a.PartnerEvent?g.detachTrigger(e[f],this.collection.auiTriggerHandler[e[f]].callback):b(e[f]).unbind(d,this.collection.registerEvent);this.collection.invokingEventsMap={};this.fadeOut(this.remove.bind(this));this.clearRender();this.clearAdjustCoordinates()},adjustCoordinates:function(c,e,g,f){var q=this,h=b(this.qtipsId);
if(0>=h.length)return!1;var l=b(c)[0].getBoundingClientRect();c=b(c).offset().top-l.top||0;var t=a.view.arrowHeight+a.view.marginFactor*a.view.deltaY;if("topleft"===e){var m=l.left;var r=l.bottom+a.view.arrowHeight+a.view.deltaY}else if("bottomleft"===e)m=l.left,r=l.top-Math.abs(h.height())-t;else if("bottomright"===e)m=l.right-Math.abs(h.width())-a.view.deltaX,r=l.top-Math.abs(h.height())-t;else if("topright"===e)m=l.right-Math.abs(h.width())-a.view.deltaX,r=l.bottom+a.view.arrowHeight+a.view.deltaY;
else if("topmiddle"===e){var p=l.right-l.left;m=l.left+parseFloat(((p-Math.abs(h.width())-a.view.deltaX)/2).toFixed(2));r=l.bottom+a.view.arrowHeight+a.view.deltaY;p=parseFloat((Math.abs(h.width())/2).toFixed(2));this._setClassLeftStyleProperty("qtips-arrow-topmiddle",p+"px");this._setHighlighterClassLeftStyleProperty("sa-highlighter-topmiddle",p+"px")}else if("bottommiddle"===e)p=l.right-l.left,m=l.left+parseFloat(((p-Math.abs(h.width())-a.view.deltaX)/2).toFixed(2)),r=l.top-Math.abs(h.height())-
t,p=parseFloat((Math.abs(h.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-bottommiddle",p+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-bottommiddle",p+"px");else return!1;g&&(m+=g/100*h.width());f&&(r+=f/100*h.height());g=u.innerHeight||b(u).height();0>r?(r=l.bottom+a.view.arrowHeight+a.view.deltaY,"bottomleft"===e?(b(this.qtipsId).removeClass("qtips-arrow-bottomleft").addClass("qtips-arrow-topleft"),b(this.highlighterId).removeClass("sa-highlighter-bottomleft").addClass("sa-highlighter-topleft")):
"bottomright"===e?(b(this.qtipsId).removeClass("qtips-arrow-bottomright").addClass("qtips-arrow-topright"),b(this.highlighterId).removeClass("sa-highlighter-bottomright").addClass("sa-highlighter-topright")):"bottommiddle"===e&&(b(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-topmiddle"),b(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-topmiddle"),p=parseFloat((Math.abs(h.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-topmiddle",
p+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-topmiddle",p+"px"))):l.bottom+Math.abs(h.height())+t>g&&(r=l.top-Math.abs(h.height())-t,"topleft"===e?(b(this.qtipsId).removeClass("qtips-arrow-topleft").addClass("qtips-arrow-bottomleft"),b(this.highlighterId).removeClass("sa-highlighter-topleft").addClass("sa-highlighter-bottomleft")):"topright"===e?(b(this.qtipsId).removeClass("qtips-arrow-topright").addClass("qtips-arrow-bottomright"),b(this.highlighterId).removeClass("sa-highlighter-topright").addClass("sa-highlighter-bottomright")):
"topmiddle"===e&&(b(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-bottommiddle"),b(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-bottommiddle"),p=parseFloat((Math.abs(h.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-bottommiddle",p+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-bottommiddle",p+"px")));r+=c;g=u.innerWidth||b(u).width();0>=m&&l.left+Math.abs(h.width())+a.view.deltaX>=g?(h=Math.abs(h.width())+
m,b(this.qtipsId).width(h),m=a.view.deltaX):m+Math.abs(h.width())+a.view.deltaX>=g&&0>=l.right-Math.abs(h.width())-a.view.deltaX?(e=m+Math.abs(h.width())+a.view.deltaX-g,h=Math.abs(h.width())-e,b(this.qtipsId).width(h)):0>=m?"topright"===e?(m=l.left+a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-topright").addClass("qtips-arrow-topleft"),b(this.highlighterId).removeClass("sa-highlighter-topright").addClass("sa-highlighter-topleft")):"bottomright"===e?(m=l.left+a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-bottomright").addClass("qtips-arrow-bottomleft"),
b(this.highlighterId).removeClass("sa-highlighter-bottomright").addClass("sa-highlighter-bottomleft")):"topmiddle"==e?(m=l.left+a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-topleft"),b(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-topleft")):"bottommiddle"==e&&(m=l.left+a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-bottomleft"),b(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-bottomleft")):
m+Math.abs(h.width())+a.view.deltaX>=g&&("topleft"===e?(m=l.right-Math.abs(h.width())-a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-topleft").addClass("qtips-arrow-topright"),b(this.highlighterId).removeClass("sa-highlighter-topleft").addClass("sa-highlighter-topright")):"bottomleft"===e?(m=l.right-Math.abs(h.width())-a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-bottomleft").addClass("qtips-arrow-bottomright"),b(this.highlighterId).removeClass("sa-highlighter-bottomleft").addClass("sa-highlighter-bottomright")):
"topmiddle"===e?(m=l.right-Math.abs(h.width())-a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-topright"),b(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-topright")):"bottommiddle"===e&&(m=l.right-Math.abs(h.width())-a.view.deltaX,b(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-bottomright"),b(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-bottomright")));
"function"===typeof k.$.withoutRtl?(k.$.withoutRtl(function(){q._setTooltipsAttributesJquery(m,r)}),d.incrementCounter("QTipsWebLibrary:withoutRTL_supported")):(this._setTooltipsAttributesJavascript(m,r),d.incrementCounter("QTipsWebLibrary:withoutRTL_not_supported"));return!0},adjustHotspotPosition:function(a,c,d){if(0>=b(this.qtipsId).length)return!1;var e=b(a)[0].getBoundingClientRect();a=b(a).offset().top-c;d=e.left+d;b(this.qtipsId).css({left:d+"px",top:a+"px",visibility:"visible"});return!0},
_setTooltipsAttributesJquery:function(a,c){b(this.qtipsId).css({left:a+"px",top:c+"px",visibility:"visible"})},_setTooltipsAttributesJavascript:function(a,b){document.getElementById("qtips").style.cssText="left:"+a+"px;top:"+b+"px;visibility: visible;"},_setClassLeftStyleProperty:function(a,b){var c=document.createElement("style");document.head.appendChild(c);(c=c.sheet)&&(c.insertRule?c.insertRule("."+a+"::after { left:"+b+" }",0):c.addRule&&c.addRule("."+a+"::after","left:"+b))},_setHighlighterClassLeftStyleProperty:function(a,
b){var c=document.createElement("style");document.head.appendChild(c);(c=c.sheet)&&(c.insertRule?c.insertRule("."+a+" { left:"+b+" }",0):c.addRule&&c.addRule("."+a,"left:"+b))},remove:function(){b(this.qtipsId)&&b(this.qtipsId)[0]!==w&&this._removeElement(this.qtipsId)},setDismissalCallback:function(a){this.dismissalCallback=a},setTerminationCallback:function(a){this.terminationCallback=a},setPreviousTipDismissalTime:function(a){this.previousTipDismissalTime=a},countLogger:function(){},setCountLogger:function(a){this.countLogger=
a}});m.view=new e;m.addStyles();return m})})();(function(){n.register("QTipsConstants",function(){return{view:{deltaX:20,deltaY:5,marginFactor:4,arrowHeight:8,maxWidth:300,maxWidthFactor:.8,saDOMNameAttribute:"data-name"},bounce:{alpha:10,beta:60,gamma:2,amplitude:7},timer:{defaultStartOffset:3E3,defaultDismissalCallbackTime:800,defaultAnimationTime:7E3,defaultFadeTime:400,minAnchorScrollTime:400,maxAnchorScrollTime:3E3,anchorReAdjustTime:3E3,scrollTimePerPixel:1,searchSuggestionPollTime:300},regex:{anchorSpliterRegex:/\|/g,
templateSpliterRegex:/<%\s*\w*\s*%>/g,numberRegex:/^(\-|\+)?([0-9]+|Infinity)$/,positionRightRegex:/right/,positionTopRegex:/top/},popOverAnchors:{popoverClass:".a-popover",searchSugesstions:".s-suggestion-container",searchFilterPage:".sx-page.sx-filter-page.sx-animable"},templates:{defaultTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv class\x3d"qtips-textholder aok-relative aok-float-left"\x3e \x3cspan class\x3d"qtips-text"\x3e \x3c% elementValue %\x3e\x3c/span\x3e\x3c/div\x3e \x3c/div\x3e',
dismissCrossToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d \'tooltip-cross-dismissal\' style\x3d"display: table; width: 100%; padding-left: 2%; padding-right: 0%;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: 90%; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv style\x3d"display: table-cell; text-align: center; padding-left: 1%; "\x3e\x3ci id\x3d"tooltip-dismiss-cross" class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"padding-left: 0%; padding-right: 1%;vertical-align: top; "\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
dismissOkayGotItToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX      %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv class\x3d"tooltip-userdismissable" style\x3d"padding-left: 2%; padding-right: 2%; display: table; border-collapse: collapse;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-row; text-align: left; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e\x3c/div\x3e \x3c/div\x3e',
dismissIconTemplate:'\x3cdiv id\x3d"qtip-dismiss"\x3e\x3ci id\x3d"qtip-dismiss-cross" class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"float:right; padding-left:5%;padding-bottom:5%;"\x3e\x3c/i\x3e\x3c/div\x3e',preVideoTemplate:'\x3cdiv id\x3d"qtip-thumbnail" style\x3d"text-align: left;display: table-cell; vertical-align: middle; border-style: solid; border-width: 1px; border-color: #FFFFFF; position:relative;"\x3e\x3cimg id\x3d"qtip-thumbnail-image"src\x3d\x3c%videoThumbnail%\x3e style\x3d"vertical-align: middle;position:relative"\x3e\x3cimg id\x3d"qtip-thumbnail-play"src\x3d"https://m.media-amazon.com/images/G/31/shopping-aids/play-icon._CB456863585_.png" style\x3d"vertical-align: middle;position:absolute;left:0"\x3e\x3c/div\x3e\x3cspan id\x3d"qtip-thumbnail-text" style\x3d"text-align: left;padding-left: 5%;display: table-cell;vertical-align: middle;width: 75%; line-height:1.2"\x3e\x3c% elementValue %\x3e\x3c/span\x3e',
videoTemplate:'\x3cvideo id\x3d"qtip-video" width\x3d\x3c%videoWidth%\x3e style\x3d"background-color: black;vertical-align:bottom" controls autoplay controlslist\x3d"nodownload" preload\x3d"metadata"\x3e\x3csource src\x3d\x3c%videoSource%\x3e type\x3d"video/mp4"\x3e\x3c/video\x3e',hotspotTemplate:'\x3cdiv id\x3d"qtips"class\x3d"qtips-background"\x3e\x3cstyle\x3e.qtips-background{ border-color : #EC912D;border-radius: 50%;width: 16px;height: 16px;background-color: #EC912D; position:absolute;display: table-cell;text-align:center;box-shadow: 0 0 0 0 rgba(236, 145, 45, 1);transform: scale(1);animation: pulse 1.5s 0.2s \x3c% elementBounceDuration %\x3e;} .qtips-background:after{ content: none;}\x3c/style\x3e\x3cstyle\x3e @keyframes pulse {0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 12px rgba(236, 145, 45, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0); }}\x3c/style\x3e\x3cp class\x3d"qtips-text" style \x3d"vertical-align:middle; position:relative;top:-10.5px;right:2.5px;color: white; font-size:15px; font-family: Bookerly;font-style: italic;font-size;font-weight: bold;"\x3ei\x3c/p\x3e\x3c/div\x3e',
userActionToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: 100%; padding-left: 2%; padding-right: 2%; border-collapse: collapse;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: 90%; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv style\x3d"display: table-cell; text-align: center; padding-left: 1%; "\x3e\x3ci id\x3d"tooltip-dismiss-cross" class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"padding-left: 0%; padding-right: 1%;vertical-align: top; "\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: thin; text-align: right; border-color: black; border-style: solid; display: table-cell; float: right; border-radius: 3px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
userActionToolTipTemplate_V2:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background {background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBorderColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: auto; font-family: \'Amazon Ember\'"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle; width: auto; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; max-width: 127px"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: right; left:0;right:-0.1%;top:0; bottom: -0.1%; vertical-align: top; padding-left: 20px;"\x3eX\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: 1px; text-align: right; border-color: \x3c% elementTextColor %\x3e; border-style: solid; display: table-cell; color: \x3c% elementTextColor %\x3e; padding: 6px 22px; left: 10px; margin-top: 10px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3cdiv style\x3d"display: table-cell; text-align: right; margin-top: 10px; padding-left:10px; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; vertical-align: bottom;"\x3e \x3c% elementIndex %\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
userActionToolTipTemplate_V3:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background {background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBorderColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: auto; font-family: \'Amazon Ember\'"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle; width: auto; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; max-width: 127px"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: right; left:0;right:-0.1%;top:0; bottom: -0.1%; vertical-align: top; padding-left: 20px;"\x3eX\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: 1px; text-align: right; border-color: \x3c% elementTextColor %\x3e; border-style: solid; display: table-cell; color: \x3c% elementTextColor %\x3e; padding: 6px 22px; left: 10px; margin-top: 10px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3cdiv style\x3d"display: table-cell; text-align: right; margin-top: 10px; padding-left:10px; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; vertical-align: bottom;"\x3e \x3c% elementIndex %\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"sa-highlighter" class\x3d"sa-highlighter-background sa-highlighter-\x3c% elementArrowPosition %\x3e"\x3e\x3cstyle\x3e.sa-highlighter-background{ border: 4px solid \x3c% elementBackgroundColor %\x3e;}\x3c/style\x3e\x3c/div\x3e\x3c/div\x3e'},
errorCodes:{ELEMENT_NOT_VISIBLE:"Element not Visible on Viewport",EVENT_CHECK_NOT_SATISFIED:"Event Check not Satisfied",DEPENDANT_CHECK_NOT_SATISFIED:"Dependant Check not Satisfied",API_THROTTLED:"API in Throttled State",AID_NOT_ALLOWLISTED:"Shopping Aid is not Allowlisted",INVALID_VERSION:"Invalid Version",INVALID_SHOPPING_AID_TYPE:"Invalid Shopping Aid Type",SA_NOT_DISPLAYED:"Shopping Aid is not being displayed",BOTTOM_SHEET_IN_VIEW:"Bottom Sheet in View",INVALID_STATE_DATA:"Invalid State Data",
ILLEGAL_INPUT:"Illegal Input",ALREADY_RENDERED:"Already Rendered",SPARKLE_IN_VIEW:"Sparkle in View",UNKNOWN:"Unknown"},userEvent:{optOut:"OPT_OUT",complete:"COMPLETE",optIn:"OPT_IN",yetToOptIn:"YET_TO_OPT_IN"},contextAwareSADelimiter:":::",secondToMillisecondConversion:1E3,ShoppingAidsSparkles:"Sparkles",ShoppingAidsTooltips:"ToolTips",PartnerEvent:"partnerevent",SparkleClick:"click.sparkle",TooltipClick:"click.tooltip"}})})();(function(){n.register("QTipsStyles",function(){return"#qtips{position:absolute;overflow:initial}.qtips-background{position:fixed;z-index:90000;padding:10px;opacity:1;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.qtips-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.qtips-arrow-topleft:after,.qtips-arrow-topmiddle:after,.qtips-arrow-topright:after{top:-8px;border-width:0 8px 9px}.qtips-arrow-bottomleft:after,.qtips-arrow-topleft:after{left:14px}.qtips-arrow-bottomright:after,.qtips-arrow-topright:after{right:14px}.qtips-arrow-bottomleft:after,.qtips-arrow-bottommiddle:after,.qtips-arrow-bottomright:after{bottom:-8px;border-width:9px 8px 0;-webkit-box-shadow:0 0 0 -2px rgba(17,17,17,.25);-moz-box-shadow:0 0 0 -2px rgba(17,17,17,.25);box-shadow:0 0 0 -2px rgba(17,17,17,.25);-o-box-shadow:0 0 0 -2px rgba(17,17,17,.25)}.qtips-arrow-left:after{left:-12px; border-width:0 8px 9px;transform:rotate(270deg)}.qtips-arrow-right:after{border-width:0 8px 9px;transform:rotate(90deg)}.qtips-textholder{width:100%;height:100%}.slate-image-video-loader {background: #ffffff;border-radius: 50%;position: absolute;opacity: 0.7;}.slate-image-play-button {margin: auto;position: absolute;border-style: solid;border-color: transparent transparent transparent #ada6a6;} .sa-highlighter-background { z-index: 90000; padding: 10px; width: 10px; height: 10px; background-color: transparent; border-radius: 50%; position: absolute; animation: ring 1.5s linear infinite; }.sa-highlighter-topleft, .sa-highlighter-topmiddle, .sa-highlighter-topright { top: -50px; }.sa-highlighter-topleft, .sa-highlighter-bottomleft { left: 8px; }.sa-highlighter-bottomright, .sa-highlighter-topright { right: 8px; }.sa-highlighter-bottomleft, .sa-highlighter-bottommiddle, .sa-highlighter-bottomright { bottom: -50px; } @keyframes ring { from {opacity: 1;} to {opacity: 0; transform: scale(3);}}"})})();
(function(){n.when("A").register("QTipsMetrics",function(){var k=u.ue;return{incrementCounter:function(b,a,e){a=a||1;k&&k.count&&(k.count(b,(k.count(b)||0)+a),e&&k.count(b+"_"+e,(k.count(b)||0)+a))}}})})();(function(){n.register("ShoppingAidsSparklesStyles",function(){var k=[".sparkle-container{background:#eaeded;position:fixed;bottom:4px;left:0;right:0;margin:9px;box-sizing:border-box;display:table;border-radius:10px;box-shadow:0px 2px 4px rgba(0, 0, 0, .5);z-index:99;opacity:.5;transform:translateY(100%);transition:transform .6s,opacity .5s}",
".sparkle-content{display:table-cell;vertical-align:top;width:100%;padding-top:13px;padding-bottom:13px;padding-left:9px;padding-right:9px}",".sparkle-close{display:table-cell;vertical-align:top;padding:7px 9px 0 0;width:12px;height:13px;font-weight:700}",".sparkle-image-container{display:table-cell;vertical-align:top;width:34px;height:34px}",".sparkle-text-container{display:table-cell;vertical-align:middle;padding-left:15px}",".sparkle-text{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",
".sparkle-description-container{display:table-cell;vertical-align:middle;padding-left:7px;height:34px}",".sparkle-description{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;color:#111;font-size:14px}",".sparkle-linkText-container{display:table-cell;vertical-align:middle;padding-left:0;padding-right:20px}",".sparkle-linkText{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;color:#0066c0;font-weight:bold;font-size:14px}",
".sparkle-image,.sparkle-image-loader{border:none;height:34px;width:34px}",".sparkle-image-loader{display:none}.sparkle-container.sparkle-loading .sparkle-image-loader{display:block}",".sparkle-container.sparkle-loading .sparkle-image{display:none}",".sparkle-container.sparkle-loading .sparkle-content{pointer-events:none}",".sparkle-container.sparkle-loading .sparkle-linkText-container{pointer-events:none}",".sparkle-container.sparkle-loading .sparkle-text{color:#aaa}",".sparkle-container.sparkle-open{transform:translateY(0);opacity:1}",
".sparkle-container.sparkle-closing{transform:translateY(100%);opacity:.5}"],b=[".sparkle-container{background:#eaeded;position:fixed;bottom:4px;left:0;right:0;margin:9px;box-sizing:border-box;display:table;border-radius:10px;box-shadow:0px 2px 4px rgba(0, 0, 0, .5);z-index:99;opacity:.5;transform:translateY(100%);transition:transform .6s,opacity .5s}",".sparkle-content{display:table-cell;vertical-align:top;width:100%;padding-top:13px;padding-bottom:13px;padding-left:9px;padding-right:9px}",".sparkle-close{display:table-cell;vertical-align:top;padding:7px 0 0 9px;width:12px;height:13px;font-weight:700}",
".sparkle-image-container{display:table-cell;vertical-align:top;width:34px;height:34px}",".sparkle-text-container{display:table-cell;vertical-align:middle;padding-right:15px}",".sparkle-text{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",".sparkle-description-container{display:table-cell;vertical-align:middle;padding-right:7px;height:34px}",".sparkle-description{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;color:#111;font-size:14px}",
".sparkle-linkText-container{display:table-cell;vertical-align:middle;padding-right:0;padding-left:20px}",".sparkle-linkText{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;color:#0066c0;font-weight:bold;font-size:14px}",".sparkle-image,.sparkle-image-loader{border:none;height:34px;width:34px}",".sparkle-image-loader{display:none}.sparkle-container.sparkle-loading .sparkle-image-loader{display:block}",".sparkle-container.sparkle-loading .sparkle-image{display:none}",
".sparkle-container.sparkle-loading .sparkle-content{pointer-events:none}",".sparkle-container.sparkle-loading .sparkle-linkText-container{pointer-events:none}",".sparkle-container.sparkle-loading .sparkle-text{color:#aaa}",".sparkle-container.sparkle-open{transform:translateY(0);opacity:1}",".sparkle-container.sparkle-closing{transform:translateY(100%);opacity:.5}"],a=document.createElement("style");a.innerHTML="rtl"===document.dir?b.join(""):k.join("");document.head.appendChild(a)})})();(function(){n.when("A",
"jQuery","QTipsMetrics","QTipsConstants","QTips","SAEndPointsConfig","NestedShoppingAidHelper","ShoppingAidsGenericUtils","LogImpressionManager","SAFeature","SparkleConfig","SAMetricConstants","ShoppingAidsFilters","ContextAwareSubstitutor").register("ShoppingAidsSparkles",function(k,b,a,e,f,d,c,l,g,h,q,t,m,r){var p=d.logImpressionEndPoint,P=!1,x=0,B=0,n=0,E=0,z=u.innerHeight,A=w,y=w,T=w,v={logImpression:function(a,b,c){if(l.isDefined(c)){var d=c.userEvent;var e=c.successCallback;var f=c.errorCallback;
var q=c.contextAwareIndex}h.clientSideCaching?g.handle(a,b,"sparkle",A,c):(a={pageType:A,shoppingAidsType:"sparkle",id:a,schedulingType:b},l.isDefined(d)&&(a.userEvent=d),l.isDefined(q)&&(a.contextAwareIndex=q),k.ajax(p,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:a,success:e,error:f}))},logInteraction:function(a,b,c,d){c()},logCounter:function(b,c){a.incrementCounter("shopping_aids_"+y+"_sparkle"+b,c);a.incrementCounter("shopping_aids_"+A+"_sparkle_"+b,c);a.incrementCounter("shopping_aids_sparkle_"+
b,c)},nestedJsonParser:function(a){try{return JSON.parse(a)}catch(K){v.logCounter("illegal_input_nested_shopping_aid")}},detectUserScroll:function(){var a=u.scrollY;20>=a?document.getElementsByClassName("sparkle-container")[0].style.bottom="46px":document.getElementsByClassName("sparkle-container")[0].style.bottom="4px";x=Math.max(x,a);a<x&&!B&&(B=1)},_contextAwareModelTransformer:function(a,b){b=a.getState(b);b.clientSideTargetting=a.getClientSideTargetting();b.desiredWeblabTreatment=a.getDesiredWeblabTreatment();
b.nestedSAList=a.getNestedSAList();b.identifier=a.getIdentifier();return b},executeContextAwareSubstitution:function(a){var b=a.getEventData().state,c=this._contextAwareModelTransformer(a,b),d=m.getContextTargetingIndex(c);r.substitute(c,d,e.ShoppingAidsSparkles);a.setClientSideTargetting(c.clientSideTargetting);a.setState(b,c);a.setNestedSAList(c.nestedSAList);l.isDefined(c.contextAwareIndex)&&(a.setTriggerDependentTriggering(w),a.setContextAwareIndex(c.contextAwareIndex));return a}},G={create:function(a){var b=
a.sparkleType,d=a.identifier,g=a.invokingEventType,f=a.invokingEventElement,h=a.weblabName,q=a.desiredWeblabTreatment,l=a.allocatedWeblabTreatment,m=a.schedulingType,t=a.targetEndpoint,r=a.typeOfStaticSparkle,p=a.nestedSAList,x=a.bottomNavPadding,P=a.backGroundColor,C=a.borderColor,B=a.borderStyle,n=a.descriptionColor,E={},A,z=!1,D=a.successResponse,y=a.failureResponse,N=a.onDemand,G=a.contextAwareIndex,V=a.triggerDependentTargeting,Q,R;if("dynamic"===b&&f&&g){var S=[];try{S=JSON.parse(a.stateData)}catch(Y){v.logCounter("illegal_input_stateData");
(y=this.failureResponse)&&"function"===typeof y&&y(e.INVALID_STATE_DATA);return}S.forEach(function(a){E[a.stateId]={id:a.stateId,mode:a.mode,linkText:a.text,icon:a.icon,descText:a.descriptionText}});document.querySelector(f).addEventListener(g,function(a){A=a.detail})}else if("static"===b){E={initial:{id:"initial",mode:"default",linkText:a.displayText,icon:a.displayIcon,descText:a.descriptionText}};var O={requestUpdate:w,state:"initial",onShow:function(a){this.requestUpdate=a.requestUpdate},onClick:function(){this.requestUpdate({signal:"complete"});
var b=v.nestedJsonParser(p);b&&0<b.length?setTimeout(function(){c.dispatchShoppingAidEvent(b)},500):setTimeout(function(){u.location.href=a.targetEndpoint},500)},onClose:function(){}};f&&g&&g.toLowerCase()===e.PartnerEvent?R=k.on(f,function(){A=O}):f&&g?document.querySelector(f).addEventListener(g,function(){A=O}):A=O}else{v.logCounter("illegal_input");(y=this.failureResponse)&&"function"===typeof y&&y(e.ILLEGAL_INPUT);return}return{getSparkleType:function(){return b},getIdentifier:function(){return d},
getState:function(a){return E[a]},isEligible:function(){return!(!A||z)},getEventData:function(){return A},isDone:function(){return z},getWeblabName:function(){return h},getDesiredWeblabTreatment:function(){return q},getAllocatedWeblabTreatment:function(){return l},getSchedulingType:function(){return m},getTargetEndpoint:function(){return t},getTypeOfStaticSparkle:function(){return r},getSuccessResponse:function(){return D},getFailureResponse:function(){return y},getOnDemand:function(){return N},getContextAwareIndex:function(){return G},
getTriggerDependentTargeting:function(){return V},getNestedSAList:function(){return p},getClientSideTargetting:function(){return Q},getAuiEventCallback:function(){return R},getBackGroundColor:function(){return P},getBorderColor:function(){return C},getBorderStyle:function(){return B},getDescriptionColor:function(){return n},setBottomNavPadding:function(){T="0"!==x?x:w},setClientSideTargetting:function(a){Q=a},setState:function(a,b){E[a]=b},setContextAwareIndex:function(a){},setNestedSAList:function(a){},
setTriggerDependentTriggering:function(a){},done:function(){z=!0}}}},W={create:function(c,d){function g(){!1===X&&(J.parentNode.removeChild(J),H.parentNode.removeChild(H),X=!0)}function f(){!1===R&&(D.parentNode.removeChild(D),J.parentNode.removeChild(J),F.parentNode.removeChild(F),R=!0)}function h(){!1===Q&&(J.parentNode.removeChild(J),F.parentNode.removeChild(F),Q=!0)}function m(a){a?C.classList.add("sparkle-loading"):C.classList.remove("sparkle-loading")}function r(a){C.classList.remove("sparkle-mode-warning",
"sparkle-mode-success","sparkle-mode-error");"loading"===a.mode?m(!0):"default"!==a.mode&&C.classList.add("sparkle-mode-"+a.mode);if("static"===c.getSparkleType())if(!c.getTypeOfStaticSparkle()||"1"===c.getTypeOfStaticSparkle().toString())G.innerHTML=a.linkText,L.src=a.icon,g(),v.logCounter(c.getIdentifier()+"type1_static_sparkle");else if("2"===c.getTypeOfStaticSparkle().toString())U.innerText=a.linkText,L.src=a.icon,!1===V&&(H.parentNode.removeChild(H),F.parentNode.removeChild(F),V=!0),v.logCounter(c.getIdentifier()+
"type2_static_sparkle");else if("3"===c.getTypeOfStaticSparkle().toString())I.innerText=a.descText,M.innerHTML=a.linkText,f(),v.logCounter(c.getIdentifier()+"type3_static_sparkle");else if("4"===c.getTypeOfStaticSparkle().toString())I.innerText=a.descText,M.innerHTML=a.linkText,L.src=a.icon,h(),v.logCounter(c.getIdentifier()+"type4_static_sparkle");else{if("5"===c.getTypeOfStaticSparkle().toString()){I.innerText=a.descText;M.innerHTML=a.linkText;var b=2.3*a.linkText.length+10;b=Math.min(b,30);!1===
S&&(C.style.cssText="background:#008296;border: 1px solid #007185;border-radius:4px;box-shadow:0px 2px 4px rgba(0, 0, 0, .25);width: 95%;",N.style.cssText="color: #FFFFFF;padding: 8px 8px 0px 12px;",I.style.cssText="color: #FFFFFF;font-size:15px;",M.style.cssText="color: #FFFFFF;font-weight:normal;font-size:15px;border: 1px solid #FFFFFF;padding: 4px 11px;-webkit-line-clamp: 1;border-radius: 4px;",z.style.cssText="width: "+(95-b)+"%;padding-top: 9px;padding-bottom: 9px;",H.style.cssText="padding-right: 8px;text-align: center;width: "+
b+"%;",S=!0);f();v.logCounter(c.getIdentifier()+"type5_static_sparkle")}}else M.innerHTML=a.linkText,G.innerHTML=a.linkText,a.descText!==w&&a.icon!==w?(I.innerText=a.descText,L.src=a.icon,h()):a.icon!==w&&a.descText===w?(L.src=a.icon,g()):a.icon===w&&(I.innerText=a.descText,f());O=a}function p(a){W.removeSparkleFromView(C);d.sparkleClosed(c,a)}function x(a){if(c.isDone())return!1;switch(a.signal){case "statechange":if(a=c.getState(a.state))return m(!1),r(a),!0;p("client_illegal_state");return!1;case "complete":return d.sparkleComplete(c),
(a=c.getState(a.state))?(m(!1),r(a),setTimeout(function(){p("client_complete")},1E4)):p("client_complete"),!0;case "abort":return p("client_abort"),!0;default:return!1}}function B(e,g){x({signal:"statechange",state:e})&&(document.body.appendChild(C),setTimeout(function(){C.classList.add("sparkle-open");d.getMetricsIntersectionObserver();var e=u.scrollY;"Android"===y&&g?(b(u).bind("scroll",k.throttle(v.detectUserScroll,100)),20>=e&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=
q.andoridBottomPadding_SubnavPresent)):"iPhone"===y&&T&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=T+"px");a.incrementCounter(t.SPARKLE_BOTTOM_PADDING_PREFIX+A+"_"+y+"_bottomNav_"+!!T+"_Subnav"+g);P=!0;c.getAuiEventCallback()&&(e=c.getAuiEventCallback(),l.detachTrigger(e.event,e.callback));n=Date.now();E=u.scrollY;d.sparkleShown(c,x);if("static"!==c.getSparkleType()||!c.getTypeOfStaticSparkle()||"5"!==c.getTypeOfStaticSparkle().toString()){e=document.getElementsByClassName("sparkle-container")[0];
var f=e.getElementsByClassName("sparkle-content")[0].getElementsByClassName("sparkle-description-container")[0].getElementsByClassName("sparkle-description")[0];c.getBackGroundColor()!==w&&(e.style.background=c.getBackGroundColor());c.getBorderColor()!==w&&(e.style.borderColor=c.getBorderColor());c.getBorderStyle()!==w&&(e.style.borderStyle=c.getBorderStyle());c.getDescriptionColor()!==w&&(f.style.color=c.getDescriptionColor())}},500))}var C=document.createElement("div");C.classList.add("sparkle-container");
C.setAttribute(e.view.saDOMNameAttribute,c.getIdentifier());var z=document.createElement("div");z.classList.add("sparkle-content");var D=document.createElement("div");D.classList.add("sparkle-image-container");var K=document.createElement("img");K.classList.add("sparkle-image-loader");K.src="https://m.media-amazon.com/images/G/01/amazonui/loading/loading-4x._V1_.gif";var L=document.createElement("img");L.classList.add("sparkle-image");L.alt="Amazon Retail Website logo";D.appendChild(K);D.appendChild(L);
var H=document.createElement("div");H.classList.add("sparkle-linkText-container");var M=document.createElement("a");M.classList.add("sparkle-linkText");M.href="#";H.appendChild(M);var F=document.createElement("div");F.classList.add("sparkle-text-container");var G=document.createElement("a");G.classList.add("sparkle-text");G.href="#";F.appendChild(G);K=document.createElement("div");K.classList.add("sparkle-description-container");var I=document.createElement("a");I.classList.add("sparkle-description");
I.innerText=" ";K.appendChild(I);var J=document.createElement("div");J.classList.add("sparkle-text-container");var U=document.createElement("p");U.classList.add("sparkle-text");U.innerText=" ";J.appendChild(U);z.appendChild(D);z.appendChild(F);z.appendChild(J);z.appendChild(K);var N=document.createElement("div");N.classList.add("sparkle-close");N.innerHTML="";C.appendChild(z);C.appendChild(H);C.appendChild(N);var X=!1,V=!1,Q=!1,R=!1,S=!1,O;H.addEventListener("click",function(a){a.preventDefault();
m(!0);d.sparkleClicked(c,O)});F.addEventListener("click",function(a){a.preventDefault();m(!0);d.sparkleClicked(c,O)});N.addEventListener("click",function(){p("customer_closed")});return{display:function(a){if("Android"===y){var c=q.shouldAddPaddingForPage(A);B(a,c)}else B(a)},isSparkleDisplaying:function(){return P}}},removeSparkleFromView:function(a){a&&(a.classList.add("sparkle-closing"),P=!1,setTimeout(function(){b(u).unbind("scroll",v.detectUserScroll());a.remove()},500))}};d={models:{},dismissWithId:function(a,
c,b){var d=document.getElementsByClassName("sparkle-container")[0];d&&d.getAttribute(e.view.saDOMNameAttribute)===a?(W.removeSparkleFromView(d),c&&"function"===typeof c&&c()):b&&"function"===typeof b&&b(e.errorCodes.SA_NOT_DISPLAYED)},init:function(a){A=a.page;(y=a.platform)||(y=l.platformCheck());this.models=this.createModels(a.sparkles);this.render()},invokeOnDemandSparkle:function(a){A=a.page;(y=a.platform)||(y=l.platformCheck());if(a=G.create(a.sparkles))Array.isArray(this.models)?this.models.unshift(a):
this.models=[a];this.render()},createModels:function(a){var c=[];a.forEach(function(a){(a=G.create(a))&&c.push(a)});return c},getNextEligible:function(){for(var a=0;a<this.models.length&&!this.models[a].isEligible();a++);return this.models.splice(a,1)[0]},render:function(){setTimeout(function(){if(f.view.hasNoPopover()){var a=this.getNextEligible();a&&!l.weblabTriggerAndCheck(a,"sparkle")&&a.done();if(a){if(l.isDefined(a.getTriggerDependentTargeting())){var c=a.getTriggerDependentTargeting();a.setClientSideTargetting(c);
a=v.executeContextAwareSubstitution(a)}c=W.create(a,this);a.setBottomNavPadding();a.getOnDemand()&&c.isSparkleDisplaying()?(a=a.getFailureResponse())&&"function"===typeof a&&a(e.errorCodes.SPARKLE_IN_VIEW):c.display(a.getEventData().state)}else 0<this.models.length&&this.render()}else this.render()}.bind(this),3E3)},sparkleShown:function(a,c){v.logImpression(a.getIdentifier(),a.getSchedulingType(),{successCallback:function(){v.logCounter("logImpression_success");var c=a.getSuccessResponse();c&&"function"===
typeof c&&c()},errorCallback:function(){v.logCounter("logImpression_error")},contextAwareIndex:a.getContextAwareIndex()});v.logCounter("sparkleShown");v.logCounter(a.getIdentifier()+"_sparkleShown");this._scrollDepthMetricLogger(a.getIdentifier(),E,t.SPARKLE_DISPLAY_ATF,t.SPARKLE_DISPLAY_SCROLLED,t.SPARKLE_DISPLAY_DEPTH,t.SPARKLE_DISPLAY_DEPTH_PERCENTAGE);a.getEventData().onShow({requestUpdate:c})},sparkleClicked:function(a,c){a.getEventData().onClick({state:c.id});c=u.scrollY-E;this._scrollDepthMetricLogger(a.getIdentifier(),
c,t.SPARKLE_CTA_ATF,t.SPARKLE_CTA_SCROLLED,t.SPARKLE_CTA_DEPTH,t.SPARKLE_CTA_DEPTH_PERCENTAGE,t.SPARKLE_CTA);c=Date.now()-n;v.logCounter(t.SPARKLE_CTA_TIME,c);v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_CTA_TIME,c);"Android"===y&&(v.logCounter(t.SPARKLE_CTA_MAX_SCROLL_DEPTH,x),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_CTA_MAX_SCROLL_DEPTH,x),c=Math.ceil(x/z*100),v.logCounter(t.SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,c),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,
c),x=0,v.logCounter(t.SPARKLE_CTA_SCROLL_DIRECTION_CHANGE+B),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_CTA_SCROLL_DIRECTION_CHANGE+B),B=0)},sparkleClosed:function(a,c){if("customer_closed"===c){v.logImpression(a.getIdentifier(),a.getSchedulingType(),{userEvent:e.userEvent.optOut,successCallback:function(){v.logCounter("logOptOut_success");var c=a.getSuccessResponse();c&&"function"===typeof c&&c()},errorCallback:function(){v.logCounter("logOptOut_error")},contextAwareIndex:a.getContextAwareIndex()});
var b=u.scrollY-E;this._scrollDepthMetricLogger(a.getIdentifier(),b,t.SPARKLE_DISMISS_ATF,t.SPARKLE_DISMISS_SCROLLED,t.SPARKLE_DISMISS_DEPTH,t.SPARKLE_DISMISS_DEPTH_PERCENTAGE,t.SPARKLE_DISMISSED)}v.logCounter("sparkleClosed");v.logCounter("sparkleClosed_"+c);v.logCounter(a.getIdentifier()+"_sparkleClosed");v.logCounter(a.getIdentifier()+"_sparkleClosed_"+c);b=Date.now()-n;v.logCounter(t.SPARKLE_DISPLAY_DURATION,b);v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_DISPLAY_DURATION,b);"Android"===y&&(v.logCounter(t.SPARKLE_DISMISS_MAX_SCROLL_DEPTH,
x),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_DISMISS_MAX_SCROLL_DEPTH,x),b=Math.ceil(x/z*100),v.logCounter(t.SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,b),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,b),x=0,v.logCounter(t.SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE+B),v.logCounter(a.getIdentifier()+"_"+t.SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE+B),B=0);a.done();a.getEventData().onClose({reason:c});this.render()},sparkleComplete:function(a){v.logInteraction(a.getIdentifier(),
a.getSchedulingType,function(){v.logCounter("logInteraction_success");v.logCounter(a.getIdentifier()+"_logInteraction_success")},function(){v.logCounter("logInteraction_error");v.logCounter(a.getIdentifier()+"_logInteraction_error")})},getMetricsIntersectionObserver:function(){"Android"===y&&(v.logCounter("sparkle_android_user"),u.IntersectionObserver?v.logCounter("sparkle_android_intersectionObserver_supported"):v.logCounter("sparkle_android_intersectionObserver_not_supported"))},_isSparkleATF:function(a){return a<
z},_scrollDepthMetricLogger:function(a,c,b,d,e,g,f){var h=Math.ceil(c/z*100);this._isSparkleATF(c)?(v.logCounter(b),v.logCounter(a+"_"+b)):(v.logCounter(d),v.logCounter(a+"_"+d));l.isDefined(f)&&(v.logCounter(f),v.logCounter(a+"_"+f));v.logCounter(e,c);v.logCounter(a+"_"+e,c);v.logCounter(g,h);v.logCounter(a+"_"+g,h)}};return{init:d.init.bind(d),invokeOnDemandSparkle:d.invokeOnDemandSparkle.bind(d),dismissWithId:d.dismissWithId.bind(d)}})})();(function(){n.when("A","ValueOfFilter","HTMLFilter","CookieFilter",
"URLFilter","QTipsMetrics","SAMetricConstants","SAFeature","QTipsConstants","ShoppingAidsGenericUtils","PageResolver").register("ShoppingAidsFilters",function(k,b,a,e,f,d,c,l,g,h,q){return{filteredShoppingAids:{},start:function(a){return this.filterShoppingAids(a)},removeIneligibleAid:function(a,c){a.splice(c,1)},isShoppingAidEligible:function(a){d.incrementCounter(c.SA_CACHE_PREFIX+c.CLIENTSIDE_FILTER+c.START);return-1!==this.getContextTargetingIndex(a)},getContextTargetingIndex:function(a){if(a.clientSideTargetting&&
a.desiredWeblabTreatment&&-1!==a.clientSideTargetting.indexOf(g.contextAwareSADelimiter)&&-1!==a.desiredWeblabTreatment.indexOf(g.contextAwareSADelimiter))return-1;var c=0;a.invokingEventElement&&a.invokingEventType&&!a.triggerDependentCheck&&(a.triggerDependentTargeting=a.clientSideTargetting,delete a.clientSideTargetting);if(a.clientSideTargetting){c=-1;for(var b=a.clientSideTargetting.split(g.contextAwareSADelimiter),d=0;d<b.length;d++)if(this.excecuteClientSideTargetting(b[d].trim())){c=d;break}}if(0===
c&&a.desiredWeblabTreatment&&a.weblabName&&a.allocatedWeblabTreatment)for(b=a.desiredWeblabTreatment.split(g.contextAwareSADelimiter),d=0;d<b.length;d++)if(b[d].trim()===a.allocatedWeblabTreatment.trim()){c=d;break}return c},excecuteClientSideTargetting:function(a){var b=h.parseJSONStringIfValid(a);if(h.isDefined(b)){if(h.isDefined(b.pages))return a=q.pageAdapter(),b=b.pages[a],h.isDefined(b)?this.startFilteringCriteriaExecutor(b):!0;d.incrementCounter(c.SA_CACHE_PREFIX+c.CLIENTSIDE_FILTER+c.INVALID);
return!1}return this.startFilteringCriteriaExecutor(a)},filterShoppingAidsArray:function(a){for(var c=a.length-1;0<=c;c--)this.isShoppingAidEligible(a[c])||this.removeIneligibleAid(a,c)},filterShoppingAids:function(a){var c=a.ShoppingAidsList;c&&(Array.isArray(c.MultiPageShoppingAids)&&this.filterShoppingAidsArray(c.MultiPageShoppingAids),Array.isArray(c.ToolTips)&&this.filterShoppingAidsArray(c.ToolTips),Array.isArray(c.BottomSheets)&&this.filterShoppingAidsArray(c.BottomSheets),Array.isArray(c.Sparkles)&&
this.filterShoppingAidsArray(c.Sparkles),Array.isArray(c.Audiospots)&&this.filterShoppingAidsArray(c.Audiospots),Array.isArray(c.Hotspots)&&this.filterShoppingAidsArray(c.Hotspots),Array.isArray(c.Highlighters)&&this.filterShoppingAidsArray(c.Highlighters));return a},startFilteringCriteriaExecutor:function(a){a=this.splitOrCondition(a);for(var c,b=0;b<a.length;b++)if(c=this.executeOrCondition(a[b].trim()))return!0;return!1},splitAndCondition:function(a){return a.split("(AND)")},splitOrCondition:function(a){return a.split("(OR)")},
executeOrCondition:function(a){if(-1!==a.indexOf("(AND)")){a=this.splitAndCondition(a);for(var c,b=0;b<a.length;b++)if(c=this.executeFilter(a[b].trim()),!c)return!1;return!0}return this.executeFilter(a)},executeFilter:function(c){c=c.split(" ");switch(c[0]){case "url":return f.execute(c);case "cookie":return e.execute(c);case "html":return a.execute(c);case "valueOf":return b.execute(c);case "valueOfAAPI":return!0;default:return!1}}}})})();(function(){n.when("A").register("CookieFilter",function(k){return{execute:function(b){var a=
this.getCookie(),e=b[2];switch(b[1]){case "contains":return-1!==a.indexOf(e);case "not_contains":return-1===a.indexOf(e);case "pattern":return 0<(a.match(e)||[]).length;default:return!1}},getCookie:function(){return document.cookie}}})})();(function(){n.when("A").register("HTMLFilter",function(k){return{execute:function(b){var a=b[1];switch(b[2]){case "visible":return 0<k.$(a+":visible").length;case "hidden":return 0<k.$(a+":hidden").length;case "disabled":return 0<k.$(a+":disabled").length;case "not_visible":return 0>=
k.$(a+":visible").length;case "not_hidden":return 0>=k.$(a+":hidden").length;case "not_disabled":return 0>=k.$(a+":disabled").length;default:return!1}}}})})();(function(){n.when("A").register("URLFilter",function(k){return{getWindowLocationHref:function(){return u.location.href},execute:function(b){var a=this.getWindowLocationHref(),e=b[2];switch(b[1]){case "contains":return-1!==a.indexOf(e);case "equals":return a.toLowerCase()===e.toLowerCase();case "not_equals":return a.toLowerCase()!==e.toLowerCase();
case "pattern":return 0<(a.match(e)||[]).length;default:return!1}}}})})();(function(){n.when("A").register("ValueOfFilter",function(k){return{execute:function(b){for(var a=b[2],e=k.$(b[1]).text().replace(/(\r\n|\n|\r)/gm,""),f="",d=3;d<b.length-1;d++)f=f+b[d]+" ";f+=b[b.length-1];switch(a){case "greater":return Number(e.replace(/(,)/gm,""))>Number(f);case "less":return Number(e.replace(/(,)/gm,""))>Number(f);case "equals":return e===f;case "not_equals":return e!==f;case "contains":return-1!==e.indexOf(f);
case "not_contains":return-1===e.indexOf(f);case "pattern":return 0<(e.match(f)||[]).length;default:return!1}}}})})();(function(){n.when("A","QTipsMetrics").register("NestedShoppingAidHelper",function(k,b){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:null};if(u&&u.CustomEvent)var d=new u.CustomEvent(a,{detail:b.detail});else u&&u.initCustomEvent&&(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,b.bubbles,b.cancelable,b.detail));return d}return{dispatchShoppingAidEvent:function(e){(e=
a("SA:InvokeOnDemandSA",{detail:e}))?(document.dispatchEvent(e),b.incrementCounter("nestedShoppingAidHelper:ShoppingAidData:invoked")):b.incrementCounter("nestedShoppingAidHelper:CustomEvent_not_supported")},dispatchDismissShoppingAidEvent:function(e){(e=a("SA:OnDemandDismissSA",{detail:e}))?(document.dispatchEvent(e),b.incrementCounter("nestedShoppingAidHelper:ShoppingAidData:dismissed")):b.incrementCounter("nestedShoppingAidHelper:CustomEvent_not_supported")}}})})();(function(){n.when("A","jQuery",
"SAAudiospotConstants","AnchorBasedSAUtils","QTipsMetrics","AudioMetrics").register("AudioStateManager",function(k,b,a,e,f,d){var c=a.metrics.PREFIX,l={playIconId:a.cssConstants.playIconId,pauseIconId:a.cssConstants.pauseIconId,playSVG:a.cssConstants.playSVG,progressBarId:a.cssConstants.progressBarId,fillerCircleId:a.cssConstants.fillerCircleId,circumference:"",elementIdStore:[],cacheElementsid:function(){this.elementIdStore.playIcon=b(this.playIconId)[0];this.elementIdStore.pauseIcon=b(this.pauseIconId)[0];
this.elementIdStore.playSVG=b(this.playSVG)[0];this.elementIdStore.progressBar=b(this.progressBarId);this.elementIdStore.fillerCircle=b(this.fillerCircleId)},_transposePlayIcon:function(){b(this.elementIdStore.playIcon).show();b(this.elementIdStore.pauseIcon).hide();b(this.elementIdStore.fillerCircle)[0].style.fill="#0B8699";b(this.elementIdStore.fillerCircle)[0].r.baseVal.value=16},_transposePauseIcon:function(){b(this.elementIdStore.playIcon).hide();b(this.elementIdStore.pauseIcon).show();b(this.elementIdStore.fillerCircle)[0].style.fill=
"#fff";b(this.elementIdStore.fillerCircle)[0].r.baseVal.value=12},_modifyPlayStateCss:function(){b(this.elementIdStore.playSVG).show()},updateVisualTimer:function(a){var c=b(this.elementIdStore.progressBar)[0],d=this.circumference;a=(1-a)*d;c.style.setProperty("--initialStroke",d);c.style.strokeDashoffset=a},_resetTimer:function(){b(this.elementIdStore.progressBar)[0].style.strokeDashoffset=this.circumference},setCircumference:function(a){a=b(this.elementIdStore.progressBar)[0];this.circumference=
2*Math.PI*a.r.baseVal.value}},g={initialState:a.audioStates.INITIAL_STATE,playState:a.audioStates.PLAY_STATE,pauseState:a.audioStates.PAUSE_STATE,completeState:a.audioStates.COMPLETION_STATE,identifier:"",replayed:!1,configureAudio:function(a){g.audio=new Audio;g.audio.src=a.get("audioSource");this.identifier=a.get("identifier");this.setState(this.initialState);this._addAudioEventListeners();d._addMetricEventListeners(g.audio,this.identifier)},_updateAnimation:function(){switch(g.state){case this.playState:this._togglePlay();
break;case this.pauseState:this._togglePause();break;case this.completeState:l._resetTimer(),this._togglePause()}},_togglePlay:function(){g.audio.play();l._transposePauseIcon();l._modifyPlayStateCss();this.replayed?f.incrementCounter(c+a.metrics.REPLAY,1,this.identifier):f.incrementCounter(c+a.metrics.PLAY,1,this.identifier)},_togglePause:function(){g.audio.pause();var b=g.audio.currentTime;g.audio.currentTime=0;l._transposePlayIcon();f.incrementCounter(c+a.metrics.PAUSE,b,this.identifier)},_addAudioEventListeners:function(){g.audio.addEventListener("ended",
function(){g.setState(g.completeState);g.replayed=!0;f.incrementCounter(c+a.metrics.END,1,g.identifier)});g.audio.addEventListener("timeupdate",k.throttle(function(){g.getCurrentState()!==g.completeState&&l.updateVisualTimer(g.audio.currentTime/g.audio.duration)},500))},setState:function(a){a&&(g.state=a,this._updateAnimation())},getCurrentState:function(){return g.state},cacheElementData:function(){l.cacheElementsid();l.setCircumference()}};return g})})();(function(){n.register("SAConfig",function(){return{cookies:{language:"lc-acbin"},
defaultLoP:"en_IN",intervalBetweenSuccessiveTips:0}})})();(function(){n.register("SAEndPointsConfig",function(){return{fetchShoppingAidsEndPoint:"/shoppingaids/fetchshoppingaids",logImpressionEndPoint:"/shoppingaids/logimpression"}})})();(function(){n.when("A","jQuery","ShoppingAidsGenericUtils","QTipsMetrics","ShoppingAidsFilters","ContextAwareSubstitutor").register("AnchorBasedSAUtils",function(k,b,a,e,f,d){return{metricsPrefix:"SA_AnchorBasedSAUtils_",aPage:"#a-page",processAnchor:function(a,d){d=
a.split(d);Array.isArray(d)||(d=[d]);Array.prototype.find||(Array.prototype.find=function(a,c){var b=this.length,d;for(d=0;d<b;d+=1)if(a.call(c,this[d],d,this))return this[d];return w});return d.find(function(a,c,d){return b(a).length})||a},getIndexByAnchor:function(a,b){Array.prototype.findIndex||(Array.prototype.findIndex=function(a,c){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!==typeof a)throw new TypeError("callback must be a function");
for(var b=Object(this),d=b.length,e,g=0;g<d;g++)if(e=b[g],a.call(c,e,g,b))return g;return-1});return a.findIndex(function(a,c,d){return b+""===Object.keys(d[c])[0]},b)},getAUIScrollPageValue:function(){if(0<b(this.aPage).length){var c=parseInt(b(this.aPage).css("top"));return a.isDefined(c)?c:0}return 0},getIndexByIdentifier:function(a,b){Array.prototype.findIndex||(Array.prototype.findIndex=function(a,c){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");
if("function"!==typeof a)throw new TypeError("callback must be a function");for(var b=Object(this),d=b.length,e,g=0;g<d;g++)if(e=b[g],a.call(c,e,g,b))return g;return-1});return a.findIndex(function(a,c,d){return b+""===d[c].id},b)},isElementPresent:function(c){return b(c).length&&0<b(c).length&&a.isDefined(b(c).offset())&&b(c).is(":visible")},isElementVisible:function(c){var d=u.scrollY||u.pageYOffset,e=document.documentElement.scrollTop||document.body.scrollTop;d=a.isDefined(d)?d:e;e=d+(u.innerHeight||
b(u).height());var f=b(c);f=a.isDefined(f)?f.offset():w;return a.isDefined(f)&&(f=f.top,b(c+":visible")[0]&&d<=f&&f<e)?!0:!1},isShoppingAidOverPopoverVisible:function(a,b){return this.isElementVisible(a)&&this.isElementVisible(b)?!0:!1},setDependentElement:function(a){var c=a.get("popoverAnchor");c&&(c=c.split("::"),c[1]&&"disable"===c[1]&&a.set({dependentElementAnchor:c[1]}))},_isElementDisabled:function(a){return b(a+":disabled")[0]?!0:!1},isDependentCheckSatisfied:function(a){return(a=a.get("dependentElementAnchor"))?
this._isElementDisabled(a):!0},isElementOrParentFixed:function(a){var c=!1,d=b(a);d.add(d.parents()).each(function(){"fixed"===b(this).css("position")&&(c=!0,e.incrementCounter(this.metricsPrefix+"elementOrParentFixed_"+a))});return c},onDemandContextAwareSubstitution:function(c,b){c=k.parseJSON(c.toJson());var e=f.getContextTargetingIndex(c);if(d.substitute(c,e,b))return a.convertModel(c)}}})})();(function(){n.when("A","jQuery","QTipsMetrics","QTipLibrary","SAMetricConstants","PageResolver","ShoppingAidsCacheData",
"LocalStorageInterface","SASupportedMarketplaceConfig").register("ShoppingAidsGenericUtils",function(k,b,a,e,f,d,c,l,g){var h;return{isDefined:function(a){return null!==a&&a!==w},isObjectEmpty:function(a){return k.objectIsEmpty(a)},_getUserAgent:function(){return u.navigator.userAgent.toLowerCase()},_getCookieList:function(){return document.cookie?document.cookie.split(";"):[]},platformCheck:function(){var c="Unsupported";this.isMobileDevice()&&(this.isAndroidDevice()?c=this.isMShop()?"Android":"mweb_Android":
this.isIOSDevice()&&(c=this.isMShop()?"iPhone":"mweb_iPhone"));a.incrementCounter("SA_Platform_"+c);return c},isAndroidDevice:function(){return!!k.capabilities&&k.capabilities.android},isIOSDevice:function(){return!!k.capabilities&&k.capabilities.ios},isMShop:function(){return!!k.capabilities&&k.capabilities.isAmazonApp},isMobileDevice:function(){return!!k.capabilities&&k.capabilities.mobile},hasNoPopover:function(a,c,d){a=b(a);for(d=0;d<a.length;d++){var e=a[d].style,g=a[d].className;if(e&&e.display&&
"none"!==e.display&&-1===g.indexOf("a-popover-secondary"))return!1}return!b(".a-sheet-content-container").is(":visible")&&!b(c).is(":visible")},weblabTriggerAndCheck:function(c,b){if("sparkle"===b){b=new e.Model;b.set({allocatedWeblabTreatment:c.getAllocatedWeblabTreatment()});b.set({weblabName:c.getWeblabName()});b.set({desiredWeblabTreatment:c.getDesiredWeblabTreatment()});var d=b}else d=c;if(d){b=d.get("allocatedWeblabTreatment");var g=d.get("weblabName");d=d.get("desiredWeblabTreatment");return g&&
b&&d?(u.ue.trigger&&(u.ue.trigger(g,b),a.incrementCounter(f.SHOPPINGAIDS_WEBLAB_TRIGGER+g+"_"+b)),b===d&&!c.get("weblabTriggerOnlyFlag")):!0}return!1},logClientSideWeblabMetricsForSAList:function(c,b,d){k.each(c,function(c,e){k.each(c,function(c,e){c.allocatedWeblabTreatment&&c.weblabName&&c.desiredWeblabTreatment&&(a.incrementCounter(b+c.weblabName+"_"+c.allocatedWeblabTreatment),d&&a.incrementCounter(f.SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL_BACKEND_CALL+c.weblabName+"_"+c.allocatedWeblabTreatment))})})},
logClientSideWeblabMetrics:function(c,b){if(c){var d=c.get("allocatedWeblabTreatment"),e=c.get("weblabName");c=c.get("desiredWeblabTreatment");e&&d&&c&&a.incrementCounter(b+e+"_"+d)}},getCookie:function(a){for(var c=this._getCookieList(),b=0;b<c.length;b++){var d=c[b].trim().split("\x3d"),e=d[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(a===e)return d.slice(1).join("\x3d").replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},getFromLocalStorage:function(a){if(l.isLocalStorageExposed())return localStorage.getItem(a)},
setInLocalStorage:function(a,c){if(l.isLocalStorageExposed())try{localStorage.setItem(a,c)}catch(m){}},removeFromLocalStorage:function(a){if(l.isLocalStorageExposed())return localStorage.removeItem(a)},removeFromLocalStorageIfPresent:function(a){if(l.isLocalStorageExposed())return localStorage.getItem(a)?(localStorage.removeItem(a),1):0},getWindowLocationPath:function(){return u.location.pathname},getWindowLocationQueryString:function(){return u.location.search},isSADebugRequest:function(){return k.contains(d.getWindowLocationHref(),
"isSADebug")&&"1"===this.getQueryParameter("isSADebug")},isMarketplaceRTLEnabled:function(){return"rtl"===document.dir},isShoppingAidForWeblabTesting:function(a){return a&&-1!==a.indexOf("Weblab_Test")},getQueryParameter:function(a){this.isDefined(h)||(h=this.getQueryParameterMap());return h[a]?h[a]:""},getQueryParameterMap:function(){for(var a={},c=(d.getWindowLocationHref().split("?")[1]||"").split("\x26"),b=0;b<c.length;b++){var e=c[b].split("\x3d"),g=decodeURIComponent(e[0]);e=decodeURIComponent(e[1]);
g&&e&&(a[g]=e)}return a},getSAListTypeFromShoppingAidsType:function(a){return{tool_tip:"ToolTips",bottom_sheet:"BottomSheets",sparkle:"Sparkles",multiPageShoppingAids:"MultiPageShoppingAids"}[a]},isNonEmptyArray:function(a){return a&&Array.isArray(a)&&a.length},addStyleToHead:function(a){var c=document.createElement("style");c.innerHTML=a;document.head.appendChild(c)},defaultJSONIfUndefined:function(a,c){return a||c},parseJSONStringIfValid:function(a){try{var c=k.parseJSON(a);if(c&&"object"===typeof c)return c}catch(m){}return null},
getAsin:function(){var a=(a=u.location.href.match(/\/(?:dp|gp\/product|gp\/aw\/d|gp\/mobile\/udp)\/([a-zA-Z0-9]{10})(?:\/|\?|#|$)/))?a[1]:void 0;return"undefined"!==typeof a?a:"undefined"!==typeof u.ue_pti?u.ue_pti:""},getMarketplaceID:function(){return u.ue_mid},isSupportedMarketplace:function(){return this.getMarketplaceName()?!0:!1},getMarketplaceName:function(){var a=this.getMarketplaceID();return g.supportedMarketplace[a]},minutesBetween:function(a,c){return Math.round(Math.abs(a-c)/6E4)},isMutationObserverSupported:function(){return u&&
u.MutationObserver},isInRange:function(a,c,b){return a>=c&&a<=b},isValidCampaignAvailable:function(a){for(var c in a)if(!this.isObjectEmpty(a[c].data))return!0;return!1},shouldBackOff:function(a){return 0<c.getTTLExpFactorForPageType(a)&&c.cacheExpiryTimeForPage(a)>=Date.now()?!0:!1},dispatchMASHEvent:function(a,c,b){this.isDefined(a)&&this.isDefined(c)&&this.isDefined(b)&&n.when("mash").execute(function(d){d.dispatchEvent({type:"sa_".concat(a.toString(),".",c.toString()),detail:b})})},getAbsoluteHeight:function(a){a=
"string"===typeof a?document.querySelector(a):a;var c=u.getComputedStyle(a);c=parseFloat(c.marginTop)+parseFloat(c.marginBottom);return Math.ceil(a.offsetHeight+c)},convertModel:function(a){return a=new e.Model(a)},detachTrigger:function(a,c){this.isDefined(a)&&k.off(a,c)}}})})();(function(){var k;n.when("page-detector-current-page").execute(function(b){k=b});n.when("A","jQuery","QTipsMetrics","SAPageMap").register("PageResolver",function(b,a,e,f){return{urlPageTypeMap:f.urlPageTypeMap,pageMap:f.windowPageTypeMap,
subPageTypeMap:f.subPageTypeMap,umbrellaPageTypes:f.umbrellaPageTypes,getWindowLocationHref:function(){return u.location.href},pageAdapter:function(){var a=u.ue_pty;if(a&&(a=a.toLowerCase(),this.pageMap[a])){var c=this.pageMap[a];e.incrementCounter("qtipsWindowUePtyUsed")}c=this.determineSubPageType(c);if(!c){a=this.getWindowLocationHref();for(var b in this.urlPageTypeMap)if(this.urlPageTypeMap.hasOwnProperty(b)&&a.match(new RegExp(b,"i")))return e.incrementCounter("qtipsURLRegexUsed"),this.urlPageTypeMap[b]}return c},
subPageTypeAdapter:function(a){var c;if(a=this.subPageTypeFactory(a))a=a.toLowerCase(),this.subPageTypeMap[a]&&(c=this.subPageTypeMap[a]);return c},subPageTypeFactory:function(a){if("checkoutPipeline"===a)return e.incrementCounter("qtips-checkoutPageDetectorUsed"),k?k.getCurrentPage():null;e.incrementCounter("qtips-WindowUeSPtyUsed");return u.ue_spty},isUmbrellaPageTypes:function(a){return a?this.umbrellaPageTypes[a]?!0:!1:!1},determineSubPageType:function(a){return this.isUmbrellaPageTypes(a)?this.subPageTypeAdapter(a):
a}}})})();(function(){n.when("A").register("SAPageMap",function(k){return{windowPageTypeMap:{"gateway-phone-web":"gateway","gateway-phone-apps":"gateway","exports-gateway-phone-web":"gateway","exports-gateway-phone-apps":"gateway",detailaw:"detailpage",detailwebview:"detailpage",searchaw:"search",checkoutthankyouaw:"thankYou",checkoutthankyouwebview:"thankYou",amazonmoneyamazonapp:"money",shoppingcartaw:"cart",shoppingcartwebview:"cart",amazonmoneymobile:"pay",inprepaidrecharge:"recharge",inbillpayments:"billPayment",
flights:"travel",bustickets:"travel",movies:"entertainment",goldboxaw:"deals",mobiledeals:"deals",spark:"foundIt",landingaw:"browse",highvelocityevent:"event",productlifecyclesupport:"productSupport",freshmerchandisedcontentmobile:"fmc",checkoutpipeline:"checkoutPipeline",livedestination:"live",primelandingpagehorizonte:"prime",searchlessorderpharmacy:"pharmacyPrescriptionUpload",rxmanagementpage:"pharmacyPrescriptionManagement",amazonstores:"amazonStores",gphelp:"help"},urlPageTypeMap:{"/(d|product|dp|reader|detail|ASIN|udp)(/|\\?.\\*ASIN\x3d)([A-Z0-9]{8,13})[$\\/\x26\\?]?":"detailpage",
"/(search|s)/":"search","/events":"event","/live/":"live","/b\\S+node":"browse","(.amazon.\\[^\\/\\?]+$)|(gp/(homepage.html|aw(?!/(gb|c|d|s|search)))|(exec/obidos/subst/home/home.html)|/{2}.*?/$|/{2}[^/]*?/(ref|sessionID|\\?|#))":"gateway","/gp/buy/thankyou/":"thankYou","/gp/buy/addressselect/handlers/display":"checkoutSelectAddress","/gp/buy/addressselect/handlers/edit-address":"checkoutEditAddress","/gp/buy/addressselect/handlers/new":"checkoutNewAddress","/gp/buy/shipoptionselect/handlers/display":"checkoutShipOption",
"/gp/buy/payselect/handlers/display":"checkoutPayment","/gp/buy/spc/handlers/display":"checkoutConfirmOrder","/gp/buy/billingaddressselect/handlers/display":"checkoutBilling","/gp/buy/pharmacy/handlers/display":"checkoutPharma","/gp/(sva(?!(\\?|/dashboard|/$))\\S+)|(payment/statement)":"pay","(/gp/(aw/c|(cart/view)))":"cart","/gp/(sva(/dashboard|\\?|/$|$))|(/amazonpay/home)":"money","/hfc/mobileRecharge":"recharge","/hfc/bill/lpg":"lpg","/hfc/dth":"dth","/hfc/bill/gas":"gas","/hfc/bill/subscriptions":"subscriptions",
"/hfc/bill/cable_tv":"cableTV","/hfc/bill/water":"water","/hfc/bill/municipal_tax":"municipalTax","/hfc/bill/electricity":"electricity","/hfc/bill/landline":"landline","/hfc/bill/education_fee":"educationFee","/hfc/bill/mobile_postpaid":"postpaid","/hfc/bill/credit-cards":"creditCard","/hfc/bill/google_play_recharge":"googlePlay","/hfc/addMoney":"addMoney","/hfc/fastag":"fastag","/bus-tickets":"bus","/flights":"flight","/train":"train","/(movie-tickets)":"entertainment","/gp/(aw/gb)|(mobile/deals)":"deals",
"/(your-account/order-history|your-orders|progress-tracker/package)":"yourorder","/finds":"foundIt","/spr/returns/confirmation":"onlineReturnsConfirmation","/spr/returns/contract":"onlineReturnsContract","/spr/returns":"onlineReturns","/ps/product-support":"productSupport","/(fmc|alm/(storefront|category))":"fmc","/amazonprime":"prime","/prescriptions/quickupload":"pharmacyPrescriptionUpload","/prescriptionmanagement/viewAllRequests":"pharmacyPrescriptionManagement","/stores/page":"amazonStores",
"/gp/help":"help"},subPageTypeMap:{dth:"dth",lpg:"lpg",gas:"gas",subscriptions:"subscriptions",cable_tv:"cableTV",water:"water",municipal_tax:"municipalTax",electricity:"electricity",mobile_postpaid:"postpaid",credit_card_landingpage:"creditCard",landline:"landline",education_fee:"educationFee",google_play_recharge:"googlePlay",fastag:"fastag",add_money:"addMoney",shipaddressselect:"checkoutSelectAddress",editaddress:"checkoutEditAddress",newaddress:"checkoutNewAddress",shipoptionselect:"checkoutShipOption",
payselect:"checkoutPayment",spc:"checkoutConfirmOrder",billingaddressselect:"checkoutBilling",pip:"checkoutInterstitial",rxselect:"checkoutPharma"},umbrellaPageTypes:{billPayment:!0,checkoutPipeline:!0}}})})();(function(){n.when("A","QTipsMetrics","SACommonConfig","SAFeature","SACacheConfig").register("ShoppingAidsCacheData",function(k,b,a,e,f){var d={};return{setSACacheData:function(a){null!==a&&(d=a)},emptySACacheData:function(){d={version:a.cacheVersion,TTL:6E4*a.cacheTTLInMinutes+Date.now(),sessionDayImpressionCount:{}}},
getSACacheData:function(a){return d},getVersion:function(){return d.version},setVersion:function(a){d.version=a},getTTL:function(){return d.TTL},setTTL:function(a){d.TTL=a},getSessionDayImpressionCount:function(){return d.sessionDayImpressionCount},setSessionDayImpressionCount:function(a){d.sessionDayImpressionCount=a},getSessionDayImpressionCountForSAType:function(a){try{return d.sessionDayImpressionCount[this._getDateString()][a]}catch(l){return b.incrementCounter("SA_Cache_Error_1"),0}},setSessionDayImpressionCountForSAType:function(a,
e){try{d.sessionDayImpressionCount&&d.sessionDayImpressionCount[this._getDateString()]||(d.sessionDayImpressionCount={},d.sessionDayImpressionCount[this._getDateString()]={}),d.sessionDayImpressionCount[this._getDateString()][a]=e}catch(g){b.incrementCounter("SA_Cache_Error_1")}},incrementSessionDayImpressionCountForSAType:function(a){var c=this.getSessionDayImpressionCountForSAType(a);c===w&&(c=0);this.setSessionDayImpressionCountForSAType(a,c+1)},getDailyImpressionCountForPageType:function(a){try{return d[a].impressionCount[this._getDateString()]}catch(l){return b.incrementCounter("SA_Cache_Error_1"),
0}},setDailyImpressionCountForPageType:function(a,e){try{d[a]||(d[a]={}),d[a].impressionCount=e}catch(g){b.incrementCounter("SA_Cache_Error_1")}},incrementDailyImpressionCountForPageType_SAType:function(a,b){var c=this.getDailyImpressionCountForPageType_SAType(a,b);c===w&&(c=0);this.setDailyImpressionCountForPageType_SAType(a,b,c+1)},getDailyImpressionCountForPageType_SAType:function(a,d){try{return this.getDailyImpressionCountForPageType(a)[d]}catch(g){return b.incrementCounter("SA_Cache_Error_1"),
0}},setDailyImpressionCountForPageType_SAType:function(a,e,g){try{d[a]||(d[a]={}),d[a].impressionCount&&d[a].impressionCount[this._getDateString()]||(d[a].impressionCount={},d[a].impressionCount[this._getDateString()]={}),d[a].impressionCount[this._getDateString()][e]=g}catch(h){b.incrementCounter("SA_Cache_Error_1")}},getTTLForPageType:function(a){try{return d[a].TTL}catch(l){return b.incrementCounter("SA_Cache_Error_1"),0}},getTTLExpFactorForPageType:function(a){try{return d[a].TTL.expFactor}catch(l){return b.incrementCounter("SA_Cache_Error_1"),
0}},cacheExpiryTimeForPage:function(a){try{return d[a].TTL.validTill}catch(l){return b.incrementCounter("SA_Cache_Error_1"),0}},setTTLForPageType:function(a,e){try{d[a]||(d[a]={}),d[a].TTL=e}catch(g){b.incrementCounter("SA_Cache_Error_1")}},getSAListForPageType:function(a){try{return d[a].shoppingAidsList}catch(l){return b.incrementCounter("SA_Cache_Error_1"),{}}},setSAListForPageType:function(a,e){try{d[a]||(d[a]={}),d[a].shoppingAidsList=e}catch(g){b.incrementCounter("SA_Cache_Error_1")}},removeSAListForPageType:function(a){try{delete d[a].shoppingAidsList}catch(l){b.incrementCounter("SA_Cache_Error_1")}},
getSAPriorityListForPageType_SAType:function(a,e){try{return d[a].shoppingAidsList[e].priorityList}catch(g){return b.incrementCounter("SA_Cache_Error_1"),[]}},getCaheHitFrequencyForPageType:function(a){try{return d[a].count?d[a].count:0}catch(l){return b.incrementCounter("SA_Cache_Error_1"),0}},setCaheHitFrequencyForPageType:function(a,e){try{d&&d[a]&&(d[a].count=e)}catch(g){b.incrementCounter("SA_Cache_Error_1")}},setSAPriorityListForPageType_SAType:function(a,e,g){try{d[a]||(d[a]={}),d[a].shoppingAidsList||
(d[a].shoppingAidsList={}),d[a].shoppingAidsList[e]||(d[a].shoppingAidsList[e]={data:{},priorityList:[]}),d[a].shoppingAidsList[e].priorityList=g}catch(h){b.incrementCounter("SA_Cache_Error_1")}},removeShoppingAidsFromCache:function(a,e,g,f){try{f?this.removeNestedShoppingAidsFromCache(a,e,g):this._deleteShoppingAidsFromCache(a,e,g,d)}catch(q){b.incrementCounter("SA_Cache_Error_1")}},removeNestedShoppingAidsFromCache:function(a,e,g){try{var c=this.getShoppingAidsDataForPageType_SAType(a,e,g),f=c.parentIdentity.identifier,
l=c.parentIdentity.pageType,m=c.parentIdentity.SAType,r=this.getShoppingAidsDataForPageType_SAType(l,m,f).nestedSAPriorityList;k.each(r,function(a){delete d[a.pageType].shoppingAidsList[a.SAType].data[a.identifier]});this._deleteShoppingAidsFromCache(l,m,f,d)}catch(p){b.incrementCounter("SA_Cache_Error_1")}},_deleteShoppingAidsFromCache:function(a,b,d,e){var c=this.getSAPriorityListForPageType_SAType(a,b);c.splice(c.indexOf(d),1);delete e[a].shoppingAidsList[b].data[d]},getShoppingAidsDataForPageType_SAType:function(a,
e,g){try{return d[a].shoppingAidsList[e].data[g]}catch(h){return b.incrementCounter("SA_Cache_Error_1"),0}},setShoppingAidsDataForPageType_SAType:function(a,e,g,f){try{d[a]||(d[a]={}),d[a].shoppingAidsList||(d[a].shoppingAidsList={}),d[a].shoppingAidsList[e]||(d[a].shoppingAidsList[e]={data:{},priorityList:[]}),d[a].shoppingAidsList[e].data[g]=f}catch(q){b.incrementCounter("SA_Cache_Error_1")}},_getDateString:function(){var a=new Date;return""+a.getUTCFullYear()+"-"+a.getUTCMonth()+"-"+a.getUTCDate()},
getSAContextObject:function(){try{return d.context}catch(c){return b.incrementCounter("SA_Cache_Error_1"),{}}},setSAContextObject:function(a){try{d.context=a}catch(l){b.incrementCounter("SA_Cache_Error_1")}},getSAContextCookies:function(){try{return d.context.cookies}catch(c){return b.incrementCounter("SA_Cache_Error_1"),{}}},setSAContextCookies:function(a){try{d.context||(d.context={}),d.context.cookies=a}catch(l){b.incrementCounter("SA_Cache_Error_1")}},getBackoffConfig:function(){try{return d.BackoffConfig}catch(c){return b.incrementCounter("SA_Cache_Error_1"),
{}}},setBackoffConfig:function(a){try{d.BackoffConfig=a}catch(l){b.incrementCounter("SA_Cache_Error_1")}},removeValidTillForPageType:function(a){if(a)try{delete d[a].TTL.validTill}catch(l){b.incrementCounter("SA_Cache_Error_1")}},setPrefetchSourcePage:function(a,e){if(a)try{d[a].prefetchSourcePage=e}catch(g){b.incrementCounter("SA_Cache_Error_1")}},removePrefetchSourcePage:function(a){if(a)try{delete d[a].prefetchSourcePage}catch(l){b.incrementCounter("SA_Cache_Error_1")}},getPrefetchSourcePage:function(a){if(a)try{return d[a].prefetchSourcePage}catch(l){return b.incrementCounter("SA_Cache_Error_1"),
""}},isCachePrefetchedForPageType:function(a){try{return d[a].hasOwnProperty("prefetchSourcePage")}catch(l){return b.incrementCounter("SA_Cache_Error_1"),!1}}}})})();(function(){n.when("A","jQuery","QTipsMetrics","SAMetricConstants","LocalStorageInterface","SACommonConfig","ShoppingAidsCacheData","CacheValidator","ShoppingAidsGenericUtils","StatefulSADataStore","SAFeature","StatefulSAEligiblityHelper").register("CacheManager",function(k,b,a,e,f,d,c,l,g,h,q,t){var m=e.SA_CACHE_PREFIX;b={init:function(){if(l.isSACacheDataEmpty()){var a=
f.getFromLocalStorage(d.saCacheKey);this.isObjectEmpty(a)?c.emptySACacheData():c.setSACacheData(a)}},invalidateCacheForPage:function(b){c.removeSAListForPageType(b);c.removeValidTillForPageType(b);c.isCachePrefetchedForPageType(b)&&c.removePrefetchSourcePage(b);this.storeEntireCache();a.incrementCounter(m+e.SA_CACHE_INVALIDATE+b)},isObjectEmpty:function(a){return k.objectIsEmpty(a)},updateCacheAfterLogImpression:function(b){if(b){var c=b.shoppingAidsType,d=!1;k.contains(c,":childSA")&&(c=c.split(":childSA",
1),d=!0);(c=g.getSAListTypeFromShoppingAidsType(c))?(d||(this.updateSessionDayImpressionCount(c),this.updatePageTypeImpressionCount(b.pageType,c)),this.updateAidsData(b.pageType,c,b.identifier,d),this.storeEntireCache()):a.incrementCounter(m+e.SATYPE_UNDEFINED)}else a.incrementCounter(m+e.IMPRESSIONDATA_UNDEFINED)},updateSessionDayImpressionCount:function(a){c.incrementSessionDayImpressionCountForSAType(a)},updatePageTypeImpressionCount:function(a,b){c.incrementDailyImpressionCountForPageType_SAType(a,
b)},updateAidsData:function(b,f,h,l){try{var k=c.getShoppingAidsDataForPageType_SAType(b,f,h);k.lastImpressionTime=Date.now();k.maxDisplayCount||(k.maxDisplayCount=1);g.isDefined(k.impressionInterval)||(k.impressionInterval=d.defaultImpressionIntervalInHours);--k.maxDisplayCount;var q=k.lastImpressionTime+36E5*k.impressionInterval;if(q>c.cacheExpiryTimeForPage(b)||q>c.getTTL()||0>=k.maxDisplayCount)k.allocatedWeblabTreatment||k.weblabName||k.desiredWeblabTreatment?k.weblabTriggerOnlyFlag=!0:c.removeShoppingAidsFromCache(b,
f,h,l);a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_1);a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_1_+h);a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_1_+f);a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_1_+b)}catch(E){a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_0),a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_0_+h),a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_0_+f),a.incrementCounter(m+e.LOG_IMPRESSION+e.STATUS_0_+b)}},getShoppingAidsListForPageFromCache:function(b){var g=this,f={},h=
d.saListParadigms;h&&b?(k.each(h,function(d){var h=[],l=c.getSAPriorityListForPageType_SAType(b,d);l&&k.each(l,function(g){if("string"===typeof g||g instanceof String){var f=c.getShoppingAidsDataForPageType_SAType(b,d,g);f&&(h.push(f),a.incrementCounter(m+e.GET_SHOPPING_AIDS+e.STATUS_1_+g))}},g);f[d]=h},g),a.incrementCounter(m+e.GET_SHOPPING_AIDS+e.STATUS_1_+b)):a.incrementCounter(m+e.GET_SHOPPING_AIDS+e.STATUS_0_+b?b:"unknown");return f},updateShoppingAidsListForPageInCache:function(b,d){b&&d&&!this.isObjectEmpty(d)?
(c.setSAListForPageType(b,d),d=this.constructTTLObjectForPage(b,d),c.setTTLForPageType(b,d),this.storeEntireCache(),a.incrementCounter(m+e.UPDATE_SHOPPING_AIDS+e.STATUS_1),a.incrementCounter(m+e.UPDATE_SHOPPING_AIDS+e.STATUS_1_+b)):(a.incrementCounter(m+e.UPDATE_SHOPPING_AIDS+e.STATUS_0),a.incrementCounter(m+e.UPDATE_SHOPPING_AIDS+e.STATUS_0_+b?b:"unknown"))},updateContextForShoppingAidsCache:function(b){if(!b||this.isObjectEmpty(b.cookies))return a.incrementCounter(m+e.UPDATE_CONTEXT+e.STATUS_0),
!1;var g={};k.each(b.cookies,function(a,b){a&&(b=l.getValueForCookie(a),g[a]=b?b:d.defaultCookieValue)},this);c.setSAContextCookies(g);a.incrementCounter(m+e.UPDATE_CONTEXT+e.STATUS_1)},isShoppingAidsAvailableForPage:function(b,d){if(!b)return!1;d=g.isDefined(d)?d:!1;var f=!l.isSACacheForCurrentContext();f&&h.setInProgressSAs([]);return l.isSACacheDataInvalid(b,d)||f?(a.incrementCounter(m+e.CONTEXT_INVALID),c.emptySACacheData(),!1):l.isCacheExpiredForPage(b)?(a.incrementCounter(m+e.CACHE_EXPIRED+
"_"+b),this.invalidateCacheForPage(b),!1):l.isCacheAvailableForPage(b)},storeEntireCache:function(){try{f.setInLocalStorage(d.saCacheKey,JSON.stringify(c.getSACacheData()))}catch(r){a.incrementCounter(m+e.CACHE_STORAGE+e.STATUS_0)}},getSessionDayImpressionsForSAType:function(a){a=c.getSessionDayImpressionCountForSAType(a);return isNaN(a)?0:a},getPageImpressionsForSAType:function(a,b){a=c.getDailyImpressionCountForPageType_SAType(a,b);return isNaN(a)?0:a},getShoppingAidsDataForPageType_SAType:function(a,
b,d){return c.getShoppingAidsDataForPageType_SAType(a,b,d)},cleanUpCache:function(){f.removeFromLocalStorage(d.saCacheKey)},updateSessionDayImpressionCountObjectInCache:function(a){this.isObjectEmpty(a)||c.setSessionDayImpressionCount(this._getDatedImpressionCountObject(a))},updatePageImpressionCountObjectInCache:function(a,b){this.isObjectEmpty(b)||c.setDailyImpressionCountForPageType(a,this._getDatedImpressionCountObject(b))},updateCacheHitFrequencyInCache:function(a,b){this.isObjectEmpty(a)||(c.setCaheHitFrequencyForPageType(a,
b),this.storeEntireCache())},getCacheHitFrequencyForPage:function(a){if(!this.isObjectEmpty(a))return c.getCaheHitFrequencyForPageType(a)},_getDatedImpressionCountObject:function(a){var b={};b[c._getDateString()]=a;return b},constructTTLObjectForPage:function(a,b){if(!q.backoff)return{expFactor:0,validTill:6E4*d.pageTTLInMinutes(a)+Date.now()};var e=!g.isObjectEmpty(t.getEligibleInProgressSA(a));e=g.isValidCampaignAvailable(b)||e;(b=c.getTTLForPageType(a))||(b={expFactor:0});e?(b.validTill=6E4*d.pageTTLInMinutes(a)+
Date.now(),b.expFactor=0):(a=6E4*d.defaultBackoffConfig.BackoffInterval*Math.pow(d.defaultBackoffConfig.BackoffFactor,b.expFactor),e=6E4*d.defaultBackoffConfig.MaximumBackoff,a<e?(a+=Date.now(),b.validTill=a,b.expFactor+=1):(e+=Date.now(),b.validTill=e));return b},setPrefetchSourcePage:function(a,b){c.setPrefetchSourcePage(a,b)},removePrefetchSourcePage:function(a){c.removePrefetchSourcePage(a)},logMetricsIfNetworkCallSaved:function(b){c.isCachePrefetchedForPageType(b)&&(a.incrementCounter(e.NETWORK_CALL_SAVED+
b+e.DELIMITER+c.getPrefetchSourcePage(b)),this.removePrefetchSourcePage(b))}};b.init();return b})})();(function(){n.when("A","jQuery","QTipsMetrics","CacheManager","SAEndPointsConfig","SAMetricConstants","ShoppingAidsGenericUtils").register("LogImpressionManager",function(k,b,a,e,f,d,c){var l=f.logImpressionEndPoint;return{optionals:w,logImpressionInDynamoDB:function(b){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+"_"+d.NETWORK_CALL_INITIATED);a.incrementCounter(d.SA_CACHE_PREFIX+c.platformCheck+
"_"+d.LOG_IMPRESSION+"_"+d.NETWORK_CALL_INITIATED);var e=this.buildParamMap(b);k.ajax(l,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E3,params:e,success:function(c){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+b.pageType+d.STATUS_1);b.successCallback&&"function"===typeof b.successCallback&&b.successCallback(c)},error:function(e,g){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+b.pageType+"_"+c.platformCheck+d.STATUS_0);"NotFound"===g&&a.incrementCounter(d.SA_CACHE_PREFIX+
d.LOG_IMPRESSION+b.pageType+d.STATUS_0+d.SA_UNKNOWN_ENDPOINT);b.errorCallback&&"function"===typeof b.errorCallback&&b.errorCallback(e)}})},handle:function(b,c,f,l,k){try{if(-1===b.indexOf("NO_GUARD")){var g=this.logImpressionDataBuilder(b,c,f,l,k);this.logImpressionInDynamoDB(g);e.updateCacheAfterLogImpression(g)}}catch(p){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+"_"+d.ERROR_CATCHED)}},logImpressionDataBuilder:function(a,b,d,e,f){var g={};g.schedulingType=b;g.shoppingAidsType=d;g.identifier=
a;g.pageType=e;c.isDefined(f)&&(g.userEvent=f.userEvent,g.successCallback=f.successCallback,g.errorCallback=f.errorCallback,g.contextAwareIndex=f.contextAwareIndex);return g},buildParamMap:function(a){var b={pageType:a.pageType,shoppingAidsType:a.shoppingAidsType,id:a.identifier,schedulingType:a.schedulingType};c.isDefined(a.userEvent)&&(b.userEvent=a.userEvent);c.isDefined(a.contextAwareIndex)&&(b.contextAwareIndex=a.contextAwareIndex);return b},buildOptionalParameter:function(){this.optionals={};
return this},withSuccessCallback:function(a){this.optionals.successCallback=a;return this},withErrorCallback:function(a){this.optionals.errorCallback=a;return this},withUserEvent:function(a){this.optionals.userEvent=a;return this},withContextAwareIndex:function(a){this.optionals.contextAwareIndex=a;return this},build:function(){return this.optionals}}})})();(function(){n.when("A","QTipsMetrics").register("LocalStorageInterface",function(k,b){return{sourceName:"ShoppingAidsMWebLibrary_",getFromLocalStorage:function(a){if(this.isLocalStorageExposed())try{return JSON.parse(localStorage.getItem(a))}catch(e){return b.incrementCounter(this.sourceName+
"localStorage_parse_0"),{}}},setInLocalStorage:function(a,e){if(this.isLocalStorageExposed())try{localStorage.setItem(a,e)}catch(f){b.incrementCounter(this.sourceName+"QuotaExceededError")}},removeFromLocalStorage:function(a){if(this.isLocalStorageExposed())return localStorage.removeItem(a)},isLocalStorageExposed:function(){try{if(u.localStorage)return 1}catch(a){return b.incrementCounter(this.sourceName+"LocalStorageNotExposed"),0}}}})})();(function(){n.when("A","SACommonConfig","ShoppingAidsCacheData",
"ShoppingAidsGenericUtils").register("CacheValidator",function(k,b,a,e){return{isSACacheDataInvalid:function(a,b){return this.isSACacheDataEmpty()||this.isSACacheDataVersionIncorrect(a,b)||this.isSACacheDataTTLExpired()},isCacheAvailableForPage:function(b){return!k.objectIsEmpty(a.getSAListForPageType(b))},isCacheExpiredForPage:function(b){return a.cacheExpiryTimeForPage(b)<Date.now()},isSACacheDataEmpty:function(){return!a.getSACacheData()||k.objectIsEmpty(a.getSACacheData())},isSACacheDataVersionIncorrect:function(e,
d){return d?0===a.getVersion()||a.getVersion()!==b.cacheVersionForPrefetch:0===a.getVersion()||a.getVersion()!==b.cacheVersion},isSACacheDataTTLExpired:function(){return a.getTTL()<Date.now()},isSACacheForCurrentContext:function(){var e=this,d=a.getSAContextCookies();if(k.objectIsEmpty(d))return!1;var c=!1;k.each(d,function(a,d){c||(d=e.getValueForCookie(d),a===b.defaultCookieValue?k.objectIsEmpty(d)||d===b.defaultCookieValue||(c=!0):d!==a&&(c=!0))},e);return!c},getValueForCookie:function(a){try{var b=
a.trim()+"\x3d";return this.getCookie().split(b)[1].split("; ")[0].trim()}catch(c){return""}},getCookie:function(){return document.cookie}}})})();(function(){n.register("SAMetricConstants",function(){return{SA_CACHE_PREFIX:"SAC_",STATUS_1:"_1",STATUS_0:"_0",STATUS_1_:"_1_",STATUS_0_:"_0_",START:"_st",INVALID:"_inv",NETWORK_CALL_INITIATED:"nci",SERVERD_FROM_CACHE:"sfc",SA_CACHE_VALID:"valid",SA_CACHE_INVALIDATE:"inv_",LOG_IMPRESSION:"log_impr",GET_SHOPPING_AIDS:"getSA",UPDATE_SHOPPING_AIDS:"updateSA",
CACHE_STORAGE:"store",UPDATE_CONTEXT:"updateCtxt",UPDATE_BACKOFF:"updateBkof",BACKOFF:"bkof",SA_FETCH_PREFIX:"SA_fetch_",SA_UNKNOWN_ENDPOINT:"unkown_ep",SA_TIMEOUT:"to",SATYPE_UNDEFINED:"undef",IMPRESSIONDATA_UNDEFINED:"no_impr",CACHE_UPDATE_ERROR:"cue",FETCH_RESPONSE:"fr",SA_PREPROCESSOR:"grf",DEADLINE_FILTER:"dlf",IMPRESSIONINTERVAL_FILTER:"inf",CLIENTSIDE_FILTER:"csf",SESSION_DAY_FILTER:"sdf",CONTEXT_INVALID:"civ",CACHE_EXPIRED:"cae",ERROR_CATCHED:"ec",TIME_TAKEN:"tt",SPARKLE_BOTTOM_PADDING_PREFIX:"SA_sp_bp_",
CORDOVA_SUCCESS:"cdv_1",CORDOVA_ERROR:"cdv_0",SHOPPINGAIDS_WEBLAB_TRIGGER:"SA_WL_Tr_",SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL:"SA_WL_AFC_",SHOPPINGAIDS_WEBLAB_AFTER_FILTERING:"SA_WL_AFL_",SHOPPINGAIDS_WEBLAB_IN_POST_QTIP_RENDER:"SA_WL_PQR_",SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL_BACKEND_CALL:"SA_WL_AFC_ABC",SA_CONTEXT_AWARE_SUBSTITUTION:"SA_CAS_",FAIL:"_fl",SPARKLE_DISPLAY_MASH_EVENT:"DISP_MASH",SPARKLE_CLOSE_MASH_EVENT:"CLOSE_MASH",SA_FETCH_RATE_LIMITING_PREFIX:"SA_FETCH_RL_",UI_GUARD_RAIL_FILTER:"uigrf",
PASS:"_ps",PAGE_LIST_EMPTY:"ple",NETWORK_CALL_SAVED:"ncs_",DELIMITER:":",SPARKLE_CTA:"cta",SPARKLE_CTA_DEPTH:"cta_depth",SPARKLE_CTA_DEPTH_PERCENTAGE:"cta_depth_percentage",SPARKLE_CTA_TIME:"cta_time",SPARKLE_CTA_SCROLLED:"cta_scrolled",SPARKLE_CTA_SCROLL_DIRECTION_CHANGE:"cta_scroll_dir_change",SPARKLE_CTA_ATF:"cta_atf",SPARKLE_CTA_MAX_SCROLL_DEPTH:"cta_max_depth",SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE:"cta_max_depth_percentage",SPARKLE_DISMISSED:"dismiss",SPARKLE_DISMISS_DEPTH:"dismiss_depth",
SPARKLE_DISMISS_DEPTH_PERCENTAGE:"dismiss_depth_percentage",SPARKLE_DISPLAY_DURATION:"display_time",SPARKLE_DISMISS_SCROLLED:"dismiss_scrolled",SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE:"dismiss_scroll_dir_change",SPARKLE_DISMISS_ATF:"dismiss_atf",SPARKLE_DISMISS_MAX_SCROLL_DEPTH:"dismiss_max_depth",SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE:"dismiss_max_depth_percentage",SPARKLE_DISPLAY_DEPTH:"display_depth",SPARKLE_DISPLAY_DEPTH_PERCENTAGE:"display_depth_percentage",SPARKLE_DISPLAY_ATF:"display_atf",
SPARKLE_DISPLAY_SCROLLED:"display_scrolled"}})})();(function(){n.when("SACacheConfig").register("SACommonConfig",function(k){return{saListParadigms:"ToolTips BottomSheets Sparkles Hotspots Audiospots MultiPageShoppingAids".split(" "),defaultImpressionIntervalInHours:24,defaultBackoffConfig:{BackoffInterval:60,MaximumBackoff:480,BackoffFactor:2},statefulSAStorageKey:"SA_StatefulSA",saCacheKey:"SA_Cache",cacheTTLInMinutes:1440,pageTTLInMinutes:function(b){var a=k.cacheTTL;return a&&a[b]?a[b]:0},cacheVersion:"1.0",
cacheVersionForPrefetch:"1.1",defaultCookieValue:"unknown",fatigueConfig:{pageLimits:{ToolTips:3,BottomSheets:3,Sparkles:3,Hotspots:3,Highlighters:3,Audiospots:2,MultiPageShoppingAids:1},sessionDayLimits:{ToolTips:8,BottomSheets:3,Sparkles:6,Hotspots:8,Highlighters:10,Audiospots:5,MultiPageShoppingAids:1}}}})})();(function(){n.register("SACacheConfig",function(){return{cacheTTL:{gateway:15,search:15,detailpage:0}}})})();(function(){n.when("A").register("SAFeature",function(k){return{clientSideCaching:!0,
backoff:!1,featureAttribution:!0}})})();(function(){n.when("A","DeadlineFilter","SessionDayFilter","ShoppingAidsFilters","ImpressionIntervalFilter","QTipsMetrics","SAMetricConstants","AuthPortalURISubstitute","SAFilteringHelper","ContextAwareSubstitutor","UIGuardRailFiltering","HighPrioritySAListProvider").register("SAPreProcessor",function(k,b,a,e,f,d,c,l,g,h,q,t){return{preProcessSAList:function(m,r){d.incrementCounter(c.SA_CACHE_PREFIX+c.SA_PREPROCESSOR+c.START);var p={};k.each(m,function(a,c){p[c]=
k.filter(a,function(a){var d=-1;return g.isClientSideWeblabTriggerOnlySA(a)||b.filter(a)&&f.filter(a)&&-1!==(d=e.getContextTargetingIndex(a))&&l.substitute(a)&&h.substitute(a,d,c)&&q.isUIGuardRailMet(a)})});p=a.filter(p);p=t.getHighPrioritySAList(p);m={};m.ShoppingAidsList=p;return m},isShoppingAidsListEmpty:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b]&&Array.isArray(a[b])&&0<a[b].length)return!1;return!0}}})})();(function(){n.when("A","QTipsMetrics","SAMetricConstants").register("DeadlineFilter",
function(k,b,a){return{filter:function(e){b.incrementCounter(a.SA_CACHE_PREFIX+a.DEADLINE_FILTER+a.START);e.deadline&&Date.now()>parseInt(e.deadline,10)?(b.incrementCounter(a.SA_CACHE_PREFIX+a.DEADLINE_FILTER+a.STATUS_0),e=!1):e=!0;return e}}})})();(function(){n.when("A","SACommonConfig","CacheManager","SAFilteringHelper","QTipsMetrics","SAMetricConstants").register("SessionDayFilter",function(k,b,a,e,f,d){return{filter:function(c){f.incrementCounter(d.SA_CACHE_PREFIX+d.SESSION_DAY_FILTER+d.START);
var l={},g=b.fatigueConfig.sessionDayLimits;k.each(c,function(b,c){var d=(g&&g[c]?g[c]:0)-a.getSessionDayImpressionsForSAType(c);l[c]=e.filterSAListWithQuotaRemaining(b,d)});return l}}})})();(function(){n.when("A","SACommonConfig","QTipsMetrics","SAMetricConstants","ShoppingAidsGenericUtils").register("ImpressionIntervalFilter",function(k,b,a,e,f){return{filter:function(d){a:{a.incrementCounter(e.SA_CACHE_PREFIX+e.IMPRESSIONINTERVAL_FILTER+e.START);f.isDefined(d.impressionInterval)||(d.impressionInterval=
b.defaultImpressionIntervalInHours);if(d.lastImpressionTime&&(d=d.lastImpressionTime+36E5*d.impressionInterval,Date.now()<d)){a.incrementCounter(e.SA_CACHE_PREFIX+e.IMPRESSIONINTERVAL_FILTER+e.STATUS_0);d=!1;break a}d=!0}return d}}})})();(function(){n.when("A").register("SAFilteringHelper",function(k){return{_isNonConditionalSA:function(b){return b&&!b.invokingEventElement&&!b.weblabName},filterSAListWithQuotaRemaining:function(b,a){var e=[];k.each(b,function(b){this._isNonConditionalSA(b)?0<a&&(e.push(b),
a--):e.push(b)}.bind(this));return e},isClientSideWeblabSA:function(b){return b&&b.weblabName&&b.desiredWeblabTreatment&&b.allocatedWeblabTreatment},isClientSideWeblabTriggerOnlySA:function(b){return this.isClientSideWeblabSA(b)&&b.weblabTriggerOnlyFlag&&"true"===b.weblabTriggerOnlyFlag.toString()}}})})();(function(){n.when("A","CacheManager","QTipsMetrics","QTips","SAEndPointsConfig","SAPreProcessor","SACommonConfig","SAMetricConstants","3p-promise","ShoppingAidsGenericUtils","PageResolver","SAFeature",
"SARateLimitingInstrumentationHandler","LoPResolver").register("ShoppingAidsFetcher",function(k,b,a,e,f,d,c,l,g,h,q,t,m,r){return{fetchShoppingAids:function(c,d,e){try{var f=k.now(),g=this;if(h.isSADebugRequest())g.promiseFetchFromBackendForPage(c).then(d,e);else if(t.backoff&&h.shouldBackOff(c))a.incrementCounter(l.SA_CACHE_PREFIX+l.SA_FETCH_PREFIX+l.BACKOFF+c);else if(b.isShoppingAidsAvailableForPage(c)){var m=b.getCacheHitFrequencyForPage(c);b.updateCacheHitFrequencyInCache(c,m+1);var q=g._generateFinalResponse(f,
c);a.incrementCounter(l.SA_CACHE_PREFIX+l.SERVERD_FROM_CACHE);a.incrementCounter(l.SA_CACHE_PREFIX+l.SERVERD_FROM_CACHE+"_"+m);a.incrementCounter(l.SA_CACHE_PREFIX+l.SERVERD_FROM_CACHE+"_"+h.platformCheck);a.incrementCounter(l.SA_CACHE_PREFIX+l.SERVERD_FROM_CACHE+"_"+c);d(q)}else g.promiseFetchFromBackendForPage(c).then(function(a){g._updateShoppingAidsListInCache(c,a);return a}.bind(g)).then(function(a){return g._generateFinalResponse(f,c,a)}.bind(g)).then(function(a){return d(a)}.bind(g)).catch(e)}catch(A){a.incrementCounter(l.SA_CACHE_PREFIX+
l.SA_FETCH_PREFIX+l.ERROR_CATCHED)}},_generateFinalResponse:function(c,e,g){var f=b.getShoppingAidsListForPageFromCache(e);h.logClientSideWeblabMetricsForSAList(f,l.SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL,g);e=d.preProcessSAList(f,e);g=this._updateNestedShoppingAidsStructure(e.ShoppingAidsList);e={};e.ShoppingAidsList=g;h.logClientSideWeblabMetricsForSAList(g,l.SHOPPINGAIDS_WEBLAB_AFTER_FILTERING);c=k.now()-c;a.incrementCounter(l.SA_CACHE_PREFIX+l.TIME_TAKEN,c);a.incrementCounter(l.SA_CACHE_PREFIX+l.SA_FETCH_PREFIX+
l.TIME_TAKEN,c);a.incrementCounter(l.SA_CACHE_PREFIX+l.SERVERD_FROM_CACHE+"_"+l.TIME_TAKEN,c);return e},promiseFetchFromBackendForPage:function(a){var b=this;return new g(function(c,d){b.fetchShoppingAidsFromBackend(a,c,d)}.bind(b))},fetchShoppingAidsFromBackend:function(b,d,g){var m=l.SA_FETCH_PREFIX,t=document.referrer,p=/.*\.amazon\..*/g,x="DIRECT";p&&p.test(t)&&(x="INDIRECT");t=f.fetchShoppingAidsEndPoint;a.incrementCounter(m+l.NETWORK_CALL_INITIATED);a.incrementCounter(m+l.NETWORK_CALL_INITIATED+
h.platformCheck);k.ajax(t,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:{page:b,url:q.getWindowLocationHref(),trafficType:x,cacheTTL:c.pageTTLInMinutes(b),cacheVersion:c.cacheVersion,previousLop:e.utils.getPreviousLoP(),currentLop:r.getCurrentLoP()},success:function(c){a.incrementCounter(m+b+l.STATUS_1);d&&"function"===typeof d&&d(c);return c},error:function(c,d){"Request Timeout"===d?a.incrementCounter(m+b+l.STATUS_0_+l.SA_TIMEOUT):"NotFound"===d&&a.incrementCounter(m+
b+l.STATUS_0_+l.SA_UNKNOWN_ENDPOINT);a.incrementCounter(m+b+h.platformCheck+l.STATUS_0);g&&"function"===typeof g&&g(c);return c}})},_updateShoppingAidsListInCache:function(c,d){try{k.objectIsEmpty(d)?a.incrementCounter(l.SA_CACHE_PREFIX+l.FETCH_RESPONSE+l.STATUS_0):(a.incrementCounter(l.SA_CACHE_PREFIX+l.FETCH_RESPONSE+l.STATUS_1),b.updateContextForShoppingAidsCache(d.Context),b.updateSessionDayImpressionCountObjectInCache(d.SessionDayImpressionCount),b.updatePageImpressionCountObjectInCache(c,d.PageImpressionCount),
b.updateShoppingAidsListForPageInCache(c,d.ShoppingAidsList),"detailpage"!==c||t.backoff||m.rateLimitingInstrumentation(Date.now(),h.isValidCampaignAvailable(d.ShoppingAidsList)))}catch(x){a.incrementCounter(l.SA_CACHE_PREFIX+l.CACHE_UPDATE_ERROR)}},_updateNestedShoppingAidsStructure:function(a){k.each(a,function(a,b){k.each(a,function(a){this._updateNestedStructure(a)},this)},this);return a},_updateNestedStructure:function(a){var c=a.nestedSAPriorityList;if(c){var d=[];k.each(c,function(a){a=b.getShoppingAidsDataForPageType_SAType(a.pageType,
a.SAType,a.identifier);d.push(a)});a.nestedSAList=JSON.stringify(d)}return a},cleanUpSACache:function(){b.cleanUpCache()}}})})();(function(){n.when("A","ShoppingAidsGenericUtils","SAMetricConstants","QTipsMetrics").register("AuthPortalURISubstitute",function(k,b,a,e){return{substitute:function(f){if(f.targetEndpoint){var d=f.targetEndpoint;try{var c=b.getWindowLocationPath()+b.getWindowLocationQueryString();c?"/"!==c.charAt(0)&&(c="/"+c):c="/";var l=encodeURIComponent(c),g=encodeURIComponent(l);var h=
d.replace("%2Fsa-request-url",l).replace("%252Fsa-request-url",g);f.targetEndpoint=h}catch(q){return e.incrementCounter(a.SA_CACHE_PREFIX+a.URL_ENCODE_ERR),e.incrementCounter(a.SA_CACHE_PREFIX+a.URL_ENCODE_ERR+"_"+f.identifier),!1}}return!0}}})})();(function(){n.when("A","QTipLibrary","SAHotspotConstants","ShoppingAidsGenericUtils","AnchorSACollection").register("SAHotspot",function(k,b,a,e,f){k={};k.model=new b.Model;k.collection=new f;k.collection.identifierList=[];k.collection.setValidSACallback(function(a){var b=
a.get("hotspotAnchor"),d=a.get("maxDisplayCount"),g=a.get("nestedSAList");return e.isDefined(a)&&e.isDefined(d)&&e.isDefined(b)&&0<d&&e.isDefined(g)}.bind(this));e.addStyleToHead(a.style.hotspotStyle);return k})})();(function(){n.register("SAHotspotConstants",function(){return{timer:{defaultStartOffset:3E3,defaultHotspotInterval:1E4,defaultRenderCallbackTime:800},templates:{hotspotTemplate:'\x3cdiv id\x3d"hotspot"class\x3d"hotspot-background"\x3e\x3cstyle\x3e.hotspot-background{ border-color : #EC912D;border-radius: 50%;width: 16px;height: 16px;background-color: #EC912D; position:absolute;display: table-cell;text-align:center;box-shadow: 0 0 0 0 rgba(236, 145, 45, 1);transform: scale(1);animation: pulse 1.5s 0.2s \x3c% pulsatingIteration %\x3e;} .hotspot-background:after{ content: none;}\x3c/style\x3e\x3cstyle\x3e @keyframes pulse {0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 12px rgba(236, 145, 45, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0); }}\x3c/style\x3e\x3cdiv class\x3d"hotspot-text" style \x3d"vertical-align:middle; position:relative;top:-10.5px;right:2.5px;color: white; font-size:15px; font-family: Bookerly;font-style: italic;font-size;font-weight: bold;"\x3e\x3cp\x3ei\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'},
style:{hotspotStyle:"#hotspot{position:absolute;overflow:initial}.hotspot-background{position:fixed;z-index:90000;padding:10px;opacity:1;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.hotspot-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.hotspot-textholder{width:100%;height:100%}"},
Z_indexConstants:{lowerZ_index:200,higherZ_index:9E4},CSSConstants:{TEXT_RTL:"-2.5px"}}})})();(function(){n.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAHotspot","AnchorBasedSAUtils","AnchorBasedPositioning","NestedShoppingAidHelper","SAHotspotConstants").execute(function(k,b,a,e,f,d,c,l,g,h){a=a.View.extend({collection:d.collection,anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,
hotspotId:"#hotspot",shoppingAidsType:"hotspot",identifier:"",positionY:0,postHotspotRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var b=0;b<a.length;b++)if(!document.hidden){var d=this.collection.at(a[b].id);d.set({shoppingAidsType:this.shoppingAidsType});this.anchor=c.processAnchor(d.get("hotspotAnchor"),e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(c.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,
this.searchSugesstions,this.searchFilterPage)||c.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),d.get("hotspotAnchor")))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),h.timer.defaultStartOffset))}},render:function(a){var b=this._createHotspotBaseElement(a);f.isDefined(b)?(l.addAndPosition(b,a,this.anchor),this._attachClickListener(b,a),this._displayHotspot(a.get("renderPointX"),
a.get("renderPointY")),a=c.getIndexByIdentifier(this.collection.identifierList,a.get("identifier")),-1!==a&&(this.renderCompleteTimeoutId=setTimeout(this.renderComplete.bind(this),h.timer.defaultRenderCallbackTime,a))):this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),h.timer.defaultStartOffset)},dismissWithId:function(a,c,d){var g=b(this.hotspotId)[0];g&&g.getAttribute(e.view.saDOMNameAttribute)===a||this.identifier===a&&f.isDefined(this.renderTimeoutId)?(this._stopHotspots(),c&&
"function"===typeof c&&c()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED)},_displayHotspot:function(a,d){var g=b(this.hotspotId);this.positionY=d;f.isMarketplaceRTLEnabled()&&this._makeRTLCompatible();g.css({left:a+"px",top:d+"px",visibility:"visible"});c.isElementOrParentFixed(this.anchor)&&g.css({position:"fixed"});g.attr(e.view.saDOMNameAttribute,this.identifier)},renderComplete:function(a){var b=this.collection.identifierList[a].id,c=this.collection.identifierList[a].schedulingType,
d=this.shoppingAidsType;this.collection.identifierList.splice(a,1);f.isDefined(this.renderCompleteCallback)&&this.renderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d})},_closeAndRenderNext:function(){k.throttle(function(){this.clearTimeouts();this._nextHotspot()}.bind(this),1E3).call(this)},_createHotspotBaseElement:function(a){return this._createElement(h.templates.hotspotTemplate,a)},_isHotspotPresent:function(){return document.getElementById("hotspot")},_attachClickListener:function(a,
c){b(a).click(function(){g.dispatchShoppingAidEvent(JSON.parse(c.get("nestedSAList")));d.view._closeAndRenderNext()})},_stopHotspots:function(){this.clearTimeouts();this._removeElement(this.hotspotId)},_nextHotspot:function(){f.isDefined(this.collection.identifierList)&&0<this.collection.identifierList.length?(this._removeElement(this.hotspotId),this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),h.timer.defaultHotspotInterval)):this._stopHotspots()},_makeRTLCompatible:function(){var a=
b(".hotspot-text");"function"===typeof k.$.withoutRtl?k.$.withoutRtl(function(){a.css({right:h.CSSConstants.TEXT_RTL})}):document.getElementById("hotspot").getElementsByClassName("hotspot-text")[0].style.right=h.CSSConstants.TEXT_RTL},handleOverlay:function(){this._isHotspotPresent()&&this._pushHotspotToBackground()},handleOverlayDismiss:function(){this._isHotspotPresent()&&this._bringAudiospotToForeground()},_pushHotspotToBackground:function(){var a=b(this.hotspotId),d=this.positionY+c.getAUIScrollPageValue();
a.css({"z-index":h.Z_indexConstants.lowerZ_index,top:d})},_bringAudiospotToForeground:function(){b(this.hotspotId).css({"z-index":h.Z_indexConstants.higherZ_index,top:this.positionY})},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId)},setRenderCompleteCallback:function(a){this.renderCompleteCallback=
a}});d.view=new a;return d})})();(function(){n.when("A","QTipLibrary","SAHighlighterConstants","ShoppingAidsGenericUtils","AnchorSACollection").register("SAHighlighter",function(k,b,a,e,f){k={};k.model=new b.Model;k.collection=new f;k.collection.identifierList=[];k.collection.setValidSACallback(function(a){var b=a.get("highlighterAnchor"),d=a.get("maxDisplayCount");return e.isDefined(a)&&e.isDefined(d)&&e.isDefined(b)&&0<d}.bind(this));e.addStyleToHead(a.style.SA_HighlighterStyle);return k})})();
(function(){n.register("SAHighlighterConstants",function(){return{timer:{defaultStartOffset:3E3,defaultHighlighterInterval:1E4,defaultRenderCallbackTime:800,defaultDismissCallbackTime:2E4},templates:{SA_HighlighterTemplate:'\x3cdiv id\x3d"page-highlighter" class\x3d"page-highlighter-background"\x3e\x3c/div\x3e'},style:{SA_HighlighterStyle:"#page-highlighter{ position: absolute; overflow: initial;} .page-highlighter-background{ position: fixed; z-index: 90000; padding: 10px; width: 5px; height: 5px; background-color: transparent; border:  4px solid #007185 ; border-radius: 50%; position: absolute; animation: ring 1.5s linear infinite;} @keyframes ring { from { opacity: 1;} to { opacity: 0; transform: scale(3);}}"},
metrics:{PREFIX:"SA_PAGEHIGHLIGHTER_",DISPLAY:"DISPLAYED",POSTRENDER:"POST_RENDER",ONDEMAND_DISPLAY:"ONDEMAND_DISPLAYED",DISMISS:"DISMISSED",DISSMISS_ID:"DISMISSED_WITH_ID",CLICK:"CLICKED",VALID_RENDER:"VALID_RENDER"}}})})();(function(){n.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAHighlighter","AnchorBasedSAUtils","AnchorBasedPositioning","NestedShoppingAidHelper","SAHighlighterConstants","QTipsMetrics").execute(function(k,b,a,e,f,d,c,l,g,h,q){a=a.View.extend({collection:d.collection,
anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,HighlighterId:"#page-highlighter",shoppingAidsType:"highlighter",identifier:"",postHighlighterRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var b=0;b<a.length;b++)if(!document.hidden){var d=this.collection.at(a[b].id);d.set({shoppingAidsType:this.shoppingAidsType});this.anchor=
c.processAnchor(d.get("highlighterAnchor"),e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(c.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||c.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),d.get("HighlighterAnchor")))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),h.timer.defaultStartOffset),
q.incrementCounter(h.metrics.PREFIX+h.metrics.POSTRENDER,1,this.identifier))}},render:function(a){var b=this._createHighlighterBaseElement(a);f.isDefined(b)?(l.addAndPosition(b,a,this.anchor),this._attachClickListener(b,a),this._displayHighlighter(a.get("renderPointX"),a.get("renderPointY")),a=c.getIndexByIdentifier(this.collection.identifierList,a.get("identifier")),q.incrementCounter(h.metrics.PREFIX+h.metrics.VALID_RENDER,1,this.identifier),-1!==a&&(this.renderCompleteTimeoutId=setTimeout(this.renderComplete.bind(this),
h.timer.defaultRenderCallbackTime,a),this.defaultDismissalTimeoutId=setTimeout(this._closeAndRenderNext.bind(this),h.timer.defaultDismissCallbackTime,a))):this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),h.timer.defaultStartOffset)},_displayHighlighter:function(a,d){var g=b(this.HighlighterId);g.css({left:a+"px",top:d+"px",visibility:"visible"});c.isElementOrParentFixed(this.anchor)&&g.css({position:"fixed"});g.attr(e.view.saDOMNameAttribute,this.identifier);q.incrementCounter(h.metrics.PREFIX+
h.metrics.DISPLAY,1,this.identifier)},renderComplete:function(a){var b=this.collection.identifierList[a].id,c=this.collection.identifierList[a].schedulingType,d=this.shoppingAidsType;this.collection.identifierList.splice(a,1);f.isDefined(this.renderCompleteCallback)&&this.renderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d})},_closeAndRenderNext:function(){k.throttle(function(){this.clearTimeouts();this._nextHighlighter()}.bind(this),1E3).call(this);q.incrementCounter(h.metrics.PREFIX+
h.metrics.DISMISS,1,this.identifier)},_createHighlighterBaseElement:function(a){return this._createElement(h.templates.SA_HighlighterTemplate,a)},_attachClickListener:function(a,c){var e=this;b(a).click(function(){q.incrementCounter(h.metrics.PREFIX+h.metrics.CLICK,1,e.identifier);f.isDefined(c.get("nestedSAList"))&&g.dispatchShoppingAidEvent(JSON.parse(c.get("nestedSAList")));d.view._closeAndRenderNext()})},_stopHighlighters:function(){this.clearTimeouts();this._removeElement(this.HighlighterId)},
_nextHighlighter:function(){f.isDefined(this.collection.identifierList)&&0<this.collection.identifierList.length?(this._removeElement(this.HighlighterId),this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),h.timer.defaultHighlighterInterval)):this._stopHighlighters()},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId);
f.isDefined(this.defaultDismissalTimeoutId)&&(clearTimeout(this.defaultDismissalTimeoutId),delete this.defaultDismissalTimeoutId)},dismissWithId:function(a,c,d){var g=b(this.HighlighterId);g&&g.attr(e.view.saDOMNameAttribute)===a||a===this.identifier&&f.isDefined(this.renderTimeoutId)?(this._stopHighlighters(),c&&"function"===typeof c&&c()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED);q.incrementCounter(h.metrics.PREFIX+h.metrics.DISSMISS_ID,1,this.identifier)},setRenderCompleteCallback:function(a){this.renderCompleteCallback=
a},displayOnDemandHighlighter:function(a){this._stopHighlighters();d.collection.add(a);this.postHighlighterRender();q.incrementCounter(h.metrics.PREFIX+h.metrics.ONDEMAND_DISPLAY,1,this.identifier)}});d.view=new a;return d})})();(function(){n.when("A","QTipLibrary","SAAudiospotConstants","ShoppingAidsGenericUtils","AnchorSACollection").register("SAAudiospot",function(k,b,a,e,f){k={};k.model=new b.Model;k.collection=new f;k.collection.identifierList=[];k.collection.setValidSACallback(function(a){var b=
a.get("audiospotAnchor"),d=a.get("audioSource");return e.isDefined(a)&&e.isDefined(b)&&e.isDefined(d)}.bind(this));e.addStyleToHead(a.style.audiospotStyle);return k})})();(function(){n.register("SAAudiospotConstants",function(){return{timer:{defaultStartOffset:3E3,defaultAudioSpotInterval:1E4},templates:{audiospotTemplate:'\x3cdiv id\x3d"sa_audiospot"class\x3d"sa_audiospot-background"\x3e\x3cstyle\x3e.sa_audiospot-background{ border:1px solid transparent; border-radius: 50%;width: 30px;height: 30px; background-color: #fafafa; position:relative;display:block; box-shadow: 1px 1px 0 0 transparent;} .sa_audiospot-background:after{ content: none;}\x3c/style\x3e\x3csvg id\x3d"audio_playSVG" width\x3d"34" height\x3d"34" style\x3d"transform: rotate(90deg); position: absolute; background: transparent; stroke: #0B8699; display:none;top:-3px;left:-3px;"\x3e\x3ccircle id \x3d "sa_audiospot_progress_indicator_inner" cx\x3d"50%" cy\x3d"50%" r\x3d"14" style\x3d"fill: none; stroke-opacity: 0.3; stroke-width: 5; stroke-linecap: round;"\x3e\x3c/circle\x3e\x3ccircle id \x3d "sa_audiospot_progress_indicator" cx\x3d"50%" cy\x3d"50%" r\x3d"14" style\x3d"fill: none;  --initialStroke: 87.9646;  stroke-dasharray: var(--initialStroke); stroke-dashoffset: var(--initialStroke); stroke-width: 5; stroke-opacity: 1; stroke-linecap: round; transition: stroke-dashoffset 1ms ease;"\x3e\x3c/circle\x3e\x3c/svg\x3e\x3cdiv id\x3d"audio-play-icon" class\x3d"play-css"\x3e\x3cspan\x3e\x3cstyle\x3e.play-css { height: 18px; width: 18px; position: relative; overflow: hidden; display: inline-block;top:-5px;left:-5px;z-index:1 } .play-css span{ display: block; width: 5px; height: 5px; background: #fff; margin: 7px 0 0 1px; } .play-css span:after { content: \'\'; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 6px 8px 6px 9px; left: -8px; top: 3px; } .play-css span:before { transform: rotate(45deg); border-radius: 0 30px 0 0; content: \'\'; position: absolute; width: 3px; height: 3px; border-style: double; border-color: #fff; border-width: 5px 5px 0 0; left: 11px; top: 5px; transition: all 0.2s ease-out; }\x3c/style\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"audio-pause-icon" class\x3d"pause-css"\x3e\x3cstyle\x3e.pause-css{border: 0; background: transparent; box-sizing: border-box; width: 0; height: 9px; border-color: transparent transparent transparent #0B8699; transition: 100ms all ease; border-style: double; border-width: 0px 0 0px 7px;position:relative;z-index:1;left:0.5px;display:none}\x3c/style\x3e\x3c/div\x3e\x3csvg id\x3d"audio_play_filler_circle" width\x3d"34" height\x3d"34" style\x3d"transform: rotate(90deg); position: absolute; background: transparent; fill: #0B8699;top:-3px;left:-3px"\x3e\x3ccircle id \x3d "filler_circle" cx\x3d"50%" cy\x3d"50%" r\x3d"16" style\x3d"fill:#0B8699;"\x3e\x3c/circle\x3e\x3c/svg\x3e\x3c/div\x3e'},
style:{audiospotStyle:"#sa_audiospot{ position: absolute; overflow: initial; }.sa_audiospot-background { position: fixed; z-index: 90000; padding: 10px; opacity: 1; border-radius: 3px; -webkit-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -moz-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -o-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -moz-transform-style: preserve-3d; -o-transform-style: preserve-3d; -webkit-transform-style: preserve-3d; transform-style: preserve-3d; } .sa_audiospot-background:after { position: absolute; display: block; width: 0; content: ''; border-style: solid; -moz-transform-style: preserve-3d; -o-transform-style: preserve-3d; -webkit-transform-style: preserve-3d; transform-style: preserve-3d; } .slate-image-video-loader { background: #ffffff; border-radius: 50%; position: absolute; opacity: 0.7; } .slate-image-play-button { margin: auto; position: absolute; border-style: solid; border-color: transparent transparent transparent #ada6a6; }"},
constants:{lowerZindex:200,higherZindex:9E4},cssConstants:{playIconId:"#audio-play-icon",pauseIconId:"#audio-pause-icon",playSVG:"#audio_playSVG",progressBarId:"#sa_audiospot_progress_indicator",fillerCircleId:"#filler_circle"},audioStates:{PLAY_STATE:"PLAY_STATE",PAUSE_STATE:"PAUSE_STATE",COMPLETION_STATE:"END",INITIAL_STATE:"INITIAL"},metrics:{PREFIX:"SA_Audiospot_",PLAY:"played",PAUSE:"paused",REPLAY:"replayed",END:"ended",ERROR:"error",STALLED:"stalled",SUSPEND:"suspend",WAITING:"waiting",ABORT:"abort",
LOADED:"loadeddata"}}})})();(function(){n.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAAudiospot","AnchorBasedSAUtils","AnchorBasedPositioning","SAAudiospotConstants","AudioStateManager","QTipsMetrics","ShoppingAidsAudioUtils").execute(function(k,b,a,e,f,d,c,l,g,h,q,t){k=a.View.extend({collection:d.collection,anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,
audiospotId:"#sa_audiospot",shoppingAidsType:"audiospot",identifier:"",positionY:0,postAudiospotRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var b=0;b<a.length;b++)if(!document.hidden){var d=this.collection.at(a[b].id);d.set({shoppingAidsType:this.shoppingAidsType});this.anchor=c.processAnchor(d.get("audiospotAnchor"),e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(f.isDefined(this.anchor)&&c.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,
this.searchSugesstions,this.searchFilterPage)||c.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),this.anchor))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postAudiospotRender.bind(this),g.timer.defaultStartOffset))}},render:function(a){var b=c.getIndexByIdentifier(this.collection.identifierList,this.identifier);if(f.isShoppingAidForWeblabTesting(this.identifier)&&-1!==b)this.renderComplete(b),q.incrementCounter(g.metrics.PREFIX+
"logImpression_"+this.identifier);else{var d=this._createAudiospotBaseElement(a);f.isDefined(d)&&(l.addAndPosition(d,a,this.anchor),h.cacheElementData(),this._attachClickListener(d,a),this._displayAudiospot(a.get("renderPointX"),a.get("renderPointY")),this._handleVisibility(),-1!==b&&(this.renderCompleteTimeoutId=setTimeout(this.renderComplete.bind(this),e.timer.defaultDismissalCallbackTime,b),q.incrementCounter(g.metrics.PREFIX+"logImpression_"+this.identifier)));q.incrementCounter(g.metrics.PREFIX+
"undefined_audiospot_element_"+this.identifier)}},dismissWithId:function(a,c,d){var g=b(this.audiospotId)[0];g&&g.getAttribute(e.view.saDOMNameAttribute)===a||this.identifier===a&&f.isDefined(this.renderTimeoutId)?(this._dismissAudiospots(),c&&"function"===typeof c&&c()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED)},_dismissAudiospots:function(){b(this.audiospotId)[0]&&h.setState(h.pauseState);this._removeElement(this.audiospotId);this.clearTimeouts();document.removeEventListener("visibilitychange",
this._visibilityChangeHandler)},_displayAudiospot:function(a,d){var f=b(this.audiospotId);this.positionY=d;f.css({left:a+"px",top:d+"px",visibility:"visible"});c.isElementOrParentFixed(this.anchor)&&f.css({position:"fixed"});f.attr(e.view.saDOMNameAttribute,this.identifier);q.incrementCounter(g.metrics.PREFIX+"render_"+this.identifier)},_isAudiospotPresent:function(){return document.getElementById("sa_audiospot")},pushAudiospotToBackground:function(){var a=b(this.audiospotId),d=this.positionY+c.getAUIScrollPageValue();
a.css({"z-index":g.constants.lowerZindex,top:d})},bringAudiospotToForeground:function(){b(this.audiospotId).css({"z-index":g.constants.higherZindex,top:this.positionY})},renderComplete:function(a){var b=this.collection.identifierList[a].id,c=this.collection.identifierList[a].schedulingType,d=this.shoppingAidsType;this.collection.identifierList.splice(a,1);f.isDefined(this.audiospotRenderCompleteCallback)&&this.audiospotRenderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d})},_createAudiospotBaseElement:function(a){h.configureAudio(a);
return this._createElement(g.templates.audiospotTemplate,a)},_attachClickListener:function(a){b(a).click(function(){d.view._updateState()})},_updateState:function(){h.getCurrentState()===h.initialState?h.setState(h.playState):h.getCurrentState()===h.playState?h.setState(h.pauseState):h.getCurrentState()===h.pauseState?h.setState(h.playState):h.getCurrentState()===h.completeState&&h.setState(h.playState)},_handleVisibility:function(){document.addEventListener("visibilitychange",this._visibilityChangeHandler)},
_visibilityChangeHandler:function(){document.hidden&&h.getCurrentState()===h.playState&&h.setState(h.pauseState)},handleOverlay:function(){this._isAudiospotPresent()&&(t.handleOverlay(h.getCurrentState.bind(h),h.setState.bind(h)),this.pushAudiospotToBackground())},handleOverlayDismiss:function(){this._isAudiospotPresent()&&(this.bringAudiospotToForeground(),t.handleOverlayDismiss(h.getCurrentState.bind(h),h.setState.bind(h)))},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),
delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId)},setAudiospotRenderCompleteCallback:function(a){this.audiospotRenderCompleteCallback=a}});d.view=new k;return d})})();(function(){n.when("A","SAAudiospotConstants","QTipsMetrics").register("AudioMetrics",function(k,b,a){var e=b.metrics.PREFIX;return{_addMetricEventListeners:function(f,d){f.addEventListener("error",function(){a.incrementCounter(e+
b.metrics.ERROR,1,d)});f.addEventListener("stalled",function(){a.incrementCounter(e+b.metrics.STALLED,1,d)});f.addEventListener("suspend",function(){a.incrementCounter(e+b.metrics.SUSPEND,1,d)});f.addEventListener("waiting",function(){a.incrementCounter(e+b.metrics.WAITING,1,d)});f.addEventListener("abort",function(){a.incrementCounter(e+b.metrics.ABORT,1,d)});f.addEventListener("loadeddata",function(){a.incrementCounter(e+b.metrics.LOADED,1,d)})}}})})();(function(){n.when("A","jQuery","QTipLibrary",
"QTipsConstants","AnchorBasedSAUtils","ShoppingAidsGenericUtils","NestedShoppingAidHelper","SAHotspot").register("AnchorBasedPositioning",function(k,b,a,e,f,d,c,l){k=a.View.extend({pageAnchor:"body",addAndPosition:function(a,b,c){this.setElement(this.pageAnchor,a);a=this._getAbsolutePositionToPlaceSA(c,b.get("positionY"),b.get("positionX"),b.get("startPositionX"));b.set({renderPointX:a[0]});b.set({renderPointY:a[1]})},_getAbsolutePositionToPlaceSA:function(a,c,e,l){var g=b(a)[0].getBoundingClientRect(),
h=b(a).offset().top;f.isElementOrParentFixed(a)&&(h=g.top);a=g.left;d.isDefined(l)&&("middle"===l&&(a+=(g.left+g.right)/2),"right"===l&&(a=g.right),"left"===l&&(a=g.left));d.isDefined(c)&&(h-=c);d.isDefined(e)&&(a+=e);return[a,h]}});return k=new k})})();(function(){n.when("A","QTipLibrary","ShoppingAidsGenericUtils").register("AnchorSACollection",function(k,b,a){return b.Collection.extend({model:{},identifierList:[],add:function(b){if(a.isDefined(this.validSACallback)&&this.validSACallback(b)){var e=
{},d=b.get("identifier");e.id=d;e.sequenceNum=b.get("sequenceNum");e.schedulingType=b.get("schedulingType");this.identifierList.push(e);this.models[d]=b}},parse:function(b,f){if(a.isDefined(b)){var d=this._prepareModel.bind(this);b.forEach(function(a,e,g){b[e]=d(a)});return b}},setValidSACallback:function(a){this.validSACallback=a}})})})();(function(){n.when("A","AssistedShoppingDataParser","ShoppingAidsGenericUtils").register("AssistedShoppingDataManager",function(k,b,a){return{model:w,_currentPage:w,
initialiseCampaignData:function(e,f){this.model=b.parseASCampaignJson(e,f);this._currentPage=f;return a.isDefined(this.model)?!0:!1},getCurrentPage:function(){return this._currentPage},isCompletionPage:function(){return this.getCurrentPage()===this.getCompletionPage()},isFirstRender:function(){return this._getFieldFromModel("firstRender")},getIdentifier:function(){return this._getFieldFromModel("identifier")},getType:function(){return this._getFieldFromModel("type")},getState:function(){return this._getFieldFromModel("state")},
getCompletionPage:function(){return this._getFieldFromModel("completionPage")},getTTL:function(){return this._getFieldFromModel("ttl")},getPageTransitionEvents:function(){return this._getFieldFromModel("pageTransitionEvents")||this.getPageLevelSA().get("pageTransitionEvents")},getEnabledBottomSheets:function(){return this.getPageLevelSA().get("enabledBottomSheets")},getEnabledPopOvers:function(){return this.getPageLevelSA().get("enabledPopOvers")},getPageLevelSA:function(){return this._getFieldFromModel("pageLevelSA")},
getTriggers:function(){return this._getFieldFromModel("triggers")},updateState:function(a){try{return this.model.set({state:a}),!0}catch(f){return!1}},updateAudioURL:function(a,f){try{return b.identifierToModelMap[a].set({audioSrc:f}),!0}catch(d){return!1}},_getFieldFromModel:function(b){return a.isDefined(this.model)?this.model.get(b):null}}})})();(function(){n.when("A","jQuery","QTipLibrary","ShoppingAidsGenericUtils","QTipsConstants","AssistedShoppingModelBuilder","ShoppingAidsFilters","ContextAwareSubstitutor").register("AssistedShoppingDataParser",
function(k,b,a,e,f,d,c,l){return{identifierToModelMap:{},parseASCampaignJson:function(a,b){b=this._getPageLevelContext(a,b);if(!e.isDefined(b))return null;a=d.newBuilder().withIdentifier(a.identifier).withType(a.type).withState(a.state).withTTL(Number(a.ttl)).withCompletionPage(a.completionPage).withFirstRender(a.firstRender).withPageTransitionEvents(e.parseJSONStringIfValid(a.pageTransitionEvents)).withPageLevelSA(this._parsePageLevelSA(a.pageLevelSA,b.pageLevelSA)).withTriggers(this._parseShoppingAidsJSONCollection(b.triggers)).build();
this._registerModel(a);return a},_parseShoppingAidsJSONCollection:function(a){var b=[];if(e.isNonEmptyArray(a))for(var c=0;c<a.length;c++)b[c]=this.parseShoppingAidJSON(a[c]);return b},parseShoppingAidJSON:function(b){var c={};if(b&&this._preProcessShoppingAidsJSON(b)){for(var d in b)b.hasOwnProperty(d)&&(c[d]=this._formatSAJSONValue(d,b[d]));c=new a.Model(c);this._registerModel(c)}return c},_preProcessShoppingAidsJSON:function(a){if(e.isDefined(a.type)&&"FabAudioSpot"===a.type){var b=-1;return-1!==
(b=c.getContextTargetingIndex(a))&&l.substitute(a,b,a.type)}return!0},_parsePageLevelSA:function(a,c){a=b.extend(e.defaultJSONIfUndefined(a,{}),e.defaultJSONIfUndefined(c,{}));return this.parseShoppingAidJSON(a)},_getPageLevelContext:function(a,b){try{return a.pages[b]}catch(q){return null}},_formatSAJSONValue:function(a,b){return f.regex.numberRegex.test(b)?Number(b):"targetSA"===a?this.parseShoppingAidJSON(b):"supplementarySA"===a&&1!==b.indexOf(f.contextAwareSADelimiter)?this._parseShoppingAidsJSONCollection(b):
b},_registerModel:function(a){this.identifierToModelMap[a.get("identifier")]=a}}})})();(function(){n.when("A","QTipLibrary").register("AssistedShoppingModelBuilder",function(k,b){return{model:w,newBuilder:function(){this.model=new b.Model;return this},withIdentifier:function(a){this.model.set({identifier:a});return this},withState:function(a){this.model.set({state:a});return this},withType:function(a){this.model.set({type:a});return this},withTTL:function(a){this.model.set({ttl:a});return this},withCompletionPage:function(a){this.model.set({completionPage:a});
return this},withFirstRender:function(a){this.model.set({firstRender:a});return this},withPageLevelSA:function(a){this.model.set({pageLevelSA:a});return this},withTriggers:function(a){this.model.set({triggers:a});return this},withPageTransitionEvents:function(a){this.model.set({pageTransitionEvents:a});return this},build:function(){return this.model}}})})();(function(){n.register("SparkleConfig",function(){return{pagesWithSubnav:{gateway:1,detailpage:1,search:1,browse:0,deals:0,event:0,yourorder:0,
cart:1,foundIt:0,thankYou:0},shouldAddPaddingForPage:function(k){return k&&1===this.pagesWithSubnav[k]},elementPresentOnPage:"ElementPresentOnPage",elementNotPresentOnPage:"ElementNotPresentOnPage",elementIdInvalid:"ElementIdInvalid",subnavElementId:"glow_sub_nav_bar_view",andoridBottomPadding_SubnavPresent:"46px"}})})();(function(){n.when("A","SACommonConfig","ShoppingAidsGenericUtils","LocalStorageInterface").register("StatefulSADataStore",function(k,b,a,e){var f=[];k={init:function(){var d=e.getFromLocalStorage(b.statefulSAStorageKey);
a.isNonEmptyArray(d)&&(f=d)},_storeInProgressSAs:function(){try{e.setInLocalStorage(b.statefulSAStorageKey,JSON.stringify(f))}catch(d){}},getInProgressSAs:function(){return f.slice()},getInProgressSAByIdentifier:function(a){var b;f.forEach(function(c){a===c.identifier&&(b=c)});return b},setInProgressSAs:function(a){a&&Array.isArray(a)&&(f=a.slice(),this._storeInProgressSAs())},updateInProgressSA:function(a,b,e){f.forEach(function(c){a===c.identifier&&(c.state=b,c.status=e)});this._storeInProgressSAs()},
isInProgressSA:function(a){return!f.every(function(b){return b.identifier!==a})},addInProgressSA:function(a){if(this.isInProgressSA(a.identifier))return!1;a.firstImpressionTime=Date.now();f.push(a);this._storeInProgressSAs();return!0},removeInProgressSA:function(a){var b=-1;f.forEach(function(c,d){a===c.identifier&&(b=d)});return-1<b?(f.splice(b,1),this._storeInProgressSAs(),!0):!1},cleanUp:function(){f=[];e.removeFromLocalStorage(b.statefulSAStorageKey)}};k.init();return k})})();(function(){n.when("A",
"CacheValidator","ShoppingAidsGenericUtils","SAFeature","ShoppingAidsFilters","StatefulSADataStore").register("StatefulSAEligiblityHelper",function(k,b,a,e,f,d){return{getEligibleInProgressSA:function(a){var b=d.getInProgressSAs();b=b.filter(this._isSAActive);d.setInProgressSAs(b);for(var c=0;c<b.length;c++)if(this._isMultiPageSAForCurrentPage(b[c],a)&&f.isShoppingAidEligible(b[c]))return b[c];return{}},_isSAActive:function(b){return a.isDefined(b.ttl)&&a.isDefined(b.firstImpressionTime)?a.minutesBetween(Date.now(),
b.firstImpressionTime)<b.ttl:!1},_isMultiPageSAForCurrentPage:function(a,b){return a.pages&&a.pages[b]},cleanUpInProgressStore:function(){d.cleanUp()}}})})();(function(){n.when("A","AssistedShoppingDataManager","LogImpressionManager","StatefulSADataStore","ShoppingAidsGenericUtils","SAFabAudiospot","SAFabAudiospotConstants","TriggerHandler","MultiPageSAConstants","SAMetricUtils","QTipsConstants","ShoppingAidsFilters","PageResolver","LocalStorageInterface","UIGuardRailFiltering").register("MultiPageSAOrchestrator",
function(k,b,a,e,f,d,c,l,g,h,q,t,m,n,p){var r={schedulingType:w,multiPageSA:w,isExperienceCompleted:!1,display:function(a,c){this._isCurrentPagePresentInCampaign(a,c)&&(this.schedulingType=a.schedulingType,this.multiPageSA=a,this.isExperienceCompleted=!1,this._handleFirstRenderImpression(a,c),this._mapUserStatusToState(a),this._saveInProgressSA(a),b.initialiseCampaignData(a,c)?(c=this._setupModel(b.getPageLevelSA()),d.render(c,this.onFabAudioSpotStateUpdate.bind(this),this._errorCallBack.bind(this)),
this._logMetric(g.metrics.Render),this._setup(a)):this._logMetric(g.metrics.InvalidCampaign,a.identifier))},_handleFirstRenderImpression:function(b,c){if(f.isDefined(b.status)&&b.status!==q.userEvent.complete)b.firstRender=!1;else{b.firstRender=!0;b.status=q.userEvent.yetToOptIn;var d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(q.userEvent.yetToOptIn).build();a.handle(b.identifier,b.schedulingType,
"multi_page_shopping_aid",c,d);this._logMetric(g.metrics.FirstRender,b.identifier)}},_isCurrentPagePresentInCampaign:function(a,b){try{return f.isDefined(a.pages[b])}catch(D){return!1}},_setupModel:function(a){var c=b.getState();f.isDefined(c)&&c!==g.state.YetToOptIn||a.set({introductoryAnimation:!0});if(c===g.state.Enabled||c===g.state.Disabled||b.getType()===g.type.AutoPlay)c=a.get("supplementarySA")||[],c=c.filter(function(a){return"tool_tip"!==a.get("type")}),a.set({supplementarySA:c});return a},
_setup:function(a){b.getType()===g.type.AutoPlay&&!0===b.isFirstRender()&&setTimeout(this._playAudio,g.delays.AutoPlay);this._setupCompletionEvent(a);this._enableTriggers();l.registerPageTransitionEvents(b.getPageTransitionEvents(),r.onPageChange.bind(r))},_setupCompletionEvent:function(a){var c=b.getCompletionPage();c=f.parseJSONStringIfValid(c);f.isDefined(c)?l.registerMultiPageCompletionEvent(c,r.onCompletionEventFired.bind(r)):this._logCompletion(a)},_enableTriggers:function(){var a=b.getTriggers();
l.registerTriggers(a,r.onTriggerFired.bind(r));l.triggerPageLoadEvent()},_cleanUpResources:function(){l.deregisterTriggers();l.deregisterMultiPageCompletionEvent();d.dismiss()},_logCompletion:function(c,d){r.isCompletionCriteriaMet(d)&&(r.isExperienceCompleted=!0,d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(q.userEvent.complete).build(),a.handle(c.identifier,c.schedulingType,"multi_page_shopping_aid",
b.getCurrentPage(),d),d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(null).build(),a.handle(c.identifier,c.schedulingType,"multi_page_shopping_aid",b.getCurrentPage(),d),e.removeInProgressSA(b.getIdentifier()),b.getState()!==g.state.YetToOptIn&&r._logMetric(g.metrics.Complete))},onCompletionEventFired:function(a){r._logCompletion(r.multiPageSA,a)},isCompletionCriteriaMet:function(a){return f.isDefined(a)?
r.validateCompletionCriteria(a):b.isCompletionPage()},validateCompletionCriteria:function(a){return f.isDefined(a.data)&&f.isDefined(a.detail)&&f.isDefined(a.data.identifier)&&f.isDefined(a.detail.identifier)&&a.data.identifier===a.detail.identifier||(!f.isDefined(a.data)||!f.isDefined(a.data.identifier))&&!f.isDefined(a.detail)},onFabAudioSpotStateUpdate:function(a,e){a===c.successCode.UPDATE_SUCCESS?(a=b.getState(),a===g.state.YetToOptIn&&e===c.state.complete?(r._updateStateAndStatus(g.state.Enabled,
q.userEvent.optIn),l.triggerPageLoadEvent(),r._logMetric(g.metrics.OptIn)):a===g.state.Enabled&&e===c.state.pause?(r._updateStateAndStatus(g.state.Disabled,q.userEvent.optOut),r._logMetric(g.metrics.Disabled)):a===g.state.Disabled&&e===c.state.play&&(r._updateStateAndStatus(g.state.Enabled,q.userEvent.optIn),r._logMetric(g.metrics.Enabled))):a===c.errorCode.UPDATE_FAILED&&e===c.errorCode.AUTO_PLAY_NOT_SUPPORTED&&(r._logMetric(g.metrics.AutoPlayFailed),d.updateState(c.state.autoPlayFailed,r._successCallBack.bind(r),
r._errorCallBack.bind(r)))},_updateStateAndStatus:function(c,d){b.updateState(c);r.isExperienceCompleted||(e.updateInProgressSA(b.getIdentifier(),c,d),c=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(d).build(),a.handle(b.getIdentifier(),this.schedulingType,"multi_page_shopping_aid",b.getCurrentPage(),c))},onTriggerFired:function(a){if(b.getState()!==g.state.YetToOptIn){var e=a.get("targetSA").get("type"),
f=a.get("targetSA").get("identifier");"FabAudioSpot"!==e||f===d.getIdentifier()&&d.getState()===c.state.play||(e=a.get("type"),r._pauseAudio(),d.updateModel(a.get("targetSA"),r._successCallBack.bind(r),r._errorCallBack.bind(r)),r._logMetric(g.metrics.TriggerFired,f),b.getState()===g.state.Enabled&&("OnFocus"===e?r._isInputFieldEmpty(a.get("anchor"))&&r._playAudio():r._playAudio()))}},onPageChange:function(){r._cleanUpResources();setTimeout(function(){var a=m.pageAdapter();e.init();var c=e.getInProgressSAByIdentifier(b.getIdentifier());
f.isDefined(c)&&t.isShoppingAidEligible(c)&&p.isUIGuardRailMet(c)&&r.display(c,a)},g.delays.ResourcesRegistration)},_playAudio:function(){d.updateState(c.state.play,r._successCallBack.bind(r),r._errorCallBack.bind(r))},_pauseAudio:function(){d.getState()===c.state.play&&d.updateState(c.state.pause,r._successCallBack.bind(r),r._errorCallBack.bind(r))},_isInputFieldEmpty:function(a){a=k.$(a);return f.isDefined(a)&&f.isDefined(a.val())?0===a.val().trim().length:!1},_logMetric:function(a,c){c=c||b.getIdentifier();
h.incrementCounterWithLOPPlatformAndCombination(g.metrics.Prefix+a,1,c)},_saveInProgressSA:function(a){e.isInProgressSA(a.identifier)||e.addInProgressSA(a)},_mapUserStatusToState:function(a){f.isDefined(a.status)&&a.status!==q.userEvent.yetToOptIn&&a.status!==q.userEvent.complete?a.status===q.userEvent.optIn?a.state=g.state.Enabled:a.status===q.userEvent.optOut?a.state=g.state.Disabled:this._logMetric(g.metrics.UndefinedStatus):a.state=g.state.YetToOptIn},_successCallBack:function(a){},_errorCallBack:function(a){},
isBrowserSupported:function(){return n.isLocalStorageExposed()&&u.Audio}};return r})})();(function(){n.register("MultiPageSAConstants",function(){return{delays:{AutoPlay:1E3,ResourcesRegistration:200},state:{YetToOptIn:"YetToOptIn",Enabled:"Enabled",Disabled:"Disabled"},type:{AutoPlay:"AutoPlay",TapAndPlay:"TapAndPlay"},metrics:{Prefix:"MultiPageSA_",Render:"render",FirstRender:"first_render",OptIn:"opt_in",Disabled:"disabled",Enabled:"enabled",TriggerFired:"trigger_fired",Complete:"complete",InvalidCampaign:"invalid_campaign",
AutoPlayFailed:"autoplay_failed",UndefinedStatus:"undefined_status"}}})})();(function(){n.when("A","jQuery","ShoppingAidsGenericUtils","SATriggerResolver").register("TriggerHandler",function(k,b,a,e){var f={OnFocus:"focus.shopping_aids",OnSelected:"change.shopping_aids",OnClick:"click.shopping_aids",OnPageLoad:"SAPageLoad.shopping_aids",OnPartnerEvent:"partnerEvent.shopping_aids",OnAudioPlay:"PLAY_STATE.shopping_aids",OnAudioPause:"PAUSE_STATE.shopping_aids",OnAudioComplete:"COMPLETED.shopping_aids"},
d={},c=[],l=[],g,h,q,t=["hfc-events:BILL_PAY_AUTHENTICATOR_CHANGE"],m,r=function(c){a.isDefined(b(this).attr("type"))&&"checkbox"===b(this).attr("type")?b(this).is(":checked")&&p(c.data):p(c.data)},p=function(b){if(a.isDefined(b)){if(b.trigger.get("targetSA").get("triggerDependentTargeting")){var c=e.executeContextFilter(b.trigger.get("targetSA"));b.trigger.unset("targetSA");b.trigger.set({targetSA:c})}n();c=b.trigger.get("delay");var d=b.trigger.get("type");if(a.isDefined(c)||"OnPageLoad"===d)m=
setTimeout(function(){b.onAidsTriggeredCallback(b.trigger);n()},c||1E3);else b.onAidsTriggeredCallback(b.trigger)}},n=function(){a.isDefined(m)&&(clearTimeout(m),m=w)},u=function(b){return!!(a.isDefined(b.get("targetSA"))&&a.isDefined(b.get("targetSA").get("identifier"))&&a.isDefined(b.get("type"))&&f.hasOwnProperty(b.get("type")))},B=function(a){return-1===l.indexOf(a)},D={registerTriggers:function(b,d){a.isDefined(b)&&a.isDefined(d)&&"function"===typeof d&&b.filter(u).forEach(function(b){var e=
b.get("type"),f=b.get("event");if(a.isDefined(f)){var g="OnPartnerEvent"===e?k.on(f,function(){var a=b.get("delay")||500;b.set({delay:a});p({trigger:b,onAidsTriggeredCallback:d});-1!==t.indexOf(f)&&k.off(g.event,g.callback)}):k.on(f,function(){setTimeout(function(){D._bindEvent(b,d)},100)});c.push(g)}else D._bindEvent(b,d)})},_bindEvent:function(c,e){var g=c.get("targetSA").get("identifier"),h=c.get("type"),l=c.get("anchor")||document;g in d?(b(l).unbind(f[h]),b(l).bind(f[h],{trigger:c,onAidsTriggeredCallback:e},
k.throttle(r,1E3))):a.isDefined(b(l))&&(d[g]={triggerElement:l,eventType:f[h]},b(l).bind(f[h],{trigger:c,onAidsTriggeredCallback:e},k.throttle(r,1E3)))},triggerPageLoadEvent:function(){var a=new CustomEvent("SAPageLoad",{bubbles:!0,cancelable:!1,detail:w});document.dispatchEvent(a)},deregisterTriggers:function(){for(var e in d)if(d.hasOwnProperty(e)&&a.isDefined(d[e])){var f=d[e];b(f.triggerElement).unbind(f.eventType)}c.forEach(function(a){k.off(a.event,a.callback)});d={};c=[];n()},registerPageTransitionEvents:function(b,
c){a.isDefined(b)&&a.isDefined(c)&&"function"===typeof c&&b.filter(B).forEach(function(a){k.on(a,function(){c();l.push(a)})})},registerMultiPageCompletionEvent:function(c,d){a.isDefined(c)&&a.isDefined(c.eventType)&&a.isDefined(d)&&"function"===typeof d&&(h=c.anchor||document,g=c.eventType,"OnPartnerEvent"===g?q=k.on(c.event,d):b(h).bind(f[g],{identifier:c.identifier},d))},deregisterMultiPageCompletionEvent:function(){a.isDefined(h)&&a.isDefined(g)&&(b(h).unbind(f[g]),g=h=w);a.isDefined(q)&&(k.off(q.event,
q.callback),q=w)}};return D})})();(function(){n.when("A","AssistedShoppingDataParser").register("SATriggerResolver",function(k,b){return{executeContextFilter:function(a){var e=a.get("triggerDependentTargeting");a.set({clientSideTargetting:e});a.unset("triggerDependentTargeting");a=k.parseJSON(a.toJson());return b.parseShoppingAidJSON(a)}}})})();(function(){n.register("SAFabAudiospotConstants",function(){return{timer:{elongationTimer:3E3,supplementarySAThrottleTimer:50},template:{pulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-dynamic-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: none;top:7px;left:7px;text-align:center;transform: scale(1);animation: pulse 1.5s 0.2s infinite;} .sa_fabAudiospot-pulse-dynamic-background:after{ content: none;} @keyframes pulse {0% { transform: scale(1); } 70% { transform: scale(1.25); } 100% { transform: scale(1); }}\x3c/style\x3e",
innerCircle:"\x3cstyle\x3e.sa_fabAudiospot-pulse-static-background-inner{ border-color : #fff;border-radius: 50%;width: 34px;height: 34px;background-color: #fff; position:absolute;display: table-cell;top:11px;left:11px;text-align:center;transform: scale(1.2);opacity:0.15;}\x3c/style\x3e",staticPulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-static-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: table-cell;top:7px;left:7px;text-align:center;transform: scale(1.2);opacity:0.15} \x3c/style\x3e",
dynamicPulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-initial-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: none;top:7px;left:7px;text-align:center;transform: scale(1.2);opacity:0.25;animation: initialPulse 1.5s 0.2s infinite;} @keyframes initialPulse {0% { transform: scale(1); } 70% { transform: scale(1.25); } 100% { transform: scale(1); }} \x3c/style\x3e",animatingSpeaker:"\x3cstyle\x3e.sa_fabaudiospot-image { height: 54px; width: 54px; position: relative; overflow: hidden; display: none;margin-left: 7px;margin-top: 8px;z-index:100 } .sa_fabaudiospot-image span{ display: block; width: 14px; height: 14px; background: #fff; margin: 17px 0 0 3px; } .sa_fabaudiospot-image span:after { content: ''; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 15px 20px 15px 21px; left: -15px; top: 9px; } .sa_fabaudiospot-image span:before { transform: rotate(45deg); border-radius: 0 26px 0 0; content: ''; position: absolute; width: 8px; height: 8px; border-style: double; border-color: #fff; border-width: 13px 13px 0 0; left: 29px; top: 14px; transition: all 0.2s ease-out;animation: pulse1 1.5s 0.2s infinite;}@keyframes pulse1 {0% { border-style: solid; width: 8px; height: 8px;border-width: 4px 4px 0 0;left: 25px; top: 18px; } 50% { border-style: double; } 100% { border-style: none; }}\x3c/style\x3e",
staticSpeaker:"\x3cstyle\x3e.sa_fabaudiospot-image-static { height: 39px; width: 39px; position: relative; overflow: hidden; display: inline-block;margin-left:10px;margin-top: 10px;z-index:100 } .sa_fabaudiospot-image-static span{ display: block; width: 10.5px; height: 10.5px; background: #fff; margin: 12.75px 0 0 2.25px; } .sa_fabaudiospot-image-static span:after { content: ''; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 11.25px 15px 11.25px 15.75px; left: -11.25px; top: 6.75px; } .sa_fabaudiospot-image-static span:before { transform: rotate(45deg); border-radius: 0 19.5px 0 0; content: ''; position: absolute; width: 6px; height: 6px; border-style: double; border-color: #fff; border-width: 9px 9px 0 0; left: 21px; top: 10px; transition: all 0.2s ease-out;}\x3c/style\x3e"},
style:{FABaudiospotStyle:".sa_fabaudiospot-container{ background:#007185; position:fixed; bottom:50%; left:0px;  box-sizing:border-box; display:table; box-shadow:0px 2px 7px #F0F2F2; z-index:490; opacity:1;margin-right: 0px; border-top-left-radius: 32px; border-bottom-left-radius: 32px;transition: margin-left 0s cubic-bezier(0.65, 0, 0.076, 1); }.sa_fabaudiospot-content{display:flex;align-items: center;vertical-align: middle;} .sa_fabaudiospot-image-container{display:table-cell;vertical-align:top;width:56px;height:56px}.sa_fabaudiospot-text-container{display:flex;flex-direction: column;justify-content: center;padding-left:10px;padding-right: 120px; transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);}.sa_fabaudiospot-text{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:clip;white-space:nowrap;color:#fff}#sa_fabAudiospot-dynamic-pulse{overflow:auto}.sa_fabAudiospot-pulse-dynamic-background{position:relative;z-index:99;padding:10px;opacity:0.15;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.sa_fabAudiospot-pulse-dynamic-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d} .sa_fabaudiospot-pause{border: 0; background: transparent; box-sizing: border-box; width: 0; height: 22px; border-color: transparent transparent transparent #fff; transition: 100ms all ease; border-style: double; border-width: 0px 0 0px 20px;position:relative;z-index:1;left:17px;top:17px;display:none;margin-right: 30px}"},
errorCode:{ALREADY_RENDERED:"Already_Rendered",UPDATE_FAILED:"Update_Failed",DISMISS_FAILED:"Dimiss_Failed",AUDIO_NOT_SUPPORTED:"Audio_not_supported",STATE_NOT_SUPPORTED:"State_not_supported",PARAMETER_MISSING:"Mandatory_param_missing",AUTO_PLAY_NOT_SUPPORTED:"Auto_play_not_supported"},successCode:{UPDATE_SUCCESS:"Update_Success",DISMISS_SUCCESS:"Dismiss_Success",RENDER_SUCCESS:"Render_Success",STATE_UPDATE_SUCCESS:"Update_State_Success",AUTO_PLAY_SUPPORTED:"Auto_play_supported"},constants:{expandedTextSplitter:"|",
defaultAudioPlayFeedbackText:"Audio On",defaultAudioPauseFeedbackText:"Audio Off",defaultAutoPlayFallbackText:"Tap for Help",fabAudiospotElongateMarginLeft:"0px",fabAudiospotFallbackContractMarginLeft:"-13px",fabAudiospotDefaultImageWidth:55,fabAudiospotDefaultTransitionDelay:"2s",fabAudiospotTextMarginConstant:25,fabAudiospotNegation:-1,fabAudiospotZIndex:490,fabAudiospotForegroundZIndex:9E3,fabAudiospotBackgroundZIndex:390},CSSConstants:{fabAudiospotContainerIdentifier:"sa_fabaudiospot",fabAudiospotContainerClass:"sa_fabaudiospot-container",
fabAudiospotContentClass:"sa_fabaudiospot-content",fabAudiospotImageContainerIdentifier:"sa_fabaudiospot-image",fabAudiospotImageContainerClass:"sa_fabaudiospot-image-container",fabAudiospotInitialPulseIdentifier:"sa_fabAudiospot-pulse-initial-dynamic",fabAudiospotInitialPulseClass:"sa_fabAudiospot-pulse-initial-background",fabAudiospotPulseIdentifier:"sa_fabAudiospot-dynamic-pulse",fabAudiospotPulseClass:"sa_fabAudiospot-pulse-dynamic-background",fabAudiospotStaticPulseClass:"sa_fabAudiospot-pulse-static-background",
fabAudiospotStaticPulseIdentifier:"sa_fabAudiospot-static-pulse",fabAudiospotInnerStaticPulseIdentifier:"sa_fabAudiospot-static-pulse-inner",fabAudiospotInnerStaticPulseClass:"sa_fabAudiospot-pulse-static-background-inner",fabAudiospotSpeakerClass:"sa_fabaudiospot-image",fabAudiospotSpeakerIdentifiers:"sa_fabaudiospot-image-speaker",fabAudiospotStaticSpeakerClass:"sa_fabaudiospot-image-static",fabAudiospotStaticSpeakerIdentifier:"sa_fabaudiospot-image-static-speaker",fabAudiospotPauseIconIdentifier:"sa_fabaudiospot-pause-icon",
fabAudiospotPauseIconClass:"sa_fabaudiospot-pause",fabAudiospotTextContainerClass:"sa_fabaudiospot-text-container",fabAudiospotTextClass:"sa_fabaudiospot-text",fabAudiospotTextIdentifier:"sa_fabaudiospot-text-id"},state:{play:"PLAY_STATE",pause:"PAUSE_STATE",complete:"COMPLETED",autoPlayFailed:"AUTOPLAY_FAILED"},metrics:{PREFIX:"SA_FABAUDIOSPOT_",PLAY:"PLAYED",PAUSE:"PAUSED",REPLAY:"REPLAYED",COMPLETE:"COMPLETED",ERROR:"ERROR",STALLED:"STALLED",SUSPEND:"SUSPENDED",WAITING:"WAITING",ABORT:"ABORT",
LOADED:"LOADED",USER_PAUSE:"USER_PAUSE",NON_USER_PAUSE:"NON_USER_PAUSE",USER_PLAY:"USER_PLAY",USER_REPLAY:"USER_REPLAY",ENABLED_BOTTOMSHEET:"ENABLED_BOTTOMSHEET",ENABLED_POPOVER:"ENABLED_POPOVER",DISABLED_OVERLAY:"DISABLED_OVERLAY"},overlay:{BOTTOM_SHEET:"bottomsheet",POP_OVER:"popover"}}})})();(function(){n.when("A","jQuery","SAFabAudiospotConstants","QTipLibrary","ShoppingAidsGenericUtils").register("SAFabAudiospotRenderer",function(k,b,a,e,f){k={addStyles:function(){f.addStyleToHead(a.style.FABaudiospotStyle)}};
e=e.View.extend({container:w,create:function(b){var c=document.createElement("div");c.id=a.CSSConstants.fabAudiospotContainerIdentifier;c.classList.add(a.CSSConstants.fabAudiospotContainerClass);var d=document.createElement("div");d.classList.add(a.CSSConstants.fabAudiospotContentClass);var e=document.createElement("div");e.id=a.CSSConstants.fabAudiospotImageContainerIdentifier;e.classList.add(a.CSSConstants.fabAudiospotImageContainerClass);var f=document.createElement("div");f.id=a.CSSConstants.fabAudiospotInitialPulseIdentifier;
f.classList.add(a.CSSConstants.fabAudiospotInitialPulseClass);f.innerHTML=a.template.dynamicPulse;var k=document.createElement("div");k.classList.add(a.CSSConstants.fabAudiospotPulseClass);k.id=a.CSSConstants.fabAudiospotPulseIdentifier;k.innerHTML=a.template.pulse;var t=document.createElement("div");t.classList.add(a.CSSConstants.fabAudiospotInnerStaticPulseClass);t.id=a.CSSConstants.fabAudiospotInnerStaticPulseIdentifier;t.innerHTML=a.template.innerCircle;var m=document.createElement("div");m.classList.add(a.CSSConstants.fabAudiospotStaticPulseClass);
m.id=a.CSSConstants.fabAudiospotStaticPulseIdentifier;m.innerHTML=a.template.staticPulse;var r=document.createElement("div");r.id=a.CSSConstants.fabAudiospotSpeakerIdentifier;r.classList.add(a.CSSConstants.fabAudiospotSpeakerClass);var p=document.createElement("span");p.innerHTML=a.template.animatingSpeaker;var n=document.createElement("div");n.id=a.CSSConstants.fabAudiospotStaticSpeakerIdentifier;n.classList.add(a.CSSConstants.fabAudiospotStaticSpeakerClass);var u=document.createElement("span");
u.innerHTML=a.template.staticSpeaker;var w=document.createElement("div");w.id=a.CSSConstants.fabAudiospotPauseIconIdentifier;w.classList.add(a.CSSConstants.fabAudiospotPauseIconClass);r.appendChild(p);n.appendChild(u);e.appendChild(k);e.appendChild(t);e.appendChild(m);e.appendChild(f);e.appendChild(n);e.appendChild(w);f=document.createElement("div");f.classList.add(a.CSSConstants.fabAudiospotTextContainerClass);k=document.createElement("p");k.id=a.CSSConstants.fabAudiospotTextIdentifier;k.classList.add(a.CSSConstants.fabAudiospotTextClass);
k.innerText=b;f.appendChild(k);d.appendChild(e);d.appendChild(f);c.appendChild(d);this.container=c}});k.createFabAudiospot=new e;k.addStyles();return k})})();(function(){n.when("A","jQuery","QTipLibrary","ShoppingAidsGenericUtils","FabAudiospotStateManager","SAFabAudiospotConstants","ShoppingAidsAudioUtils","NestedShoppingAidHelper","SAFabAudiospotUIManager","SAFabAudiospotRenderer","QTipsMetrics","QTips","AssistedShoppingDataManager").execute(function(k,b,a,e,f,d,c,l,g,h,q,t,m){k=a.View.extend({createFabAudiospot:h.createFabAudiospot,
model:w,render:function(a,b){if(this.createFabAudiospot.container)throw q.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.errorCode.ALREADY_RENDERED),d.errorCode.ALREADY_RENDERED;this.model=a;this._validateModel(this.model);this._splitExpandedText();this.createFabAudiospot.create(this.model.get("audioPlayFeedbackText"));f.configureAudio(this.model,b);this._displayFabAudiospot();e.isDefined(this.model.get("introductoryAnimation"))&&this.model.get("introductoryAnimation")&&g.introductoryAnimation();
this._attachClickListener();c.handleVisibility(f.getCurrentState.bind(f),f.setState.bind(f));q.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.successCode.RENDER_SUCCESS)},update:function(a){if(this._validateModel(a))this._updateIdentifier(a.get("identifier")),this._updateSupplementarySA(a.get("supplementarySA")),f.updateAudioSrc(a.get("audioSrc")),f.setElongateFabAudiospot(a.get("expandFabAudiospot")),q.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.successCode.UPDATE_SUCCESS);
else throw q.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.errorCode.UPDATE_FAILED),d.errorCode.UPDATE_FAILED;},getIdentifier:function(){return this.model.get("identifier")},isFabAudiospotPresent:function(){return e.isDefined(this.createFabAudiospot.container)},dismiss:function(){f.setState(f.pause,!1);c.removeVisibilityChangeListener();document.body.removeChild(this.createFabAudiospot.container);this.createFabAudiospot.container=w;this._dismissSupplementarySA();f.resetModuleVariables();
f.audio=null;q.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_dismissed")},_displayFabAudiospot:function(){document.body.appendChild(this.createFabAudiospot.container);g.cacheElements();this._adjustPosition();this._renderSupplementarySA();g.enableTransition()},_attachClickListener:function(){b(this.createFabAudiospot.container).click(function(){f.getCurrentState()===f.pause?(f.setState(f.play,!0),g.elongateShortenAnimation()):f.getCurrentState()===f.play?(f.setState(f.pause,!0),g.elongateShortenAnimation()):
f.getCurrentState()===f.complete?f.setState(f.play,!0):f.getCurrentState()===f.autoPlayFailed&&f.setState(f.play,!0)})},_updateIdentifier:function(a){this.model.set({identifier:a});f.setIdentifier(a)},_updateSupplementarySA:function(a){this.model.set({supplementarySA:a});this._renderSupplementarySA()},_dismissSupplementarySA:function(){f.dismissAllRenderingSupplementarySA()},_splitExpandedText:function(){if(this.model.get("expandedText")){var a=this.model.get("expandedText"),b=a.split(d.constants.expandedTextSplitter)[0];
if((a=a.split(d.constants.expandedTextSplitter)[1])&&b){this.model.set({audioPlayFeedbackText:b});this.model.set({audioPauseFeedbackText:a});return}}this.model.set({audioPlayFeedbackText:d.constants.defaultAudioPlayFeedbackText});this.model.set({audioPauseFeedbackText:d.constants.defaultAudioPauseFeedbackText})},_adjustPosition:function(){e.isDefined(this.model.get("positionY"))&&(b("#sa_fabaudiospot")[0].style.bottom=this.model.get("positionY").toString()+"%");b("#sa_fabaudiospot")[0].style.left=
(screen.width-d.constants.fabAudiospotDefaultImageWidth).toString()+"px";b("#sa_fabaudiospot")[0].style.marginLeft=d.constants.fabAudiospotElongateMarginLeft},_renderSupplementarySA:function(){var a=[];if(this.model.get("supplementarySA"))for(var b=0;b<this.model.get("supplementarySA").length;b++)this.model.get("supplementarySA")[b].has("from")&&this.model.get("supplementarySA")[b].has("to")?a.push(this.model.get("supplementarySA")[b]):l.dispatchShoppingAidEvent(this.model.get("supplementarySA")[b]);
f.setTimeUpdateSupplementarySAList(a);a.length&&f.audioEventListenerForTimeUpdate();q.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_supplementarySA_displayed")},_validateModel:function(a){if(!e.isDefined(a.get("identifier"))||!e.isDefined(a.get("audioSrc")))throw d.errorCode.PARAMETER_MISSING;return!0},handlerOverlay:function(a,e){this.isFabAudiospotPresent()&&(e===d.overlay.BOTTOM_SHEET&&this._isCurrentBottomSheetEnabled(a)||e===d.overlay.POP_OVER&&this._isCurrentPopOverEnabled(a)?(b("#sa_fabaudiospot")[0].style.zIndex=
d.constants.fabAudiospotForegroundZIndex,q.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_"+(e===d.overlay.BOTTOM_SHEET?d.metrics.ENABLED_BOTTOMSHEET:d.metrics.ENABLED_POPOVER)+"_"+(e===d.overlay.BOTTOM_SHEET?a.sheet._name:a.popover._name))):(b("#sa_fabaudiospot")[0].style.zIndex=d.constants.fabAudiospotBackgroundZIndex,c.handleOverlay(f.getCurrentState.bind(f),f.setState.bind(f),this.getIdentifier()),q.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_"+d.metrics.DISABLED_OVERLAY)))},
handlerOverlayDismiss:function(a,e){this.isFabAudiospotPresent()&&(e===d.overlay.BOTTOM_SHEET&&this._isCurrentBottomSheetEnabled(a)||e===d.overlay.POP_OVER&&this._isCurrentPopOverEnabled(a)||(c.handleOverlayDismiss(f.getCurrentState.bind(f),f.setState.bind(f),h.renderer.getIdentifier.bind(h.renderer)),this.userInteraction=!1),b("#sa_fabaudiospot")[0].style.zIndex=d.constants.fabAudiospotZIndex)},_isCurrentBottomSheetEnabled:function(a){return e.isDefined(a)&&e.isDefined(a.sheet._name)&&e.isDefined(m.getEnabledBottomSheets())&&
-1!==m.getEnabledBottomSheets().indexOf(a.sheet._name)},_isCurrentPopOverEnabled:function(a){return e.isDefined(a)&&e.isDefined(a.popover._name)&&e.isDefined(m.getEnabledPopOvers())&&-1!==m.getEnabledPopOvers().indexOf(a.popover._name)}});h.renderer=new k;return h})})();(function(){n.when("A","SAFabAudiospotRenderer","SAFabAudiospotConstants","QTipsConstants","FabAudiospotStateManager").register("SAFabAudiospot",function(k,b,a,e,f){return{render:function(a,c,e){try{b.renderer.render(a,c)}catch(g){e&&
"function"===typeof e&&e(g)}},updateModel:function(d,c,e){try{b.renderer.update(d),c&&"function"===typeof c&&c(a.successCode.UPDATE_SUCCESS)}catch(g){e&&"function"===typeof e&&e(g)}},getState:function(){return f.getCurrentState()},updateState:function(b,c,e){try{f.setState(b),c&&"function"===typeof c&&c(a.successCode.STATE_UPDATE_SUCCESS)}catch(g){e&&"function"===typeof e&&e(g)}},getIdentifier:function(){return b.renderer.getIdentifier()},dismiss:function(d,c){try{b.renderer.dismiss(),d&&"function"===
typeof d&&d(a.successCode.DISMISS_SUCCESS)}catch(l){c&&"function"===typeof c&&c(a.errorCode.DISMISS_FAILED)}},dismissWithId:function(a,c,f){b.renderer.isFabAudiospotPresent()&&this.getIdentifier()===a?this.dismiss(c,f):f&&"function"===typeof f&&f(e.errorCodes.SA_NOT_DISPLAYED)}}})})();(function(){n.when("A","jQuery","SAFabAudiospotConstants","ShoppingAidsAudioUtils","ShoppingAidsGenericUtils","SAFabAudiospotUIManager","NestedShoppingAidHelper","QTipsConstants","SAMetricUtils").register("FabAudiospotStateManager",
function(k,b,a,e,f,d,c,l,g){var h={play:a.state.play,pause:a.state.pause,complete:a.state.complete,autoPlayFailed:a.state.autoPlayFailed,audioPlayFeedbackText:"",audioPauseFeedbackText:"",audioFallbackText:"",stateUpdateCallback:w,elongateFabAudiospot:!1,identifier:w,replayed:!1,timeUpdateSupplementarySAList:[],timeUpdateSupplementarySAListIndex:0,isTimeUpdateEventListenerAdded:!1,currentlyRenderingSupplementarySAList:[],lastAudioTimeUpdateCall:0,configureAudio:function(b,c){if(e.isAudioSupported())h.audio=
new Audio,h.audio.src=b.get("audioSrc"),h.state=this.pause,this.audioPlayFeedbackText=b.get("audioPlayFeedbackText"),this.audioPauseFeedbackText=b.get("audioPauseFeedbackText"),this.stateUpdateCallback=c,this.elongateFabAudiospot=b.get("expandFabAudiospot"),this.identifier=b.get("identifier"),this.audioFallbackText=b.get("fallbackText"),this._audioEventListeners();else throw a.errorCode.AUDIO_NOT_SUPPORTED;},triggerEvent:function(a){a=new CustomEvent(a,{bubbles:!0,cancelable:!1,detail:{identifier:h.identifier}});
document.dispatchEvent(a)},_updateState:function(a){switch(h.state){case this.play:this._togglePlay(a);break;case this.pause:this._togglePause(this.pause,a);break;case this.complete:this._togglePause(this.complete);break;case this.autoPlayFailed:d.autoPlayFallbackCSS(this.audioFallbackText)}},_togglePlay:function(b){var c=h.audio.play();f.isDefined(c)&&c.then(function(){h.triggerEvent(h.play);d.updatePlayCSS(h.audioPlayFeedbackText);d.adjustView();h.replayed?(g.incrementCounterWithPlatform(a.metrics.PREFIX+
a.metrics.REPLAY,1,h.identifier),f.isDefined(b)&&!0===b&&g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_REPLAY,1,h.identifier)):(g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.PLAY,1,h.identifier),f.isDefined(b)&&!0===b&&g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_PLAY,1,h.identifier))}).catch(function(b){h.stateUpdateCallback(a.errorCode.UPDATE_FAILED,a.errorCode.AUTO_PLAY_NOT_SUPPORTED)})},_togglePause:function(b,c){if(b===this.pause){h.audio.pause();
h.triggerEvent(h.pause);var e=h.audio.currentTime;h.audio.currentTime=0;g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.PAUSE,e,this.identifier);f.isDefined(c)&&!0===c?g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_PAUSE,1,this.identifier):g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.NON_USER_PAUSE,1,this.identifier)}d.updateAudioStoppedCSS(this.audioPauseFeedbackText,b);h.dismissAllRenderingSupplementarySA()},_audioEventListeners:function(){h.audio.addEventListener("ended",
function(){h.setState(h.complete,!0);h.triggerEvent(h.complete);h.replayed=!0;h.dismissAllRenderingSupplementarySA();g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.COMPLETE,1,h.identifier)});h.audio.addEventListener("stalled",function(){g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.STALLED,1,h.identifier)});h.audio.addEventListener("waiting",function(){g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.WAITING,1,h.identifier)})},_processSupplementarySA:function(){if(0<
h.audio.currentTime&&h.getCurrentState()===h.play){for(var a=h.audio.currentTime*l.secondToMillisecondConversion,b=0;b<h.currentlyRenderingSupplementarySAList.length;b++){var d=h.currentlyRenderingSupplementarySAList[b].get("to");f.isInRange(d,h.lastAudioTimeUpdateCall,a)&&(c.dispatchDismissShoppingAidEvent(h.currentlyRenderingSupplementarySAList[b].attributes),h.currentlyRenderingSupplementarySAList.splice(b,1),--b)}for(b=h.timeUpdateSupplementarySAListIndex;b<h.timeUpdateSupplementarySAList.length;b++)if(d=
h.timeUpdateSupplementarySAList[b].get("from"),f.isInRange(d,h.lastAudioTimeUpdateCall,a))h.currentlyRenderingSupplementarySAList.push(h.timeUpdateSupplementarySAList[b]),c.dispatchShoppingAidEvent(h.timeUpdateSupplementarySAList[b]),h.timeUpdateSupplementarySAListIndex=b+1;else break;h.lastAudioTimeUpdateCall=a}},audioEventListenerForTimeUpdate:function(){var b=a.timer.supplementarySAThrottleTimer;h.isTimeUpdateEventListenerAdded||(h.audio.addEventListener("timeupdate",k.throttle(this._processSupplementarySA,
b)),h.isTimeUpdateEventListenerAdded=!0)},setTimeUpdateSupplementarySAList:function(a){this.timeUpdateSupplementarySAList=a},dismissAllRenderingSupplementarySA:function(){for(var a=0;a<h.currentlyRenderingSupplementarySAList.length;a++)c.dispatchDismissShoppingAidEvent(h.currentlyRenderingSupplementarySAList[a].attributes);this._resetCurrentlyRenderingSupplementarySAList()},_resetCurrentlyRenderingSupplementarySAList:function(){h.currentlyRenderingSupplementarySAList=[];h.timeUpdateSupplementarySAListIndex=
0;h.lastAudioTimeUpdateCall=0},getCurrentState:function(){return h.state},updateAudioSrc:function(a){h.audio.src=a;this.replayed=!1},setState:function(b,c){f.isDefined(b)&&(h.state=b);this._updateState(c);this._expandFabAudiospot();f.isDefined(this.stateUpdateCallback)&&"function"===typeof this.stateUpdateCallback&&c&&this.stateUpdateCallback(a.successCode.UPDATE_SUCCESS,h.state)},setElongateFabAudiospot:function(a){this.elongateFabAudiospot=a},_expandFabAudiospot:function(){this.elongateFabAudiospot&&
(d.elongateShortenAnimation(),this.elongateFabAudiospot=!1)},setIdentifier:function(a){this.identifier=a},resetModuleVariables:function(){this.replayed=!1;this.timeUpdateSupplementarySAList=[];this.isTimeUpdateEventListenerAdded=!1}};return h})})();(function(){n.when("A","jQuery","SAFabAudiospotConstants","ShoppingAidsGenericUtils").register("SAFabAudiospotUIManager",function(k,b,a,e){var f={elementIdStore:[],cacheElements:function(){this.elementIdStore.fabAudiospot=b("#sa_fabaudiospot");this.elementIdStore.fabAudiospotText=
b("#sa_fabaudiospot-text-id");this.elementIdStore.fabAudiospotPause=b("#sa_fabaudiospot-pause-icon");this.elementIdStore.fabAudiospotSpeaker=b("#sa_fabaudiospot-image-static-speaker");this.elementIdStore.fabAudiospotDynamicPulse=b("#sa_fabAudiospot-dynamic-pulse");this.elementIdStore.fabAudiospotStaticPulse=b("#sa_fabAudiospot-static-pulse");this.elementIdStore.fabAudiospotInnerStaticPulse=b("#sa_fabAudiospot-static-pulse-inner");this.elementIdStore.fabAudiospotInitialPulse=b("#sa_fabAudiospot-pulse-initial-dynamic")},
updatePlayCSS:function(a){b(this.elementIdStore.fabAudiospotText)[0].innerText=a;b(this.elementIdStore.fabAudiospotPause).show();b(this.elementIdStore.fabAudiospotSpeaker).hide();b(this.elementIdStore.fabAudiospotDynamicPulse).show();b(this.elementIdStore.fabAudiospotStaticPulse).hide();b(this.elementIdStore.fabAudiospotInnerStaticPulse).hide();b(this.elementIdStore.fabAudiospotInitialPulse).hide()},updateAudioStoppedCSS:function(d,c){c===a.state.pause&&(b(this.elementIdStore.fabAudiospotText)[0].innerText=
d);b(this.elementIdStore.fabAudiospotPause).hide();b(this.elementIdStore.fabAudiospotSpeaker).show();b(this.elementIdStore.fabAudiospotDynamicPulse).hide();b(this.elementIdStore.fabAudiospotStaticPulse).show();b(this.elementIdStore.fabAudiospotInnerStaticPulse).show()},introductoryAnimation:function(){b(this.elementIdStore.fabAudiospotInitialPulse).show();b(this.elementIdStore.fabAudiospotStaticPulse).hide()},enableTransition:function(){b(this.elementIdStore.fabAudiospot)[0].style.transitionDuration=
a.constants.fabAudiospotDefaultTransitionDelay},elongateShortenAnimation:function(){b(this.elementIdStore.fabAudiospot)[0].style.marginLeft=f.getLeftMargin();setTimeout(function(){f.enableTransition();b(f.elementIdStore.fabAudiospot)[0].style.marginLeft=a.constants.fabAudiospotElongateMarginLeft},a.timer.elongationTimer)},autoPlayFallbackCSS:function(d){b(this.elementIdStore.fabAudiospotText)[0].innerText=a.constants.defaultAutoPlayFallbackText;d&&(b(this.elementIdStore.fabAudiospotText)[0].innerText=
d);this.elongateShortenAnimation()},getLeftMargin:function(){var d=b(this.elementIdStore.fabAudiospotText)[0].offsetWidth;return(a.constants.fabAudiospotNegation*(d+a.constants.fabAudiospotTextMarginConstant)).toString()+"px"},adjustView:function(){e.isDefined(b(this.elementIdStore.fabAudiospot)[0].style.marginLeft)&&b(this.elementIdStore.fabAudiospot)[0].style.marginLeft!==a.constants.fabAudiospotElongateMarginLeft&&(b(this.elementIdStore.fabAudiospot)[0].style.marginLeft=this.getLeftMargin())}};
return f})})();(function(){n.when("A","jQuery","ShoppingAidsGenericUtils").register("ShoppingAidsAudioUtils",function(k,b,a){return{lastKnownState:w,lastKnownIdentifier:w,defaultOverlayTime:1E3,handleVisibility:function(a,f){b(document).bind("visibilitychange.fab_audio_spot",function(){document.hidden?(this.lastKnownState=a(),f("PAUSE_STATE")):(f(this.lastKnownState),this.lastKnownState=w)})},removeVisibilityChangeListener:function(){b(document).unbind("visibilitychange.fab_audio_spot")},isAudioSupported:function(){return u&&
u.Audio},handleOverlay:function(a,b,d){this.lastKnownState=a();b("PAUSE_STATE");this.lastKnownIdentifier=d},handleOverlayDismiss:function(b,f,d){var c=this;setTimeout(function(){a.isDefined(d)&&a.isDefined(c.lastKnownIdentifier)&&c.lastKnownIdentifier!==d()?c.lastKnownIdentifier=w:"PAUSE_STATE"===b()&&f(c.lastKnownState);c.lastKnownState=w},c.defaultOverlayTime)}}})})();(function(){n.when("A","jQuery","a-sheet","SAAudiospot","SAFabAudiospotRenderer","SAHotspot","ShoppingAidsGenericUtils","SAFabAudiospotConstants",
"a-popover","AnchorBasedSAUtils","QTipsConstants","QTips").execute(function(k,b,a,e,f,d,c,l,g,h,q,n){var m=!1;k.on("a:sheet:beforeShow",function(a){c.isDefined(e.view)&&c.isDefined(f.renderer)&&c.isDefined(d.view)&&(e.view.handleOverlay(),f.renderer.handlerOverlay(a,l.overlay.BOTTOM_SHEET),d.view.handleOverlay())});k.on("a:sheet:afterHide",function(a){c.isDefined(e.view)&&c.isDefined(f.renderer)&&c.isDefined(d.view)&&(e.view.handleOverlayDismiss(),f.renderer.handlerOverlayDismiss(a,l.overlay.BOTTOM_SHEET),
d.view.handleOverlayDismiss())});k.on("a:popover:beforeShow",function(a){c.isDefined(e.view)&&c.isDefined(f.renderer)&&c.isDefined(d.view)&&(e.view.handleOverlay(),f.renderer.handlerOverlay(a,l.overlay.POP_OVER),d.view.handleOverlay())});k.on("a:popover:afterHide",function(a){c.isDefined(e.view)&&c.isDefined(f.renderer)&&c.isDefined(d.view)&&(e.view.handleOverlayDismiss(),f.renderer.handlerOverlayDismiss(a,l.overlay.POP_OVER),d.view.handleOverlayDismiss())});0<b(".nav-input.nav-progressive-attribute").length&&
(b(".nav-input.nav-progressive-attribute").bind("focus",function(){this.intervalId=setInterval(function(){c.isDefined(e.view)&&c.isDefined(d.view)&&c.isDefined(n.view)&&(c.hasNoPopover(q.popOverAnchors.popoverClass,q.popOverAnchors.searchSugesstions,q.popOverAnchors.searchFilterPage)||m?c.hasNoPopover(q.popOverAnchors.popoverClass,q.popOverAnchors.searchSugesstions,q.popOverAnchors.searchFilterPage)&&(d.view.handleOverlayDismiss(),e.view.handleOverlayDismiss(),m=!1):(e.view.handleOverlay(),d.view.handleOverlay(),
n.view.dismissAndRender(),m=!0))},q.timer.searchSuggestionPollTime)}),b(".nav-input.nav-progressive-attribute").bind("focusout",function(){c.isDefined(this.intervalId)&&(clearInterval(this.intervalId),delete this.intervalId,c.isDefined(e.view)&&c.isDefined(d.view)&&(d.view.handleOverlayDismiss(),e.view.handleOverlayDismiss(),m=!1))}))})})();(function(){n.when("A","ContextAwareFieldsFactory","QTipsConstants","QTipsMetrics","SAMetricConstants","ContextAwareFieldsProcessor","ShoppingAidsGenericUtils").register("ContextAwareSubstitutor",
function(k,b,a,e,f,d,c){return{substitute:function(a,c,d){if(a.clientSideTargetting||a.desiredWeblabTreatment)a.contextAwareIndex=c;else return!0;return!0!==this.substituteGenericContextAwareFields(a,c)?!1:(d=b.getContextAwareFields(d))?this.substituteIndexedValueInSAData(a,d,c):!0},substituteGenericContextAwareFields:function(a,c){var d=b.getContextAwareFields("Generic");return this.substituteIndexedValueInSAData(a,d,c)},substituteIndexedValueInSAData:function(b,c,d){for(var g=0;g<c.length;g++){var h=
c[g];if(!k.objectIsEmpty(b[h])){var l=b[h].split(a.contextAwareSADelimiter);if(1<l.length)if(d<l.length)b[h]=l[d].trim(),this.processSubstituteField(b,h),e.incrementCounter(f.SA_CONTEXT_AWARE_SUBSTITUTION+b.identifier+"_"+h+"_"+d);else return e.incrementCounter(f.SA_CONTEXT_AWARE_SUBSTITUTION+b.identifier+"_"+h+f.FAIL),!1}}return!0},processSubstituteField:function(a,b){-1!==d.fields.indexOf(b)&&(-1!==d.fieldsParsersMap.stringToObject.indexOf(b)&&"string"===typeof a[b]?a[b]=c.parseJSONStringIfValid(a[b]):
-1!==d.fieldsParsersMap.stringToNumber.indexOf(b)&&"string"===typeof a[b]&&(a[b]=Number(a[b])))}}})})();(function(){n.when("A","ContextAwareFields").register("ContextAwareFieldsFactory",function(k,b){return{getContextAwareFields:function(a){return"Sparkles"===a?b.sparklesContextAwareFields:"ToolTips"===a?b.toolTipsContextAwareFields:"FabAudioSpot"===a?b.fabAudioSpotContextAwareFields:"Generic"===a?b.genericContextAwareFields:null}}})})();(function(){n.register("ContextAwareFields",function(){return{genericContextAwareFields:["nestedSAList",
"clientSideTargetting","desiredWeblabTreatment"],toolTipsContextAwareFields:["elementValue","elementAnchor","elementType"],sparklesContextAwareFields:"linkText descText targetEndPoint icon displayIcon displayText descriptionText".split(" "),fabAudioSpotContextAwareFields:["audioSrc","supplementarySA","positionY"]}})})();(function(){n.register("SASupportedMarketplaceConfig",function(){return{supportedMarketplace:{ATVPDKIKX0DER:"us",A2EUQ1WTGCTBG2:"ca",A1AM78C64UM0Y8:"mx",A2Q3Y263D00KWC:"br",A1F83G8C2ARO7P:"uk",
A1PA6795UKMFR9:"de",A13V1IB3VIYZZH:"fr",A1RKKUPIHCS9HS:"es",APJ6JRA9NG5V4:"it",A21TJRUUN4KGV:"in",A33AVAJ2PDY3EV:"tr",A2VIGQ35RCS4UG:"ae",A17E79C6D8DWNP:"sa",A1805IZSGTT6HS:"nl",ARBP9OOSHTCHU:"eg",A2NODRKZP88ZB9:"se",A1C3SOZRARQ6R3:"pl",AMEN7PMS3EDWL:"be",A1VC38T7YXB528:"jp",A39IBJ37TRP1C6:"au",A19VAU5U5O7RUS:"sg"}}})})();(function(){n.when("A","ShoppingAidsGenericUtils","PageResolver").register("SAMutationObserver",function(k,b,a){var e={_pageChangeObserver:w,attachPageChangeObserver:function(e,
d){b.isMutationObserverSupported()&&b.isDefined(d)&&b.isDefined(e)&&"function"===typeof e&&(this._pageChangeObserver=new u.MutationObserver(function(){var c=a.pageAdapter();b.isDefined(c)&&c!==d&&(d=c,e(c))}),this._handleVisibilityChange())},isPageChangeObserverAttached:function(){return b.isDefined(this._pageChangeObserver)},enablePageChangeObserver:function(){this.isPageChangeObserverAttached()&&this._pageChangeObserver.observe(document,{subtree:!0,childList:!0})},disconnectPageChangeObserver:function(){this.isPageChangeObserverAttached()&&
this._pageChangeObserver.disconnect()},cleanUpPageChangeObserver:function(){this._pageChangeObserver=w;k.$(document).unbind("visibilitychange.mutation_observer")},_handleVisibilityChange:function(){k.$(document).bind("visibilitychange.mutation_observer",function(){document.hidden?e.disconnectPageChangeObserver():e.enablePageChangeObserver()})}};return e})})();(function(){n.register("ContextAwareFieldsProcessor",function(){return{fields:["supplementarySA","positionY"],fieldsParsersMap:{stringToObject:["supplementarySA"],
stringToNumber:["positionY"]}}})})();(function(){n.when("A","SARateLimitingUtils","SARateLimitingConfig","SAMetricConstants","QTipsMetrics","ShoppingAidsGenericUtils","LocalStorageInterface").register("SARateLimitingInstrumentationHandler",function(k,b,a,e,f,d,c){return{localStorageKey:a.rateLimitingInstrumentationKey,fetchWindowIntervals:a.fetchWindowIntervals,rateLimitingInstrumentation:function(a,e){var f=d.defaultJSONIfUndefined(c.getFromLocalStorage(this.localStorageKey),{});a=b.updateFetchWindowConfig(a,
f);this._logMetricsForRateLimiting(a,e);c.setInLocalStorage(this.localStorageKey,JSON.stringify(a))},_logMetricsForRateLimiting:function(b,c){for(var d=0;d<this.fetchWindowIntervals.length;d++){var g=this.fetchWindowIntervals[d];g=e.SA_FETCH_RATE_LIMITING_PREFIX.concat(g,"_",b[g][a.countKey]);c?f.incrementCounter(g+e.STATUS_1):f.incrementCounter(g+e.STATUS_0)}}}})})();(function(){n.when("A","ShoppingAidsGenericUtils","SARateLimitingConfig").register("SARateLimitingUtils",function(k,b,a){return{fetchWindowIntervals:a.fetchWindowIntervals,
windowStartTimeKey:a.windowStartTimeKey,countKey:a.countKey,updateFetchWindowConfig:function(a,b){for(var d={},c=0;c<this.fetchWindowIntervals.length;c++){var e=this.fetchWindowIntervals[c];d[e]=this._updateFetchWindowConfigForInterval(a,b[e],e)}return d},_updateFetchWindowConfigForInterval:function(a,b,d){var c={};this.isFetchWindowActive(a,b,d)?(c[this.windowStartTimeKey]=b[this.windowStartTimeKey],c[this.countKey]=b[this.countKey]+1):(c[this.windowStartTimeKey]=a,c[this.countKey]=1);return c},
isFetchWindowActive:function(a,f,d){return b.isDefined(f)&&b.isDefined(f[this.windowStartTimeKey])?a-f[this.windowStartTimeKey]<6E4*d:!1}}})})();(function(){n.register("SARateLimitingConfig",function(){return{rateLimitingInstrumentationKey:"sa_fetch_window_config",fetchWindowIntervals:[5,10,15,30,60],countKey:"count",windowStartTimeKey:"windowStartTime"}})})();(function(){n.when("QTipsMetrics","ShoppingAidsGenericUtils","SAConfig").register("SAMetricUtils",function(k,b,a){return{currentLop:b.getCookie(a.cookies.language)||
a.defaultLoP,platform:b.platformCheck(),incrementCounterWithLOP:function(a,b,d){k.incrementCounter(a,b,d);k.incrementCounter(a+"_"+this.currentLop,b,d)},incrementCounterWithPlatform:function(a,b,d){k.incrementCounter(a,b,d);k.incrementCounter(a+"_"+this.platform,b,d)},incrementCounterWithLOPAndPlatform:function(a,b,d){k.incrementCounter(a,b,d);k.incrementCounter(a+"_"+this.currentLop,b,d);k.incrementCounter(a+"_"+this.platform,b,d)},incrementCounterWithLOPPlatformAndCombination:function(a,b,d){k.incrementCounter(a,
b,d);k.incrementCounter(a+"_"+this.currentLop,b,d);k.incrementCounter(a+"_"+this.platform,b,d);k.incrementCounter(a+"_"+this.platform+"_"+this.currentLop,b,d)},incrementLOPCounter:function(a,b,d){k.incrementCounter(a+"_"+this.currentLop,b,d)},incrementPlatformCounter:function(a,b,d){k.incrementCounter(a+"_"+this.platform,b,d)},incrementLOPPlatformCombinationCounter:function(a,b,d){k.incrementCounter(a+"_"+this.platform+"_"+this.currentLop,b,d)}}})})();(function(){n.when("ShoppingAidsFilters","PageResolver",
"QTipsMetrics","SAMetricConstants","SAMetricUtils","QTipsConstants").register("UIGuardRailFiltering",function(k,b,a,e,f,d){return{isUIGuardRailMet:function(c){a.incrementCounter(e.SA_CACHE_PREFIX+e.UI_GUARD_RAIL_FILTER+e.START);var d=b.pageAdapter();if(c.uiBasedGuardRail&&!k.excecuteClientSideTargetting(c.uiBasedGuardRail.trim()))return f.incrementCounterWithLOPPlatformAndCombination(e.UI_GUARD_RAIL_FILTER+e.FAIL,1,c.identifier),a.incrementCounter(e.UI_GUARD_RAIL_FILTER+e.FAIL+"_"+d,c.identifier),
!1;f.incrementCounterWithLOPPlatformAndCombination(e.UI_GUARD_RAIL_FILTER+e.PASS,1,c.identifier);a.incrementCounter(e.UI_GUARD_RAIL_FILTER+e.PASS+"_"+d,c.identifier);return!0}}})})();(function(){n.when("A","ShoppingAidsGenericUtils").register("HighPrioritySAListProvider",function(k,b){return{getHighPrioritySAList:function(a){var e=this._provideHighPrioritySA(a);return b.isDefined(e)?e:a},_provideHighPrioritySA:function(a){var e;k.each(a,function(a,d){a=k.filter(a,function(a){return!b.isDefined(e)&&
-1!==a.identifier.indexOf("GuidedTour")});b.isNonEmptyArray(a)&&(e={},e[d]=[a[0]])});return e}}})})();(function(){n.when("A","jQuery","ShoppingAidsGenericUtils","MwebAttributionHandler","QTipsMetrics").register("SAPAttributionHandler",function(k,b,a,e,f){function d(a){a[l]={};a[l]["native"]={};a[l].html={};return a}var c={},l;return{featureAttributionBootUp:function(b){l=b;b=a.getFromLocalStorage("SA_Attribution_Cache");a.isDefined(b)?c=a.parseJSONStringIfValid(b):(c=d(c),f.incrementCounter("SAAttribution_Local_Storage_Initialised"));
a.isDefined(c[l])||(c=d(c),f.incrementCounter("SAAttribution_Page_Level_Local_Storage_Initialised"));b=c;var g=l,k=c[l];for(p in k)if(k.hasOwnProperty(p)){var n=k[p],m;for(m in n)if(n.hasOwnProperty(m)){var r=n[m].lastLogImpressionTime;r=Math.abs(Date.now()-r);r=Math.round(r/36E5);n[m].timeElapsed=r;12<r&&(delete n[m],f.incrementCounter("SAAttribution_"+m+"_Deleted"))}}b[g]=k;var p=c[l].html;a.isDefined(p)?e.initiate(p):d(c);a.setInLocalStorage("SA_Attribution_Cache",JSON.stringify(c));f.incrementCounter("SAAttribution_initialised")},
enableFeatureAttribution:function(b){if(a.isDefined(b)&&a.isDefined(b.featureAttributionAnchor)&&a.isDefined(b.maxDisplayCount)&&a.isDefined(b.elementDisplayType)){var f={},g=b.identifier,k=b.featureAttributionAnchor,m=b.maxDisplayCount;b=b.elementDisplayType.toLowerCase();f[g]={};f[g].identifier=g;f[g].lastLogImpressionTime=Date.now();f[g].eventListenerAnchor=k;f[g].maxDisplayCount=m;f[g].timeElapsed=0;"html"===b&&(e.unbindListener(c[l].html[g]),a.isDefined(f)?e.initiate(f):d(c),c[l].html[g]=f[g]);
a.setInLocalStorage("SA_Attribution_Cache",JSON.stringify(c))}}}})})();(function(){n.when("A","jQuery","ShoppingAidsGenericUtils","SAAttributionMetricLogger","QTipsMetrics").register("MwebAttributionHandler",function(k,b,a,e,f){return{initiate:function(a){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c].eventListenerAnchor,f=a[c].maxDisplayCount,h=a[c].timeElapsed;0!==b(d).length&&b(d).bind("click.SAAttribution",{identifier:c,impressionCount:f,timeElapsed:h},e.logAttributionMetrics)}},unbindListener:function(d){a.isDefined(d)&&
(b(d.eventListenerAnchor).unbind("click.SAAttribution"),f.incrementCounter("SAAttribution_Mweb_Handler_Listener_Unbounded"),f.incrementCounter("SAAttribution_Mweb_Handler_Listener_Unbounded_"+d.identifier+"_"+d.eventListenerAnchor))}}})})();(function(){n.when("A","QTipsMetrics").register("SAAttributionMetricLogger",function(k,b){return{logAttributionMetrics:function(a){var e=a.data.identifier,f=a.data.timeElapsed,d="SA_ATTRIBUTION_"+e+"_"+a.data.impressionCount+"_Hour";e="SA_ATTRIBUTION_"+e+"_Hour";
2>=f?(b.incrementCounter(d+2),b.incrementCounter(d+4),b.incrementCounter(d+8),b.incrementCounter(d+12),b.incrementCounter(e+2),b.incrementCounter(e+4),b.incrementCounter(e+8)):2<f&&4>=f?(b.incrementCounter(d+4),b.incrementCounter(d+8),b.incrementCounter(d+12),b.incrementCounter(e+4),b.incrementCounter(e+8)):4<f&&8>=f?(b.incrementCounter(d+8),b.incrementCounter(d+12),b.incrementCounter(e+8)):b.incrementCounter(d+12);b.incrementCounter(e+12);b.incrementCounter("SA_ATTRIBUTION_"+a.data.impressionCount+
"_"+a.data.identifier);b.incrementCounter("SA_ATTRIBUTION_"+a.data.identifier)}}})})();(function(){n.when("ShoppingAidsGenericUtils","LocaleConfig","QTipsMetrics").register("LoPResolver",function(k,b,a){return{SA_LOP_PREFIX:"sa_lop_",LANG_META_TAG_LOP_METRIC:"lang_meta_tag_used",COOKIE_LOP_METRIC:"cookie_used",UNKNOWN_LOP_METRIC:"unknown_used",getCurrentLoP:function(){var b=this._formatLoP(this._retrieveLoPFromLangMetaTag());if(k.isDefined(b))return a.incrementCounter(this.SA_LOP_PREFIX+this.LANG_META_TAG_LOP_METRIC),
b;b=this._formatLocaleToLoP(this._retrieveLocaleFromCookie());if(k.isDefined(b))return a.incrementCounter(this.SA_LOP_PREFIX+this.COOKIE_LOP_METRIC),b;a.incrementCounter(this.SA_LOP_PREFIX+this.UNKNOWN_LOP_METRIC);return"unknown"},_retrieveLoPFromLangMetaTag:function(){try{var a=document.querySelector("html").getAttribute("lang");return k.isDefined(a)?a:null}catch(f){return null}},_retrieveLocaleFromCookie:function(){var a=k.getMarketplaceName();return k.getCookie(b.MarketplaceLocaleMap[a])},_formatLoP:function(a){if(!k.isDefined(a)||
-1===a.indexOf("-"))return null;a=a.split("-");return a[0]+"-"+a[1].toUpperCase()},_formatLocaleToLoP:function(a){return k.isDefined(a)&&-1!==a.indexOf("_")?a.replace("_","-"):null}}})})();(function(){n.register("LocaleConfig",function(){return{MarketplaceLocaleMap:{us:"lc-main",ca:"lc-acbca",mx:"lc-acbmx",br:"lc-acbbr",uk:"lc-acbuk",de:"lc-acbde",fr:"lc-acbfr",es:"lc-acbes",it:"lc-acbit","in":"lc-acbin",tr:"lc-acbtr",ae:"lc-acbae",sa:"lc-acbsa",nl:"lc-acbnl",eg:"lc-acbeg",se:"lc-acbse",pl:"lc-acbpl",
be:"lc-acbbe",jp:"lc-acbjp",au:"lc-acbau",sg:"lc-acbsg"}}})})()});
/* ******** */
(function(r){var g=window.AmazonUIPageJS||window.P,p=g._namespace||g.attributeErrors,h=p?p("SABottomSheetLibrary",""):g;h.guardFatal?h.guardFatal(r)(h,window):h.execute(function(){r(h,window)})})(function(r,g,p){(function(){r.when("A","a-sheet","SA_BottomSheetStyles","QTipLibrary","QTipsMetrics","QTipsConstants","vernacBSStyles","QTips","SAEndPointsConfig","LogImpressionManager","SAFeature","ShoppingAidsGenericUtils").register("SA_BottomSheet",function(h,v,x,q,c,m,y,n,e,l,z,u){var t=h.$,A=e.logImpressionEndPoint,
w={bottomSheet:"SA_BottomSheetObj"},f={isDefined:function(a){return null!==a&&a!==p},_getWindowLocationHref:function(){return g.location.href},getVernacContent:function(a){a=(new DOMParser).parseFromString(a,"text/html");a.getElementById("icp-btn-close-announce").removeAttribute("href");if(this.isApp){var b=a.getElementsByTagName("form");if(1<=b.length){b=b[0];var d=b.innerHTML,k=b.parentNode;k.removeChild(b);k.insertAdjacentHTML("beforeend",d)}else return c.incrementCounter("VernacBS_Content_Error"),
" "}b=a.getElementById("icp-sl-t-text");a.getElementById("icp-btn-save").insertAdjacentElement("afterend",b);b=document.createElement("div");b.id="customer-preferences";b.appendChild(a.getElementById("customer-preferences").getElementsByClassName("a-column a-span12")[0]);return b},isVernacSheet:function(a){return a&&-1!==a.indexOf("vernac")?!0:!1},addVernacEventHandlers:function(a){var b=this;t("#icp-btn-save").bind("click",a,function(d){var k=t("input[name\x3dLOP]:checked").val();c.incrementCounter("bottomSheet"+
d.data.currentBottomSheet+"_lopSet");c.incrementCounter("bottomSheet"+d.data.currentBottomSheet+k);c.incrementCounter("bottomSheet"+d.data.currentBottomSheet+b.getMetricTag()+"_lopSet");c.incrementCounter("bottomSheet"+d.data.currentBottomSheet+b.getMetricTag()+k);a.isApp&&r.when("mash","i18n").execute("vernac-update-native-pref",function(a,b){var d={marketplaceObfuscatedId:g.ue_mid,locale:k,failCallback:function(a){b.recordMetrics({metricName:"language-picker/continue/failed"})}};g&&g.ue_mid||c.incrementCounter("VernacBS_mId_Not_Available");
b.changeAppLocalizationPrefs(d);a.goBack()})});h.$("#icp-btn-close").bind("click",a,function(a){v.get(a.data.currentBottomSheet).hide();c.incrementCounter("bottomSheet"+a.data.currentBottomSheet+"_dimissedCancel");c.incrementCounter("bottomSheet"+a.data.currentBottomSheet+b.getMetricTag()+"_dismissedCancel")})},getQueryParam:function(a){try{for(var b=this.getSearchParams().split("\x26"),d=0;d<b.length;d++){var k=b[d].split("\x3d"),c=decodeURIComponent(k[0]),e=decodeURIComponent(k[1]);if(c===a)return e}}catch(C){}},
getMetricTag:function(){if(!this.isIndirectTraffic())return"direct";var a=this.getQueryParam("tag");return a?"_"+a:"_blank"},getSearchParams:function(){return g.location.search.substring(1)},isIndirectTraffic:function(){return!!this.getQueryParam("ext_vrnc")},logImpression:function(a,b,d,k,c){var e="bottom_sheet";if(u.isDefined(c)){var f=c.userEvent;var m=c.successCallback;var n=c.errorCallback;var g=c.contextAwareIndex}k&&(e="bottom_sheet:childSA");z.clientSideCaching?l.handle(a,d,e,b,c):(a={pageType:b,
shoppingAidsType:e,id:a,schedulingType:d},u.isDefined(f)&&(a.userEvent=f),u.isDefined(g)&&(a.contextAwareIndex=g),h.ajax(A,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:a,success:m,error:n}))},clearLocalStorage:function(a,b,d,e){if(this.isVernacSheet(a)){c.incrementCounter("bottomSheet_vernacSheet_called");if(!this.isLocalStorageExposed())return!1;var k=localStorage.getItem(w.bottomSheet);if(null===k)return!0;k=JSON.parse(k).elements;for(var f in k)f&&this.backFillLogData(k[f].count,
f,b);g.localStorage.removeItem(w.bottomSheet);if(!k[a])return!0;b=k[a].lastTimeStamp;f=Math.round((new Date).getTime()/36E5);return b+d<=f&&k[a].count<e?!0:!1}return!0},isLocalStorageExposed:function(){try{if(g.localStorage)return 1}catch(a){return g.ue.count("SA_LocalStorageNotExposed",1),0}},backFillLogData:function(a,b,d){c.incrementCounter("bottomSheet_vernacSheet_backFill_called");var k;for(k=0;k<a;k++)this.logImpression(b,d,"UBID")}};f.isIndirectTraffic()&&(c.incrementCounter("bottomSheet_"+
f.getQueryParam("ext_vrnc")),c.incrementCounter("bottomSheet"+f.getMetricTag()+"_"+f.getQueryParam("ext_vrnc")));e={addStyles:function(){var a=document.createElement("style");a.innerHTML=x;document.head.appendChild(a)}};e.model=new q.Model;e.utils=f;var B=q.Collection.extend({model:e.model,identifierList:[],schedulingKey:"schedulingType",add:function(a){if(f.isDefined(a)&&f.isDefined(a.get("maxDisplayCount"))&&0<a.get("maxDisplayCount")){var b=a.get("identifier");this.schedulingKey=a.get("schedulingType");
var d={};d[a.get("identifier")]=a.get("sequenceNum");!0===a.get("onDemand")?this.identifierList.unshift(d):this.identifierList.push(d);this.models[b]=a}},parse:function(a,b){if(f.isDefined(a)){var d=this._prepareModel.bind(this);a.forEach(function(b,c,e){a[c]=d(b)});return a}}});e.collection=new B;q=q.View.extend({defaultStartOffset:5E3,preloadDomId:"saBottomSheet-bottom-sheet",sheetInstance:"",collection:e.collection,start:function(a,b){this.isApp=!1;typeof b!==p&&b&&(this.isApp=b);if(this.collection.identifierList)for(this.page=
a,a=this.collection.identifierList,b=0;b<a.length;b++){var d=Object.keys(a[b])[0];d=this.collection.at(d);this.currentBottomSheet=Object.keys(a[b])[0];if(f.clearLocalStorage(d.get("identifier"),this.page,d.get("impressionInterval")))if(c.incrementCounter("bottomSheet"+this.currentBottomSheet+"ext_vrnc_"+f.getQueryParam("ext_vrnc")),c.incrementCounter("bottomSheet"+this.currentBottomSheet+f.getMetricTag()+"ext_vrnc_"+f.getQueryParam("ext_vrnc")),this.bottomSheetParams={preloadDomId:this.preloadDomId,
name:Object.keys(a[b])[0],closeType:d.get("closeType"),closeMessage:d.get("closeMessage"),height:d.get("bottomSheetHeight"),historySupportEnabled:!0},this.isApp||!f.isVernacSheet(this.currentBottomSheet)||n.utils.getCookie("lc-acbin")===p){this.sheetInstance?(b=d.get("failureResponse"))&&"function"===typeof b&&b(m.errorCodes.BOTTOM_SHEET_IN_VIEW):this.renderBottomSheet(d);a.splice(0,1);this.clickHandlers(d.get("identifier"));break}else c.incrementCounter("bottomSheet"+d.get("identifier")+"_intervalTimeout")}},
renderBottomSheet:function(a){var b=this;!b.sheetInstance&&a&&(b.createBottomSheetDiv(),b.sheetInstance=v.create(b.bottomSheetParams),a.get("contentUrl")?t("#"+b.preloadDomId).load(a.get("contentUrl"),"",function(a,c){"success"===c&&b.sheetInstance.show()}):a.get("staticContent")&&(t("#"+b.preloadDomId).append(a.get("staticContent")),b.sheetInstance.show()),f.isVernacSheet(b.currentBottomSheet)&&(f.addVernacEventHandlers(b),a=document.createElement("style"),a.setAttribute("id","vernacBS"),a.innerHTML=
y,document.head.appendChild(a)))},createBottomSheetDiv:function(){var a=document.createElement("div");a.id=this.preloadDomId;document.body.appendChild(a)},getBottomSheetContent:function(a,b){var d=f._getWindowLocationHref().replace(/^.*\/\/[^\/]+/,"");t.ajax({url:a,type:"GET",dataType:"html",data:{preferencesReturnUrl:d},statusCode:{204:function(a){c.incrementCounter("bottomSheetno_content")},200:function(a){c.incrementCounter("bottomSheet_contentCall_success");a=(new DOMParser).parseFromString(a,
"text/html");a=(new XMLSerializer).serializeToString(a);-1===a.indexOf("\x3cbody\x3e\x3c/body\x3e")?b(a):c.incrementCounter("bottomSheetno_content")}},error:function(a,b){c.incrementCounter("bottomSheet_contentCall_failed")}})},modifyPageScrollStatus:function(a){var b=t("#a-page"),d=t("body");var c=g.scrollY||g.pageYOffset;a?d.css({position:"fixed",top:"-"+c+"px",overflow:"hidden"}):(c=Math.abs(b.position().top),d.css({position:"",top:"",overflow:""}),t("html,body").scrollTop(c))},clearAndRender:function(a){this.modifyPageScrollStatus(!1);
f.isVernacSheet(this.currentBottomSheet)&&t("#vernacBS").remove();a.sheet.$container.remove();this.sheetInstance?delete this.sheetInstance:this.nextSheet()},afterBottomSheetRender:function(){c.incrementCounter("bottomSheet"+this.currentBottomSheet+"_shown");c.incrementCounter("bottomSheet"+this.currentBottomSheet+f.getMetricTag()+"_shown");var a=this.collection.at(this.currentBottomSheet).get("successResponse"),b=this.collection.at(this.currentBottomSheet).get("onDemand"),d=this.collection.at(this.currentBottomSheet).get("contextAwareIndex");
f.isVernacSheet(this.currentBottomSheet)?(f.logImpression(this.currentBottomSheet,this.page,"UBID",b,{successResponse:a}),h.$("input[name\x3dLOP][value\x3dhi_IN]").prop("checked",!0).trigger("change")):f.logImpression(this.currentBottomSheet,this.page,this.collection.schedulingKey,b,{contextAwareIndex:d,successResponse:a})},nextSheet:function(){setTimeout(this.start.bind(this),this.defaultStartOffset,this.page)},logOptOutImpression:function(){c.incrementCounter("bottomSheet"+this.currentBottomSheet+
"_closedByUser");c.incrementCounter("bottomSheet"+this.currentBottomSheet+f.getMetricTag()+"_closedByUser");var a=this.collection.at(this.currentBottomSheet).get("successResponse"),b=this.collection.at(this.currentBottomSheet).get("onDemand"),d=this.collection.at(this.currentBottomSheet).get("contextAwareIndex");f.isVernacSheet(this.currentBottomSheet)?(f.logImpression(this.currentBottomSheet,this.page,"UBID",b,{userEvent:m.userEvent.optOut,successResponse:a}),h.$("input[name\x3dLOP][value\x3dhi_IN]").prop("checked",
!0).trigger("change")):f.logImpression(this.currentBottomSheet,this.page,this.collection.schedulingKey,b,{userEvent:m.userEvent.optOut,contextAwareIndex:d,successResponse:a})},clickHandlers:function(a){var b=this;h.on("a:sheet:afterHide:"+a,function(a){var d=document.querySelector(".a-sheet-close.a-icon.a-icon-close-white");d&&(d.removeEventListener("click",b.logOptOutImpression.bind(b)),c.incrementCounter("bottomSheet"+b.currentBottomSheet+"_clickEventListenerRemoved"));b.clearAndRender.call(b,a);
c.incrementCounter("bottomSheet"+b.currentBottomSheet+"_sheetDismissed");c.incrementCounter("bottomSheet"+b.currentBottomSheet+f.getMetricTag()+"_sheetDismissed")});h.on("a:sheet:beforeShow:"+a,function(){b.modifyPageScrollStatus(!0)});h.on("a:sheet:afterShow:"+a,function(){b.afterBottomSheetRender.call(b);var a=document.querySelector(".a-sheet-close.a-icon.a-icon-close-white");a&&(a.addEventListener("click",b.logOptOutImpression.bind(b)),c.incrementCounter("bottomSheet"+b.currentBottomSheet+"_clickEventListenerAdded"))})}});
e.view=new q;e.addStyles();return e})})();(function(){r.register("SA_BottomSheetStyles",function(){return"#saBottomSheet-bottom-sheet{-webkit-transition:height 2s;transition:height 2s;overflow-y:auto;height:100%}"})})();(function(){r.when("A","jQuery").register("SA_MemoryManager",function(h,r){var p=function(){try{if(g.localStorage)return 1}catch(m){return g.ue.count("SA_MemoryManager_LocalStorageNotExposed",1),0}},q={bottomSheet:"SA_BottomSheetObj"},c=function(){return(new Date).setHours(0,0,0,0).toString()};
return{shouldFetchShoppingAids:function(m,g,n,e){if(!p())return!1;m=localStorage.getItem(q[m]);if(null===m)return!0;m=JSON.parse(m);var l=m.lastShownDate;if(c()!==l)return!0;l=m.dayCount;return m.pageCounts[g]<e&&l<n?!0:!1},writeShoppingAidsData:function(m,g,n){if(p()){var e=localStorage.getItem(q[m]),l={},h=Math.round((new Date).getTime()/36E5);null===e?(l.lastShownDate=c(),l.dayCount=1,e={},e[n]=1,l.pageCounts=e,n={},n.lastTimeStamp=h,n.count=1,h={},h[g]=n,l.elements=h):(l=JSON.parse(e),l.lastShownDate=
c(),l.dayCount+=1,e=l.pageCounts,e[n]+=1,l.pageCounts=e,e=l.elements,e[g]?(e[g].count+=1,e[g].lastTimeStamp=h):(n={},n.lastTimeStamp=h,n.count=1,e[g]=n),l.elements=e);localStorage.setItem(q[m],JSON.stringify(l))}},shouldShowShoppingAids:function(c,g,h,e){if(!p())return!1;c=localStorage.getItem(q[c]);if(null===c)return!0;c=JSON.parse(c).elements;if(!c[g])return!0;var l=c[g].lastTimeStamp,m=Math.round((new Date).getTime()/36E5);return l+h<=m&&c[g].count<e?!0:!1}}})})();(function(){r.register("vernacBSStyles",
function(){return'.a-container{padding-bottom : 12px !important;}.a-spacing-base{margin-bottom : -2.5rem !important;}#saBottomSheet-bottom-sheet form{margin-bottom : 0 !important;}.a-box-inner{padding-bottom : 10px !important;padding-top : 10px !important;}.a-form-actions{padding-top : 8px}#icp-sl-t-text{margin-left : 10px !important;margin-right : 10px !important;margin-bottom : 7px !important; font-size : 1.2rem;}div[data-a-input-name\x3d"LOP"]{font-size : 1.3rem !important;}#icp-btn-close{margin-bottom : 0.5rem; margin-top : 0!important}#icp-btn-save{margin-bottom : 0.5rem; margin-top : 0!important}'})})()});
/* ******** */
(function(e){var b=window.AmazonUIPageJS||window.P,h=b._namespace||b.attributeErrors,a=h?h("SAPartnerAssets",""):b;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,b,h){(function(){e.when("A").register("SAPartnerUtils",function(){var a=b.ue;return{logCSMTag:function(k){a&&a.tag&&a.tag(k);b&&uex&&"function"===typeof uex&&uex("ld",k,{wb:1})},triggerCustomEvent:function(b,a,e,p,q){a=new CustomEvent(a,{bubbles:e||!0,cancelable:p||!1,detail:q||h});b.dispatchEvent(a)}}})})();
(function(){e.when("A","SAPartnerUtils","QTips","QTipsMetrics","shopping-aids-ready").execute(function(a,k,g,t){function p(b){m=!0;n=b;f("sprkl:shown")}function q(a){if(m&&a&&"initial"===a.state){n.requestUpdate({signal:"complete"});m=!1;n=h;f("sprkl:clicked");a=g.utils.getPreviousLoP();var d=b.location.href,l=g.utils.getCurrentLoP();var c=l.split("_")[0];d=d.replace("/-/"+l,"");d=d.replace("/-/"+c,"");c=new URL(d);c.searchParams.delete("external_lang");c.searchParams.delete("language");c=c.toString();
r?u(a,c):(c=new URL(c),c.searchParams.set("language",a),b.location.href=c.toString())}}function v(b){m=!1;n=h;f("sprkl:closed")}function u(a,d){r&&b.ue_mid&&e.when("mash","i18n").execute(function(l,c){c.changeAppLocalizationPrefs({marketplaceObfuscatedId:b.ue_mid,locale:a,navigateToUrl:d,failCallback:function(b){f("sprkl:switch-back:failed")}});l.goBack()})}function w(){var a=g.utils.getCurrentLoP().split("_")[0],d=g.utils.getPreviousLoP().split("_")[0];k.logCSMTag("sa:vrnc:poly:"+a+":"+d);var e=
(new URL(b.location.href)).searchParams.get("tag");e&&k.logCSMTag("sa:vrnc:poly:"+a+":"+d+":"+e)}function f(b){t.incrementCounter("sa:vrnc:poly:"+b)}var r=b&&b.amazon&&b.amazon.mash,n,m=!1;a=b&&"URL"in b&&"URLSearchParams"in b&&"CustomEvent"in b&&b.location.href?"undefined"!==typeof(new URL(b.location.href)).searchParams:void 0;a?function(){var a=b.location.href,d="/-/"+g.utils.getCurrentLoP().split("_")[0];return a.match(d)?1:"1"===(new URL(a)).searchParams.get("external_lang")}()&&(w(),f("hit"),
g.utils.getCurrentLoP()!==g.utils.getPreviousLoP()&&(f("sprkl:eligible"),localStorage&&localStorage.getItem("previous_lop")||f("prevLoP:unknown"),k.triggerCustomEvent(document.querySelector(":root"),"shopping-aids:dynamic-sparkle:vernac:polyglot:eligible",!0,!1,{state:"initial",onShow:p,onClick:q,onClose:v}))):f("brw:unsup")})})()});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AlexaShoppingMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(l){var t=window.AmazonUIPageJS||window.P,d=t._namespace||t.attributeErrors,y=d?d("QTipsMobileWebAssets",""):t;y.guardFatal?y.guardFatal(l)(y,window):y.execute(function(){l(y,window)})})(function(l,t,d){(function(){l.when("A","StatefulSAEligiblityHelper","MultiPageSAOrchestrator","SA_BottomSheet","SA_MemoryManager","QTips","QTipsMetrics","QTipsConstants","ShoppingAidsSparkles","ShoppingAidsFilters","SAFeature","SAEndPointsConfig","ShoppingAidsFetcher","LogImpressionManager","ShoppingAidsGenericUtils",
"SAHotspot","SAAudiospot","SAHighlighter","PageResolver","LocalStorageInterface","LoPResolver","SAPAttributionHandler").register("QTipsHandler",function(d,e,b,g,a,c,n,p,q,f,m,z,C,r,h,v,A,w,D,u,B,x){return{page:"",storageKey:"identifier",schedulingKey:"schedulingType",shoppingAidsType:"shoppingAidsType",contextAwareIndex:"contextAwareIndex",sourceName:"ShoppingAidsMWeb_",platform:h.platformCheck(),SupportedMarketplace:h.isSupportedMarketplace(),init:function(){var a=this;if("Unsupported"===a.platform||
!a.SupportedMarketplace)return n.incrementCounter(this.sourceName+"assetsNotSupported"),0;n.incrementCounter(this.sourceName+"assetsLoaded");if(!u.isLocalStorageExposed())return 0;c.utils.cleanUpCachingInstrumentation();c.utils.savePreviousLoP();c.utils.saveCurrentLoP();if(this.page=D.pageAdapter()){m.featureAttribution&&x.featureAttributionBootUp(this.page);var d=function(k){if(k){var c=!1;if(m.clientSideCaching&&b.isBrowserSupported()){var d=e.getEligibleInProgressSA(a.page);h.isObjectEmpty(d)?
k.ShoppingAidsList&&h.isNonEmptyArray(k.ShoppingAidsList.MultiPageShoppingAids)&&(c=!0,b.display(k.ShoppingAidsList.MultiPageShoppingAids[0],a.page)):(c=!0,b.display(d,a.page))}else e.cleanUpInProgressStore();m.clientSideCaching||(k=f.start(k));k.ShoppingAidsList&&!c&&(c=k.ShoppingAidsList.ToolTips,h.isNonEmptyArray(c)&&a._display(c),c=k.ShoppingAidsList.BottomSheets,h.isNonEmptyArray(c)&&(c.sort(function(b,a){return b.sequenceNum-a.sequenceNum}),g.collection.create(c),g.view.start(a.page,h.isMShop())),
c=k.ShoppingAidsList.Sparkles,h.isNonEmptyArray(c)&&q.init({sparkles:c,page:a.page,platform:a.platform}),c=k.ShoppingAidsList.Audiospots,h.isNonEmptyArray(c)&&a._displayAudiospots(c),c=k.ShoppingAidsList.Hotspots,h.isNonEmptyArray(c)&&a._displayHotspots(c),k=k.ShoppingAidsList.Highlighters,h.isNonEmptyArray(k)&&a._displayHighlighters(k))}a.fireReady()};m.clientSideCaching?C.fetchShoppingAids(a.page,d):(C.cleanUpSACache(),a.fetch(a.page,d))}else n.incrementCounter(this.sourceName+"pageTypeMismatch")},
_getParameterByName:function(b,a){a||(a=t.location.href);b=b.replace(/[\[\]]/g,"\\$\x26");return(b=(new RegExp("[?\x26]"+b+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(a))?b[2]?decodeURIComponent(b[2].replace(/\+/g," ")):"":null},fetch:function(b,a,f){var k=this.sourceName+"fetchShoppingAids_",h=document.referrer,e=/.*\.amazon\..*/g,x="DIRECT";e&&e.test(h)&&(x="INDIRECT");d.ajax(z.fetchShoppingAidsEndPoint,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:{page:b,url:D.getWindowLocationHref(),
trafficType:x,previousLop:c.utils.getPreviousLoP(),currentLop:B.getCurrentLoP()},success:function(f){n.incrementCounter(k+b+"_success");a&&"function"===typeof a&&a(f)},error:function(a,c){"Request Timeout"===c?n.incrementCounter(k+b+"_request_timeout"):"NotFound"===c&&n.incrementCounter(k+b+"_unknown_endpoint");n.incrementCounter(k+b+"_failed");f&&"function"===typeof f&&f(a)}})},displayOnDemandToolTip:function(b){c.collection.add(b);c.view.setDismissalCallback(this.logImpression.bind(this));c.view.setTerminationCallback(this.terminateQTip.bind(this));
c.view.setPageType(this.page);c.utils.isDefined(c.view.setCountLogger)&&c.view.setCountLogger(this.logCounter.bind(this));c.view.dismissAndRender()},_display:function(b){c.collection.create(b);c.view.setDismissalCallback(this.logImpression.bind(this));c.view.setTerminationCallback(this.terminateQTip.bind(this));c.view.setPageType(this.page);c.utils.isDefined(c.view.setCountLogger)&&c.view.setCountLogger(this.logCounter.bind(this));c.view.postQTipRender()},_displayAudiospots:function(b){t&&t.Audio&&
(A.collection.create(b),A.view.setAudiospotRenderCompleteCallback(this.logImpression.bind(this)),A.view.postAudiospotRender())},_displayHotspots:function(b){v.collection.create(b);v.view.setRenderCompleteCallback(this.logImpression.bind(this));v.view.postHotspotRender()},_displayHighlighters:function(b){w.collection.create(b);w.view.setRenderCompleteCallback(this.logImpression.bind(this));w.view.postHighlighterRender()},logCounter:function(b,a,f){n.incrementCounter(b+"_"+a,f)},logImpression:function(b){var a=
b[this.storageKey],f=this.sourceName+a+"_"+this.page,c=this.sourceName+"logSA_",k=b[this.schedulingKey],e=b[this.contextAwareIndex],g=b.userEvent,u=b[this.shoppingAidsType]||"tool_tip";if(null!==b.onDemand&&b.onDemand){var B=b.successResponse;u="tool_tip:childSA";B&&"function"===typeof B&&B()}if(m.clientSideCaching&&m.featureAttribution&&"tool_tip"===u)e=r.buildOptionalParameter().withContextAwareIndex(e).withUserEvent(g).withSuccessCallback(x.enableFeatureAttribution.bind(x,b)).build(),r.handle(a,
k,u,this.page,e);else if(m.clientSideCaching)e=r.buildOptionalParameter().withContextAwareIndex(e).withUserEvent(g).build(),r.handle(a,k,u,this.page,e);else{b=z.logImpressionEndPoint;a={pageType:this.page,shoppingAidsType:u,id:a,schedulingType:k};h.isDefined(e)&&(a.contextAwareIndex=e);if(h.isDefined(g))switch(a.userEvent=g,g){case p.userEvent.optOut:f+="_optOut";break;case p.userEvent.complete:f+="_complete"}d.ajax(b,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:a,
success:function(b){n.incrementCounter(f+"_logged")},error:function(b,a){"NotFound"===a&&n.incrementCounter(c+"unknown_endpoint");n.incrementCounter(f+"_failedToLog")}})}},terminateQTip:function(b){n.incrementCounter("terminate_"+b[this.storageKey])},fireReady:function(){l.register("shopping-aids-ready",function(){})}}});l.when("QTipsHandler","ready").execute(function(d){d.init()})})();(function(){l.when("A","QTipsMetrics").register("OnDemandTooltipBuilder",function(l,e){return function(){return{setIdentifier:function(b){this.identifier=
b;return this},setElementStartOffset:function(b){this.elementStartOffset=b;return this},setElementDisplayType:function(b){this.elementDisplayType=b;return this},setElementArrowPosition:function(b){this.elementArrowPosition=b;return this},setElementValue:function(b){this.elementValue=b;return this},setElementAnchor:function(b){this.elementAnchor=b;return this},setSuccessResponse:function(b){this.success=b;return this},setFailureResponse:function(b){this.failure=b;return this},setDismissalType:function(b){this.dismissalType=
b;return this},setElementCTA:function(b){this.elementCTA=b;return this},setElementDuration:function(b){this.elementDuration=b;return this},setElementBounceDuration:function(b){this.elementBounceDuration=b;return this},setVideoSource:function(b){this.videoSource=b;return this},setVideoWidth:function(b){this.videoWidth=b;return this},setNestedSA:function(b){this.nestedSA=b;return this},setScrollToAnchor:function(b){this.scrollToAnchor=b;return this},setAnchorScrollOffset:function(b){this.anchorScrollOffset=
b;return this},setOffsetX:function(b){this.offsetX=b;return this},setOffsetY:function(b){this.offsetY=b;return this},setElementIndex:function(b){this.elementIndex=b;return this},setElementBackgroundColor:function(b){this.elementBackgroundColor=b;return this},setElementTextColor:function(b){this.elementTextColor=b;return this},setHighlighter:function(b){this.highlighter=b;return this},setElementBorderColor:function(b){this.elementBorderColor=b;return this},buildTooltip:function(b,g){var a={elementHeight:80,
elementWidth:390,userState:"ANY",elementType:"TEXT",onDemand:!0,sequenceNum:1,elementStartOffset:0,elementDuration:12E3,elementBounceDuration:9E3,maxDisplayCount:1,elementBackgroundColor:"#FFA724",elementTextColor:"#000000",elementIndex:"",elementBorderColor:"#FFA724"};a.identifier=this.identifier;a.elementDisplayType=this.elementDisplayType;a.elementArrowPosition=this.elementArrowPosition;a.elementValue=this.elementValue;a.elementAnchor=this.elementAnchor;a.successResponse=this.success;a.failureResponse=
this.failure;this.elementStartOffset&&(a.elementStartOffset=this.elementStartOffset);this.dismissalType&&(a.dismissalType=this.dismissalType);this.elementDuration&&(a.elementDuration=this.elementDuration);this.elementBounceDuration&&(a.elementBounceDuration=this.elementBounceDuration);this.videoSource&&(a.videoSource=this.videoSource);this.videoWidth&&(a.videoWidth=this.videoWidth);this.nestedSA&&(a.nestedSAList=this.nestedSA);this.elementCTA&&(a.elementCTA=this.elementCTA);this.scrollToAnchor&&(a.scrollToAnchor=
this.scrollToAnchor);this.anchorScrollOffset&&(a.anchorScrollOffset=this.anchorScrollOffset);this.elementIndex&&(a.elementIndex=this.elementIndex);this.offsetX&&(a.offsetX=this.offsetX,a.xOffset=this.offsetX);this.offsetY&&(a.offsetY=this.offsetY,a.yOffset=this.offsetY);this.elementBackgroundColor&&(a.elementBackgroundColor=this.elementBackgroundColor);this.elementTextColor&&(a.elementTextColor=this.elementTextColor);this.highlighter&&(a.highlighter=this.highlighter);this.elementBorderColor&&(a.elementBorderColor=
this.elementBorderColor);try{if(a.identifier===d)throw"Mandatory parameter missing: identifier";if(a.elementDisplayType===d)throw"Mandatory parameter missing: elementDisplayType";if(a.elementArrowPosition===d)throw"Mandatory parameter missing: elementArrowPosition";if(a.elementValue===d)throw"Mandatory parameter missing: elementValue";if(a.elementAnchor===d)throw"Mandatory parameter missing: elementAnchor";if(a.successResponse===d)throw"Mandatory parameter missing: successResponse";if(a.failureResponse===
d)throw"Mandatory parameter missing: failureResponse";b&&"function"===typeof b&&(e.incrementCounter("TooltipBuilder:success"),b(a))}catch(c){g&&"function"===typeof g&&(e.incrementCounter("TooltipBuilder:failure"),g(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandBottomSheetBuilder",function(l,e){return function(){return{setIdentifier:function(b){this.identifier=b;return this},setInvokingEventType:function(b){this.invokingEventType=b;return this},setInvokingEventElement:function(b){this.invokingEventElement=
b;return this},setContentUrl:function(b){this.contentUrl=b;return this},setStaticContent:function(b){this.staticContent=b;return this},setCloseType:function(b){this.closeType=b;return this},setCloseMessage:function(b){this.closeMessage=b;return this},setSchedulingType:function(b){this.schedulingType=b;return this},setBottomSheetHeight:function(b){this.bottomSheetHeight=b;return this},setClientSideTargeting:function(b){this.clientSideTargeting=b;return this},setNestedSA:function(b){this.nestedSA=b;
return this},setSuccessResponse:function(b){this.success=b;return this},setFailureResponse:function(b){this.failure=b;return this},buildBottomSheet:function(b,g){var a={onDemand:!0,sequenceNum:1,maxDisplayCount:1,impressionInterval:24,elementDisplayType:"HTML"};a.identifier=this.identifier;a.successResponse=this.success;a.failureResponse=this.failure;this.invokingEventType&&(a.invokingEventType=this.invokingEventType);this.invokingEventElement&&(a.invokingEventElement=this.invokingEventElement);this.contentUrl&&
(a.contentUrl=this.contentUrl);this.contentUrl===d&&this.staticContent&&(a.staticContent=this.staticContent);this.closeType&&(a.closeType=this.closeType);this.closeMessage&&(a.closeMessage=this.closeMessage);this.schedulingType&&(a.schedulingType=this.schedulingType);this.bottomSheetHeight&&(a.bottomSheetHeight=this.bottomSheetHeight);this.clientSideTargeting&&(a.clientSideTargetting=this.clientSideTargeting);this.nestedSA&&(a.nestedSAList=this.nestedSA);try{if(a.identifier===d)throw"Mandatory parameter missing: identifier";
if(a.contentUrl===d&&a.staticContent===d)throw"Mandatory parameter missing: content(static/URL)";if(a.successResponse===d)throw"Mandatory parameter missing: successResponse";if(a.failureResponse===d)throw"Mandatory parameter missing: failureResponse";b&&"function"===typeof b&&(e.incrementCounter("BottomSheetBuilder:success"),b(a))}catch(c){g&&"function"===typeof g&&(e.incrementCounter("BottomSheetBuilder:failure"),g(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandDynamicSparkleBuilder",
function(l,e){return function(){return{setIdentifier:function(b){this.identifier=b;return this},setInvokingEventType:function(b){this.invokingEventType=b;return this},setInvokingEventElement:function(b){this.invokingEventElement=b;return this},setStateData:function(b){this.stateData=b;return this},setSuccessResponse:function(b){this.success=b;return this},setFailureResponse:function(b){this.failure=b;return this},buildSparkle:function(b,g){var a={onDemand:!0,sparkleType:"dynamic",sequenceNum:1,maxDisplayCount:1,
impressionInterval:24,clickInterval:24};a.identifier=this.identifier;a.stateData=this.stateData;a.successResponse=this.success;a.failureResponse=this.failure;this.invokingEventType&&(a.invokingEventType=this.invokingEventType);this.invokingEventElement&&(a.invokingEventElement=this.invokingEventElement);try{if(a.identifier===d)throw"Mandatory parameter missing: identifier";if(a.stateData===d)throw"Mandatory parameter missing: stateData";try{JSON.parse(a.stateData)}catch(c){throw"Mandatory parameter missing: illegalStateData";
}if(a.successResponse===d)throw"Mandatory parameter missing: successResponse";if(a.failureResponse===d)throw"Mandatory parameter missing: failureResponse";b&&"function"===typeof b&&(e.incrementCounter("DynamicSparkleBuilder:success"),b(a))}catch(c){g&&"function"===typeof g&&(e.incrementCounter("DynamicSparkleBuilder:failure"),g(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandStaticSparkleBuilder",function(l,e){return function(){return{setIdentifier:function(b){this.identifier=
b;return this},setInvokingEventType:function(b){this.invokingEventType=b;return this},setInvokingEventElement:function(b){this.invokingEventElement=b;return this},setDisplayText:function(b){this.displayText=b;return this},setDisplayIcon:function(b){this.displayIcon=b;return this},setTargetEndpoint:function(b){this.targetEndpoint=b;return this},setDescriptionText:function(b){this.descriptionText=b;return this},setTypeOfStaticSparkle:function(b){this.typeOfStaticSparkle=b;return this},setNestedSA:function(b){this.nestedSA=
b;return this},setSuccessResponse:function(b){this.success=b;return this},setFailureResponse:function(b){this.failure=b;return this},buildSparkle:function(b,g){var a={onDemand:!0,sparkleType:"static",sequenceNum:1,maxDisplayCount:1,impressionInterval:24,clickInterval:24};a.identifier=this.identifier;a.successResponse=this.success;a.failureResponse=this.failure;this.invokingEventType&&(a.invokingEventType=this.invokingEventType);this.invokingEventElement&&(a.invokingEventElement=this.invokingEventElement);
this.displayText&&(a.displayText=this.displayText);this.displayIcon&&(a.displayIcon=this.displayIcon);this.targetEndpoint&&(a.targetEndpoint=this.targetEndpoint);this.descriptionText&&(a.descriptionText=this.descriptionText);this.schedulingType&&(a.schedulingType=this.schedulingType);this.typeOfStaticSparkle&&(a.typeOfStaticSparkle=this.typeOfStaticSparkle);this.nestedSA&&(a.nestedSAList=this.nestedSA);try{if(a.identifier===d)throw"Mandatory parameter missing: identifier";if(a.successResponse===d)throw"Mandatory parameter missing: successResponse";
if(a.failureResponse===d)throw"Mandatory parameter missing: failureResponse";b&&"function"===typeof b&&(e.incrementCounter("StaticSparkleBuilder:success"),b(a))}catch(c){g&&"function"===typeof g&&(e.incrementCounter("StaticSparkleBuilder:failure"),g(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandHighlighterBuilder",function(l,e){return function(){return{setIdentifier:function(b){this.identifier=b;return this},setHighlighterAnchor:function(b){this.highlighterAnchor=b;return this},
setSuccessResponse:function(b){this.success=b;return this},setFailureResponse:function(b){this.failure=b;return this},setStartPositionX:function(b){this.startPositionX=b;return this},setPositionX:function(b){this.positionX=b;return this},setPositionY:function(b){this.positionY=b;return this},setElementDisplayType:function(b){this.elementDisplayType=b;return this},buildHighlighter:function(b,g){var a={onDemand:!0,sequenceNum:1,elementStartOffset:0,maxDisplayCount:1,startPositionX:"left",positionX:0,
positionY:0,elementDisplayType:"HTML"};a.identifier=this.identifier;a.highlighterAnchor=this.highlighterAnchor;a.successResponse=this.success;a.failureResponse=this.failure;this.startPositionX&&(a.startPositionX=this.startPositionX);this.positionX&&(a.positionX=this.positionX);this.positionY&&(a.positionY=this.positionY);this.elementDisplayType&&(a.elementDisplayType=this.elementDisplayType);try{if(a.identifier===d)throw"Mandatory parameter missing: identifier";if(a.highlighterAnchor===d)throw"Mandatory parameter missing: highlighterAnchor";
if(a.successResponse===d)throw"Mandatory parameter missing: successResponse";if(a.failureResponse===d)throw"Mandatory parameter missing: failureResponse";b&&"function"===typeof b&&(e.incrementCounter("HighlighterBuilder:success"),b(a))}catch(c){g&&"function"===typeof g&&(e.incrementCounter("HighlighterBuilder:failure"),g(c))}}}}})})();(function(){l.when("QTipsHandler","QTips","SA_BottomSheet","ShoppingAidsSparkles","SAFabAudiospot","SAHotspot","SAAudiospot","QTipsConstants","OnDemandTooltipBuilder",
"OnDemandBottomSheetBuilder","OnDemandDynamicSparkleBuilder","OnDemandStaticSparkleBuilder","OnDemandShoppingAidsAllowlist","QTipLibrary","QTipsMetrics","SAHighlighter","OnDemandHighlighterBuilder","PageResolver").register("OnDemandShoppingAids",function(d,e,b,g,a,c,l,p,q,f,m,z,C,r,h,v,A,w){var n=this;return{toolTipBuilder:q,bottomSheetBuilder:f,staticSparkleBuilder:z,dynamicSparkleBuilder:m,highlighterBuilder:A,invoke:function(a,f){if(n.inThrottledState)a.failureResponse(p.errorCodes.API_THROTTLED);
else{var c=f.split("/");f=c[0];c=c[1];switch(f){case "tooltip":h.incrementCounter("OnDemandShoppingAids:tooltip:"+c);h.incrementCounter("OnDemandShoppingAids:tooltip");h.incrementCounter("OnDemandShoppingAids:"+c);"1.0.0"===c?(f=new r.Model,f.set(a),h.incrementCounter("OnDemandShoppingAids:tooltip:invoked:"+c),d.displayOnDemandToolTip(f)):(a.failureResponse(p.errorCodes.INVALID_VERSION),h.incrementCounter("OnDemandShoppingAids:tooltip:invalidVersion"));break;case "sparkle":h.incrementCounter("OnDemandShoppingAids:sparkle:"+
c);h.incrementCounter("OnDemandShoppingAids:sparkle");h.incrementCounter("OnDemandShoppingAids:"+c);"1.0.0"===c?g.invokeOnDemandSparkle({sparkles:a,page:w.pageAdapter(),platform:"mweb"}):(a.failureResponse(p.errorCodes.INVALID_VERSION),h.incrementCounter("OnDemandShoppingAids:sparkle:invalidVersion"));break;case "bottomsheet":h.incrementCounter("OnDemandShoppingAids:bottomsheet:"+c);h.incrementCounter("OnDemandShoppingAids:bottomsheet");h.incrementCounter("OnDemandShoppingAids:"+c);"1.0.0"===c?(f=
new r.Model,f.set(a),b.collection.add(f),e.view.clearRender(),b.view.start(w.pageAdapter())):(a.failureResponse(p.errorCodes.INVALID_VERSION),h.incrementCounter("OnDemandShoppingAids:bottomsheet:invalidVersion"));break;case "highlighter":h.incrementCounter("OnDemandShoppingAids:highlighter:"+c);h.incrementCounter("OnDemandShoppingAids:highlighter");h.incrementCounter("OnDemandShoppingAids:"+c);"1.0.0"===c?(f=new r.Model,f.set(a),h.incrementCounter("OnDemandShoppingAids:highlighter:invoked:"+c),v.view.displayOnDemandHighlighter(f)):
(a.failureResponse(p.errorCodes.INVALID_VERSION),h.incrementCounter("OnDemandShoppingAids:highlighter:invalidVersion"));break;default:h.incrementCounter("OnDemandShoppingAids:invalidShoppingAidType"),a.failureResponse(p.errorCodes.INVALID_SHOPPING_AID_TYPE)}}},dismiss:function(f,d,m,k){h.incrementCounter("OnDemandShoppingAids:dismiss:"+f);h.incrementCounter("OnDemandShoppingAids:dismiss:"+d);switch(d){case "tool_tip":e.view.dismissWithId(f,m,k);break;case "bottomsheet":b.view.dismissWithId(f,m,k);
break;case "sparkles":g.dismissWithId(f,m,k);break;case "hotspot":c.view.dismissWithId(f,m,k);break;case "audiospot":l.view.dismissWithId(f,m,k);break;case "fabaudiospot":a.dismissWithId(f,m,k);break;case "highlighter":v.view.dismissWithId(f,m,k);break;default:k&&"function"===typeof k&&k(p.errorCodes.INVALID_SHOPPING_AID_TYPE),h.incrementCounter("OnDemandShoppingAids:dismiss:invalidShoppingAidType")}}}})})();(function(){l.when("A").register("OnDemandShoppingAidsAllowlist",function(d){return["devTestID",
"ShoppingAidsInternal"]})})();(function(){l.when("A","OnDemandShoppingAids","QTipsMetrics").register("NestedSARenderer",function(d,e,b){function g(f,d){var e=f.type,g=function(b){q.result=b},m=function(){b.incrementCounter("NestedSARenderer:"+d+e+"_error")};b.incrementCounter("NestedSARenderer:"+d+e);"bottom_sheet"===e?a(f,g,m):"sparkle"===e?c(f,g,m):"tool_tip"===e?l(f,g,m):"highlighter"===e?p(f,g,m):b.incrementCounter("NestedSARenderer:unknown_shopping_aid")}function a(a,c,d){var f=a.identifier,
g=a.closeType,h=a.staticContent,m=a.contentUrl,l=a.bottomSheetHeight;b.incrementCounter("NestedSARenderer:bottom_sheet_builder:invoked");e.bottomSheetBuilder().setIdentifier(f).setStaticContent(h).setContentUrl(m).setCloseType(g).setBottomSheetHeight(l).setNestedSA(a.nestedSAList).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildBottomSheet(c,d);e.invoke(q.result,"bottomsheet/1.0.0");b.incrementCounter("NestedSARenderer:on_demand_bottom_sheet:invoked")}function c(a,c,d){var f=
a.identifier,g=a.displayText,h=a.displayIcon,m=a.targetEndpoint,l=a.descriptionText,n=a.typeOfStaticSparkle;b.incrementCounter("NestedSARenderer:sparkle_builder:invoked");e.staticSparkleBuilder().setIdentifier(f).setDisplayText(g).setDisplayIcon(h).setDescriptionText(l).setTypeOfStaticSparkle(n).setNestedSA(a.nestedSAList).setTargetEndpoint(m).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildSparkle(c,d);e.invoke(q.result,"sparkle/1.0.0");b.incrementCounter("NestedSARenderer:on_demand_sparkle:invoked")}
function l(a,c,d){b.incrementCounter("NestedSARenderer:tooltip_builder:invoked");e.toolTipBuilder().setIdentifier(a.identifier).setElementAnchor(a.elementAnchor).setElementDisplayType(a.elementDisplayType).setElementArrowPosition(a.elementArrowPosition).setElementValue(a.elementValue).setElementStartOffset(a.elementStartOffset).setElementDuration(a.elementDuration).setElementBounceDuration(a.elementBounceDuration).setElementCTA(a.elementCTA).setDismissalType(a.dismissalType).setNestedSA(a.nestedSAList).setScrollToAnchor(a.scrollToAnchor).setAnchorScrollOffset(a.anchorScrollOffset).setVideoSource(a.videoSource).setVideoWidth(a.videoWidth).setSuccessResponse(function(){}).setFailureResponse(function(){}).setOffsetX(a.offsetX).setOffsetY(a.offsetY).setElementIndex(a.elementIndex).setElementBackgroundColor(a.elementBackgroundColor).setElementTextColor(a.elementTextColor).setHighlighter(a.highlighter).setElementBorderColor(a.elementBorderColor).buildTooltip(c,
d);e.invoke(q.result,"tooltip/1.0.0");b.incrementCounter("NestedSARenderer:on_demand_tooltip:invoked")}function p(a,c,d){b.incrementCounter("NestedSARenderer:highlighter_builder:invoked");e.highlighterBuilder().setIdentifier(a.identifier).setHighlighterAnchor(a.highlighterAnchor).setStartPositionX(a.startPositionX).setPositionX(a.positionX).setPositionY(a.positionY).setElementDisplayType(a.elementDisplayType).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildHighlighter(c,d);
e.invoke(q.result,"highlighter/1.0.0");b.incrementCounter("NestedSARenderer:on_demand_highlighter:invoked")}var q=this;document.addEventListener("SA:InvokeOnDemandSA",function(a){b.incrementCounter("NestedSARenderer:shopping_aid_data_event");if((a=a.detail)&&0<a.length){var c=a[0];c.nestedSAList=JSON.stringify(a.splice(1));g(c,"nestedSA_invoke:")}else a?(a=JSON.parse(a.toJson()),g(a,"supplementarySA_invoke:")):b.incrementCounter("NestedSARenderer:shopping_aid_data_event:undefined_data_received")});
document.addEventListener("SA:OnDemandDismissSA",function(a){try{var c=a.detail;e.dismiss(c.identifier,c.type,c.successCallback,c.errorCallback)}catch(z){b.incrementCounter("NestedSARenderer:sa:dismiss:event:invalid_data_received")}})})})()});
/* ******** */
