!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequire2640;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},n.parcelRequire2640=o),o.register("a1rh1",(function(e,t){"use strict";function n(e,t,n,r){var i=[e,t,n];return r&&i.push(r),i}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.addCsmTag=e.exports.sendCsmCounter=e.exports.sendCsmLatencyMetric=void 0,e.exports.sendCsmLatencyMetric=function(e,t,r,i,o){var a;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(a||(a={})),a.hasOwnProperty(e)){var s=a[e].toString(),l=i?i+":":"";"function"==typeof window[s]&&(window[s].apply(this,n(e,"adplacements:"+l+t.replace(/_/g,":"),{wb:1},o)),r&&window[s].apply(this,n(e,"adplacements:"+l+r,{wb:1},o)))}},e.exports.sendCsmCounter=function(e,t,n,r){if(window.ue&&"function"==typeof window.ue.count){var i="adplacements:"+n;if(e&&(i+=":"+e.replace(/_/g,":")),window.ue.count(i,r),t){var o="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(o,r)}}},e.exports.addCsmTag=function(e,t,n,r){if(window.ue&&window.ue.tag){if(t){var i=e+":"+t.replace(/_/g,":")+(r?":"+r:"");window.ue.tag(i)}if(n){var o=e+":"+n+(r?":"+r:"");window.ue.tag(o)}t||n||window.ue.tag(e+(r?":"+r:""))}}})),o.register("iMV0g",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.events=e.exports.latency=void 0;var n=o("ej7sS"),r=o("h1Sm4");e.exports.latency=function(e){return new n.CsaLatency(e)},e.exports.events=function(){return new r.CsaEvents}})),o.register("ej7sS",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaLatency=void 0;var n=o("1Fd0t"),r=function(e){var t=this;if(this.mark=function(e,r){if(t.latencyPlugin)try{t.latencyPlugin("mark",e,r)}catch(e){(0,n.logError)("Error with 'markCsaLatencyMetric' CSA",e)}},window.csa)try{this.latencyPlugin=window.csa("Content",{element:e})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaLatency=r})),o.register("1Fd0t",(function(e,t){"use strict";var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.logError=void 0;var a=i(o("a1rh1")),s="ERROR";e.exports.logError=function(e,t){var n=t||new Error(e);console.error(e,t),a.sendCsmCounter("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:s,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}})),o.register("h1Sm4",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaEvents=void 0;var n=o("1Fd0t"),r=function(){var e=this;if(this.log=function(t,r,i){if(e.events)try{e.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:t+":"+r+":"+i,metricValue:1},{ent:"all"})}catch(e){(0,n.logError)("Error with 'logCsaEvent' CSA",e)}},this.setEntity=function(t){if(e.events)try{e.events("setEntity",{adCreativeMetaData:t})}catch(e){(0,n.logError)("Error with 'addCsaEntity' CSA",e)}},window.csa)try{this.events=window.csa("Events",{producerId:"adplacements"})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaEvents=r}));const s=()=>{const e=document.getElementsByClassName("text/x-APE-lightAds");return Array.prototype.slice.call(e)},l=/^ape_([a-zA-Z0-9-_]+)_placement$/;function c(e){const t=e.id.match(l)[1],n=window[t].adDetails;return n.adPlacementDiv=e,n.adPlacementWrapperDiv=document.getElementById(`ape_${t}_wrapper`),n.slotId=t,n.csmSlotId=t.replace(/_/g,":"),n}function d(e){return"string"==typeof e&&e.trim().length>0}function u(e){return!d(e)}const m=(e,t)=>{for(const n of Object.keys(t))e.style[n]=t[n];return e};function p(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window}function f(e){const{csmSlotId:t=null,prefix:n,placementId:r=null,count:i=1,shouldFireSlotAgnosticMetric:o=!1}=e;if(window.ue&&"function"==typeof window.ue.count){const e=`adplacements:${n}`;if(o&&window.ue.count(e,i),t){const n=`${e}:${t}`;window.ue.count(n,i)}if(r){const t=`${e}:${r}`;window.ue.count(t,i)}}}const h=e=>{const{tag:t,csmSlotId:n,placementId:r=null,suffix:i=null,shouldFireSlotAgnosticMetric:o=!1}=e;if(null===window||void 0===window?void 0:window.ue.tag){if(n){const e=`${t}:${n}${i?`:${i}`:""}`;window.ue.tag(e)}if(r){const e=`${t}:${r}${i?`:${i}`:""}`;window.ue.tag(e)}if(o){const e=`${t}${i?`:${i}`:""}`;window.ue.tag(e)}}},g=(e,t)=>{const n=t||new Error(e);console.error(e,n)},v={};const w=(e,t,n)=>{try{v.events&&v.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+n,metricValue:1},{ent:"all"})}catch(e){g("Error with initiating CSA",e)}},b=e=>{try{v.events&&v.events("setEntity",{adCreativeMetaData:e})}catch(e){g("Error with initiating CSA",e)}},I=e=>{const{pixelUrl:t,pixelOnLoadHandler:n=(()=>{}),pixelOnErrorHandler:r=(()=>{})}=e,i=new Image;i.onload=n,i.onerror=r,i.src=t},E=(e,t,n)=>{let r=e+t;return n&&(r+="_"+n),r},S={};function y(e){const{pixelUrl:t,id:n,csmSlotId:r,placementId:i=null,baseCounterName:o,baseMetricName:a,counterExtension:s=null,slotId:l}=e;if(u(t))return g("Pixel URL is not defined"),!1;try{return!S[n]&&(I({pixelUrl:t,id:n,pixelOnLoadHandler(){f({csmSlotId:r,placementId:i,prefix:E(o,"loaded",s)}),w(E(a,"loaded",s),l,i)},pixelOnErrorHandler(){g(`Error loading pixel: ${t}`),f({csmSlotId:r,placementId:i,prefix:E(o,"error",s)}),w(E(a,"error",s),l,i)}}),w(E(a,"fired",s),l,i),f({csmSlotId:r,placementId:i,prefix:E(o,"fired",s)}),S[n]=!0,!0)}catch(e){return g(`Error creating pixel: ${t}`),!1}}function R(e,t,n){return e+t+JSON.stringify(n)}var O,C,M,L;(C=O||(O={})).REQUEST="adfeedback:request",C.SUCCESS="adfeedback:success",C.ERROR="adfeedback:error",C.LABEL_RENDER="adfeedback:sponsoredlabelrender",(L=M||(M={})).START="adload:start",L.CALLBACK="adload:delayloadcallback",L.IMP="adload:impression",L.VIEWABILITY="adload:viewability",L.MEASURABILITY="adload:measurability",L.RENDER_ERROR="adload:rendererror";var _,T,A,x,P,N,D,k,F,B;(T=_||(_={})).PAGE_PRERENDER="pixelcondition:pageprerender",T.AD_MISSING="pixelcondition:admissing",(x=A||(A={})).LEGACY_IMPRESSION_COUNTER="imp:legacy",x.GLOBAL_IMPRESSION_FIRED_COUNTER="impressionFired",(N=P||(P={})).LOADED="btr:loaded",N.ERROR="btr:error",N.IMPRESSION="btr:impression",N.NO_IMAGES="btr:noimages",N.TAGGED="btr:taggedcreative",(k=D||(D={})).SUCCESS="inview:success",k.PARTIAL_SUPPORT="inview:partialsupport",k.NOT_SUPPORTED="inview:notsupported",(B=F||(F={})).START="adload_start",B.CALLBACK="adload_delayloadcallback",B.IMP="impression",B.VIEWABILITY="viewability",B.MEASURABILITY="measurability",B.RENDER_ERROR="adload_rendererror";const U=()=>window.innerHeight||document.documentElement.clientHeight,H=()=>window.innerWidth||document.documentElement.clientWidth,j=(e,t,n)=>{let r=0;return"visible"!==document.visibilityState?r:(r=e>0?n-e:t>0?Math.min(t,n):0,Math.min(r,t-e))},W=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());if(!n)return null;return{t:n.top,l:n.left,r:n.right,b:n.bottom,w:n.width||n.right-n.left,h:n.height||n.bottom-n.top,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN}},$=(e,t)=>{const n=W(e,t);if(!n)return null;const r=(e=>{const t=Math.max(0,j(e.t,e.b,U())),n=Math.max(0,j(e.l,e.r,H())),r=t*n,i=e.h*Math.min(e.w,H());return{xiv:Number(Math.min(1,n/e.w).toFixed(2)),yiv:Number(Math.min(1,t/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,r/i)).toFixed(2))}})(n);return{t:n.t,l:n.l,r:n.r,b:n.b,w:n.w,h:n.h,z:n.z,xiv:r.xiv,yiv:r.yiv,iv:r.iv}};function z(e){if(!e||!document||!window)return null;const t=(()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=H(),r=U();return{t:e,l:t,w:n,h:r,b:e+r,r:t+n}})(),n=$(e),r=((e,t)=>{if(!document.body)return null;const n=t||e.getBoundingClientRect();return{t:n.top,l:n.left,r:H()-n.right,b:U()-n.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>H()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>U()?1:0}})(e);if(!t||!n||!r)return null;return{geom:{win:t,self:n,exp:r},payload:{wh:t.h,ww:t.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}}}function G(e){if(!window)return null;return e.getBoundingClientRect().top-U()}const Y={},q=e=>{const{viewPercentage:t,slotId:n,csmSlotId:r=null,placementId:i=null,aaxInstrPixelUrl:o,viewableInfo:a,viewabilityStandards:s,aPageStart:l,adStartTime:c}=e;if(u(o)||!s)return;const d=e=>{const s=e.p,d=e.t,u=e.def;!Y[n][u].viewed&&((e,t)=>e&&(100*e>=t&&0!==t||100*e>t&&0===t))(t,s)?Y[n][u].timeout||(Y[n][u].timeout=setTimeout((()=>{var t;Y[n][u].viewed=!0,t=e,a.v=t,a.ptv=void 0!==l?(Date.now()-l)/1e3:0,a.ttv=void 0!==c?(Date.now()-c)/1e3:0,y({pixelUrl:R(o,"v/",a),id:"ape_viewability_"+t.def+"_"+n,csmSlotId:r,placementId:i,baseCounterName:M.VIEWABILITY,baseMetricName:F.VIEWABILITY,counterExtension:t.def,slotId:n})}),1e3*d)):Y[n][u].timeout&&(clearTimeout(Y[n][u].timeout),Y[n][u].timeout=null)};Y[n]=Y[n]||{};for(let e=0;e<s.length;e++){const t=s[e].def;t&&(Y[n][t]=Y[n][t]||{},Y[n][t].viewed=void 0!==Y[n][t].viewed&&Y[n][t].viewed,Y[n][t].timeout=void 0===Y[n][t].timeout?null:Y[n][t].timeout)}for(let e=0;e<s.length;e++)d(s[e])},J=e=>{if(!e)return"unknown";const t=(e=>{try{const t=W(e),n=document.body.getBoundingClientRect(),r=Math.max(0,Math.min(n.left+H(),t.r)-t.l)*Math.max(0,Math.min(n.top+U(),t.b)-t.t)/(t.h*Math.min(t.w,H()));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}catch(e){return null}})(e);return null==t?"unknown":t>=.5};function V(e,t){const n={atf:J(e.adPlacementDiv)};t&&(n.ape_al=!0);const r="ape_measurability_"+e.slotId;y({pixelUrl:R(e.aaxInstrPixelUrl,"atf/",n),id:r,csmSlotId:e.csmSlotId,placementId:e.placementId,baseCounterName:M.MEASURABILITY,baseMetricName:F.MEASURABILITY,slotId:e.slotId})}function K(e,t,n){var r,i=n||{},o=i.noTrailing,a=void 0!==o&&o,s=i.noLeading,l=void 0!==s&&s,c=i.debounceMode,d=void 0===c?void 0:c,u=!1,m=0;function p(){r&&clearTimeout(r)}function f(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,c=Date.now()-m;function f(){m=Date.now(),t.apply(s,i)}function h(){r=void 0}u||(l||!d||r||f(),p(),void 0===d&&c>e?l?(m=Date.now(),a||(r=setTimeout(d?h:f,e))):f():!0!==a&&(r=setTimeout(d?h:f,void 0===d?e-c:e)))}return f.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;p(),u=!n},f}const X=(e,t,n)=>{let r=!1;const i=()=>{const e=G(n);return e&&e<=t},o=()=>{i()&&(e(),r=!0)},a=K(20,(()=>{o(),r&&(window.removeEventListener("scroll",a),window.removeEventListener("resize",a))}));o(),r||(window.addEventListener("scroll",a),window.addEventListener("resize",a))};function Q(e){const{callback:t,errorCallback:n=(()=>{}),delayConfig:r,adPlacementDiv:i,csmSlotId:o}=e,a=()=>{try{t()}catch(e){n()}};if(null===r||"immediate"===r)return void a();const s=window.P,l=window.amznJQ;if("windowOnLoad"===r)"complete"===document.readyState?a():window.addEventListener("load",a);else if("aboveTheFold"===r)s?s.when("af").execute(a):l?l.onCompletion("amznJQ.AboveTheFold",a):a();else if("criticalFeature"===r)s?s.when("cf").execute(a):l?l.onCompletion("amznJQ.criticalFeature",a):a();else if("inView"===r)if(p()){const e=new IntersectionObserver(((t,n)=>{const r=1===t.length&&void 0!==t[0].intersectionRatio.toFixed(2);(!r||t[0].intersectionRatio>0)&&(a(),e.unobserve(i),f(r?{csmSlotId:o,prefix:D.SUCCESS}:{csmSlotId:o,prefix:D.PARTIAL_SUPPORT}))}),{threshold:[0,.01]});e.observe(i)}else a(),f({csmSlotId:o,prefix:D.NOT_SUPPORTED});else if(null==r?void 0:r.match("[^:]+:.+")){const e=r.split(":"),t=e[0].split("."),n=e[1],i=e.length>2?e[2]:n;s?s.when(i,"A").execute(a):l&&t.length>1?l[t[1]](n,a):a()}else(null==r?void 0:r.match(/^\d{1,4}px$/g))?X(a,parseInt(r,10),i):a()}function Z(e,t,n,r){let i="prerender"!==document.visibilityState,o=!!((a=e).offsetWidth||a.offsetHeight||a.getClientRects().length);var a;let s,l;i||f({csmSlotId:n,placementId:r,prefix:_.PAGE_PRERENDER}),o||f({csmSlotId:n,placementId:r,prefix:_.AD_MISSING});const c=()=>!(!i||!o)&&(t(),l&&document.removeEventListener("visibilitychange",l),s&&p()&&s.unobserve(e),!0);if(!c()){const t={root:document.documentElement};p()&&(s=new IntersectionObserver(((e,t)=>{try{if(1===e.length){e[0].isIntersecting?(o=!0,c()):o=!1}}catch(e){g("Error executing intersectionObserver callback")}}),t),s.observe(e)),l=()=>{try{"prerender"!==document.visibilityState?(i=!0,c()):i=!1}catch(e){g("Error executing pageVisibilityHandler callback")}},document.addEventListener("visibilitychange",l)}}var ee,te;(te=ee||(ee={})).BEGIN_TO_RENDER_CLIENT="btr_client",te.COUNT_ON_DOWNLOAD_CLIENT="cod_client";var ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.evaluateBTRCriteria=void 0;var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.evaluateBTRCriteria=void 0;var ie="visibilitychange";re.evaluateBTRCriteria=function(e,t,n){if(me(e)){var r=function(){me(e)||(n(se(t)),e.removeEventListener(ie,r))};e.addEventListener(ie,r)}else n(se(t))};var oe,ae,se=function(e){var t=e.getElementsByClassName("mrc-btr-creative"),n=t.length>0;if(n){var r=le(t);return{isBTRTaggedCreative:n,isBTRCompliant:r.isBTRCompliant,imagesData:r.imagesData}}var i=e.getElementsByTagName("img"),o=ce(i);return{isBTRTaggedCreative:n,isBTRCompliant:o.isBTRCompliant,imagesData:o.imagesData}},le=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){var o=e[i];o instanceof HTMLImageElement&&(de(o)?(t.push({src:o.src,isLoaded:!0}),r++):(t.push({src:o.src,isLoaded:!1}),n++))}return{isBTRCompliant:r>0&&0===n,imagesData:t}},ce=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){var o=e[i];o instanceof HTMLImageElement&&(de(o)?ue(o)||(t.push({src:o.src,isLoaded:!0}),n++):(t.push({src:o.src,isLoaded:!1}),r++))}return{isBTRCompliant:n>0&&0===r,imagesData:t}},de=function(e){return e.complete&&e.naturalHeight>0&&e.naturalWidth>0},ue=function(e){return 1===e.naturalHeight&&1===e.naturalWidth},me=function(e){return"prerender"===e.visibilityState};function pe(e,t,n,r){(0,ne.evaluateBTRCriteria)(document,n,(n=>{let i=ee.COUNT_ON_DOWNLOAD_CLIENT;if(n){n.isBTRCompliant&&(i=ee.BEGIN_TO_RENDER_CLIENT),n.isBTRTaggedCreative&&f({csmSlotId:e,placementId:t,prefix:P.TAGGED,shouldFireSlotAgnosticMetric:!0});const r=n.imagesData||[];0===r.length?f({csmSlotId:e,placementId:t,prefix:P.NO_IMAGES,shouldFireSlotAgnosticMetric:!0}):r.every((function(e){return e.isLoaded}))?f({csmSlotId:e,placementId:t,prefix:P.LOADED,shouldFireSlotAgnosticMetric:!0}):f({csmSlotId:e,placementId:t,prefix:P.ERROR,shouldFireSlotAgnosticMetric:!0})}r(i)}))}Object.defineProperty(ne,"evaluateBTRCriteria",{enumerable:!0,get:function(){return re.evaluateBTRCriteria}}),ae=function(){return URL};var fe="{}",he="?",ge="&",ve="=";function we(e,t){var n={};for(var r in e)n[r]=e[r];for(var i in t)n[i]=t[i];return n}oe=function(e,t,n){if("string"!=typeof e||""===e)throw new Error("Invalid url input to addJSONQueryParamToURL: "+JSON.stringify({url:e}));if("string"!=typeof t||""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));if("object"!=typeof n)throw new Error("Invalid queryParamValueObject input to addJSONQueryParamToURL: "+JSON.stringify({queryParamValueObject:n}));try{var r=new(ae())(e),i=r.searchParams.get(t)?r.searchParams.get(t):"{}",o=JSON.parse(i);if("object"!=typeof o)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:o}));var a=we(o,n);return r.searchParams.set(t,JSON.stringify(a)),r.toString()}catch(r){return function(e,t,n){var r,i=e.indexOf(he),o={};if(i>0){r=e.substring(0,i),decodeURIComponent(e.substring(i+1)).split(ge).forEach((function(e){if(e){var t=e.split(ve);o[t[0]]=t[1]}}));var a=o[t]?o[t]:fe,s=JSON.parse(a);if("object"!=typeof s)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:s}));var l=we(s,n);o[t]=JSON.stringify(l)}else r=e,o[t]=JSON.stringify(n);var c=[];for(var d in o)c.push(encodeURIComponent(d)+ve+encodeURIComponent(o[d]));return r+he+c.join(ge)}(e,t,n)}};const be="unfired_cod_impressions_dictionary";function Ie(){let e;try{e=JSON.parse(localStorage.getItem(be)||"{}")}catch(t){e={}}return e}function Ee(){try{localStorage.removeItem(be)}catch(e){}}function Se(e,t){const n=Ie();n[e]=t,Oe(n)}function ye(){const e=Ie(),t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&t.push(e[n]);return Ee(),t}function Re(e){const t=Ie();t[e]&&(t[e]="",Oe(t))}function Oe(e){try{localStorage.setItem(be,JSON.stringify(e))}catch(e){}}var Ce,Me,Le,_e,Te,Ae,xe,Pe;(Me=Ce||(Ce={})).IMPRESSION="localstorage:impression",Me.ERROR="localstorage:error",Me.CONTROL="localstorage:inactive",Me.TREATMENT="localstorage:t1",Me.NO_WEBLAB="localtestorage:missing",(_e=Le||(Le={})).IMPRESSION="localstorage_impression",_e.ERROR="localstorage_error",_e.CONTROL="localstorage_inactive",function(e){e.START="adload:start",e.CALLBACK="adload:delayloadcallback",e.IFRAME_CREATED="adload:iframecreated"}(Te||(Te={})),(xe=Ae||(Ae={})).SF_LIBRARY="cache:sflibrary:",xe.SF_HTML="cache:sfhtml:",(Pe||(Pe={})).API="messenger:";var Ne,De;(De=Ne||(Ne={})).NEXUS_CLIENT_NOT_DEFINED="ResourceTimingData.NexusClientNotDefined",De.LOGGING_FAILED="ResourceTimingData.LoggingFailed",De.LOGGING_SUCCESSFUL="ResourceTimingData.LoggingSuccessful",De.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet";const ke={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"};var Fe;!function(e){e.PAGE_PRERENDER="pixelcondition:pageprerender",e.AD_MISSING="pixelcondition:admissing"}(Fe||(Fe={}));const Be=()=>window.innerHeight||document.documentElement.clientHeight,Ue=()=>window.innerWidth||document.documentElement.clientWidth,He=e=>{const t={atf:je(e)};if(!e||!window||!document)return t;const n=Ge(),r=Ye(e),i=Ve(e);return{atf:je(e),geom:{win:n,self:r,exp:i},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:r.h,aw:r.w,top:r.t,left:r.l}}},je=e=>{if(!e)return"unknown";const t=function(e){if(!window||!(null===document||void 0===document?void 0:document.body))return null;const t=qe(e,null),n=Be(),r=Ue(),i=document.body.getBoundingClientRect(),o=Math.max(0,Math.min(i.left+r,t.r)-t.l),a=Math.max(0,Math.min(i.top+n,t.b)-t.t),s=o*a/(t.h*Math.min(t.w,r));return Number(Math.min(1,Math.max(0,s)).toFixed(2))}(e);return null==t?"unknown":t>=.5};const We=e=>{if(!window||!document)return null;const t=$e(e),n=Ge(),r=Ye(null,t);return{atf:"unknown",geom:{win:n,self:r,exp:Ve(null,t)},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:r.h,aw:r.w,top:r.t,left:r.l}}},$e=e=>{const t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),r=n+e.adHeight,i=t.left-(window.scrollX-e.originalScrollX);return{top:n,bottom:r,left:i,right:i+e.adWidth,width:e.adWidth,height:e.adHeight}},ze=(e,t,n)=>{let r=0;return"visible"!==document.visibilityState?r:(r=e>0?n-e:t>0?Math.min(t,n):0,Math.min(r,t-e))},Ge=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=Ue(),r=Be();return{t:e,l:t,w:n,h:r,b:e+r,r:t+n}},Ye=(e,t)=>{const n=qe(e,t),r=Je(n);return{t:n.t,l:n.l,r:n.r,b:n.b,w:n.w,h:n.h,z:n.z,xiv:r.xiv,yiv:r.yiv,iv:r.iv}},qe=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:n.right,b:n.bottom,w:n.width,h:n.height,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN}},Je=e=>{const t=Ue(),n=Be(),r=Math.max(0,ze(e.t,e.b,n)),i=Math.max(0,ze(e.l,e.r,t)),o=r*i,a=e.h*Math.min(e.w,t);return 0!==a||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,r/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/a)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},Ve=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:Ue()-n.right,b:Be()-n.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>Ue()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>Be()?1:0}},Ke=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65,Xe=e=>(e=>{let t,n="";const r=e.length;for(let i=0;i<r;i++)t=e[i],n+=String.fromCodePoint(t>251&&t<254&&i+5<r?1073741824*(t-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>247&&t<252&&i+4<r?(t-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>239&&t<248&&i+3<r?(t-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>223&&t<240&&i+2<r?(t-224<<12)+(e[++i]-128<<6)+e[++i]-128:t>191&&t<224&&i+1<r?(t-192<<6)+e[++i]-128:t);return n})(((e,t)=>{const n=e.replace(/[^A-Za-z0-9+/]/g,""),r=n.length,i=t?Math.ceil((3*r+1>>2)/t)*t:3*r+1>>2,o=new Uint8Array(i);let a,s,l=0,c=0;for(let e=0;e<r;e++)if(s=3&e,l|=((d=n.charCodeAt(e))>64&&d<91?d-65:d>96&&d<123?d-71:d>47&&d<58?d+4:43===d?62:47===d?63:0)<<6*(3-s),3===s||r-e==1){for(a=0;a<3&&c<i;)o[c]=l>>>(16>>>a&24)&255,a++,c++;l=0}var d;return o})(e)),Qe=e=>(e=>{let t=2,n="";const r=e.length;let i=0;for(let o=0;o<r;o++)t=o%3,i|=e[o]<<(16>>>t&24),2!==t&&e.length-o!=1||(n+=String.fromCodePoint(Ke(i>>>18&63),Ke(i>>>12&63),Ke(i>>>6&63),Ke(63&i)),i=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")})((e=>{let t;const n=e.length;let r=0;for(let i=0;i<n;i++)t=e.codePointAt(i),t>65536&&i++,r+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;const i=new Uint8Array(r);let o=0,a=0;for(;o<r;)t=e.codePointAt(a),t<128?i[o++]=t:t<2048?(i[o++]=192+(t>>>6),i[o++]=128+(63&t)):t<65536?(i[o++]=224+(t>>>12),i[o++]=128+(t>>>6&63),i[o++]=128+(63&t)):t<2097152?(i[o++]=240+(t>>>18),i[o++]=128+(t>>>12&63),i[o++]=128+(t>>>6&63),i[o++]=128+(63&t),a++):t<67108864?(i[o++]=248+(t>>>24),i[o++]=128+(t>>>18&63),i[o++]=128+(t>>>12&63),i[o++]=128+(t>>>6&63),i[o++]=128+(63&t),a++):(i[o++]=252+(t>>>30),i[o++]=128+(t>>>24&63),i[o++]=128+(t>>>18&63),i[o++]=128+(t>>>12&63),i[o++]=128+(t>>>6&63),i[o++]=128+(63&t),a++),a++;return i})(e));function Ze(e,t,n,r,i){let o;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(o||(o={})),!o.hasOwnProperty(e))return;const a=o[e].toString(),s=r?r+":":"";"function"==typeof window[a]&&(window[a].apply(this,tt(e,"adplacements:"+s+t.replace(/_/g,":"),{wb:1},i)),n&&window[a].apply(this,tt(e,"adplacements:"+s+n,{wb:1},i)))}function et(e,t,n,r){if(window.ue&&"function"==typeof window.ue.count){let i="adplacements:"+n;if(e&&(i+=":"+e.replace(/_/g,":")),window.ue.count(i,r),t){const e="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(e,r)}}}function tt(e,t,n,r){const i=[e,t,n];return r&&i.push(r),i}const nt="sfImpression",rt="LightAdImpression",it=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),ot=(it("bodyBegin","bb",nt),it("bodyBegin","bb",rt)),at=(it("bodyEnd","be"),it("clickToATF","af"),it("criticalFeature","cf"),it("criticalFeature","cf",nt),it("criticalFeature","cf",rt)),st=it("loaded","ld"),lt=(it("loaded","ld",nt),it("loaded","ld",rt)),ct=(it("viewablelatency:loaded","ld","viewablelatency"),"ERROR");function dt(e,t){const n=t||new Error(e);console.error(e,t),et("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:ct,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}const ut=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window,mt=e=>e&&0===Object.keys(e).length&&e.constructor===Object;const pt=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"];pt.concat(["allow-same-origin"]);new class{customMessage(e,t,n,r,i){const o=this.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(n.indexOf(e)>-1&&o[e]?(et(null,null,ke.ALLOWLISTED+":"+e,1),o[e](t)):-1===n.indexOf(e)?(et(null,null,ke.NOT_ALLOWLISTED,1),et(r,i,ke.NOT_ALLOWLISTED,1)):dt("Unrecognized custom message key: "+e))}catch(e){dt("Custom Message Error",e)}}isElementInDOM(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}constructor(e,t,n){a(this,"adMap",void 0),a(this,"supportedCommands",void 0),a(this,"msgListeners",void 0),a(this,"getIframe",(e=>{var t;const n=this.adMap,r=n[e].options;if(mt(n)||mt(r))return null;const i="ape_"+r.slot+"_iframe";return n[e].iframe&&(n[e].iframe=n[e].iframe&&(null===(t=n[e].iframe)||void 0===t?void 0:t.innerHTML)?n[e].iframe:document.getElementById(i)),n[e].iframe})),a(this,"sendMessageToAd",((e,t,n)=>{const r=this.getIframe(e),i=r?r.contentWindow:null;if(i){const e={command:t,data:n};i.postMessage(e,"*")}})),a(this,"receiveMessage",(e=>{const t=e=>{for(const n in this.adMap){var t;if((null===(t=this.getIframe(n))||void 0===t?void 0:t.contentWindow)===e.source)return!0}return!1},n=this.adMap;if(mt(n))return;try{var r,i,o,a;if((null===(a=null==e||null===(r=e.data)||void 0===r||null===(i=r.message)||void 0===i||null===(o=i.id)||void 0===o?void 0:o.toLowerCase())||void 0===a?void 0:a.indexOf("mash"))>-1)throw"Received Mash message"}catch(e){return}const s=e.data,l=n[s.arid];try{const n=this.supportedCommands,r=((e,n)=>e&&e.options&&t(n))(l,e);if("object"!=typeof s.data||!n.hasOwnProperty(s.command))return;if(!r)throw"Invalid Message Origin: "+e.origin;const i=n[s.command];i&&(l.options.debug&&"undefined"!=typeof console&&console.log(e),i(l,s.data))}catch(t){let n="Problem with message: "+e.data;void 0!==s&&(n+=this.appendErrorDetails(s.arid)),dt(n,t)}})),a(this,"appendErrorDetails",(e=>{const t=this.adMap;if(mt(t))return"";let n="";if(void 0!==t[e]){const r=t[e].options;void 0!==r.aanResponse&&(n=" Ad Details: "+JSON.stringify(r.aanResponse))}return n})),a(this,"registerCustomMessageListener",((e,t,n)=>{let r=!1;const i=this.msgListeners;try{if(!i[e]||"function"!=typeof i[e]||n)i[e]=t,r=!0;else{dt("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}}catch(e){dt("Error registering custom message listener",e)}return r})),a(this,"sendCustomMessage",((e,t)=>{const n=this.adMap,r={key:e,data:t};for(const e in n)this.sendMessageToAd(e,"customMessage",r)})),a(this,"sendCustomMessageToAd",((e,t,n)=>{const r={key:t,data:n};this.sendMessageToAd(e,"customMessage",r)})),a(this,"takeSnapshotOfSlotPosition",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||mt(t)||!n||mt(n))return;const r=this.getIframe(e);var i;this.adMap[e].options.slotSnapshot={initialBoundingRect:(i=r).getBoundingClientRect(),adHeight:i.offsetHeight,adWidth:i.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}})),a(this,"startPixelTracking",((e,t)=>{let n="prerender"!==document.visibilityState;const r=this.getIframe(e);let i,o,a=this.isElementInDOM(r);const s=this.adMap&&this.adMap[e]&&this.adMap[e].options;!n&&s&&et(s.slot,s.placementId,Fe.PAGE_PRERENDER,1),!a&&s&&et(s.slot,s.placementId,Fe.AD_MISSING,1);const l=()=>!(!n||!a)&&(t(),o&&document.removeEventListener("visibilitychange",o),i&&ut()&&i.unobserve(r),!0);if(!l()){const e={root:document.documentElement};ut()&&(i=new IntersectionObserver((e=>{try{if(1===e.length){e[0].isIntersecting?(a=!0,l()):a=!1}}catch(e){dt("Error executing intersectionObserver callback")}}),e),i.observe(r)),o=()=>{try{"prerender"!==document.visibilityState?(n=!0,l()):n=!1}catch(e){dt("Error executing pageVisibilityHandler callback")}},document.addEventListener("visibilitychange",o)}})),a(this,"updateViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||mt(t)||!n||mt(n))return;const r=this.getIframe(e),i=t[e].options.viewabilityStandards,o=He(r);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),a(this,"updateNoInventoryViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options,r=n&&n.slotSnapshot;if(!t||mt(t)||!n||mt(n)||!r)return;const i=n.viewabilityStandards,o=We(r);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),this.adMap=e||{},this.supportedCommands=t||{},this.msgListeners=n||{}}};const ft=new class{constructor(){a(this,"latencyPlugin",void 0),a(this,"events",void 0)}},ht=e=>{window.csa?ft.latencyPlugin=window.csa("Content",{element:e}):console.log(window)},gt=(e,t)=>{try{ft.latencyPlugin("mark",e,t)}catch(e){dt("Error with initiating CSA",e)}};class vt{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,timestamp:r}){Ze(e.csmKey,n,t,e.csmMessage,null==r?void 0:r.getTime()),function(e,t,n){const r=function(e){return document.getElementById(function(e){return"ape_"+e+"_placement"}(e))}(t);r&&(ht(r),gt(e.csaKey,null==n?void 0:n.getTime()))}(e,n,r)}}const wt=()=>new vt,bt=e=>e?e.toLowerCase().replace(/[^0-9a-z]/g,""):"unknown",It={};function Et(e,t,n){const r=e.slotId;It[r]=It[r]||!1;const i=e.adCreativeMetaData.adProgramId?e.adCreativeMetaData.adProgramId:"unknown",o=bt(e.adCreativeMetaData.adCreativeTemplateName);if(!It[r]){if(It[r]=!0,e.aaxImpPixelUrl){const t=oe(e.aaxImpPixelUrl,"pj",{measurementMethod:"cod_client"});Se(e.adCreativeMetaData.adId,t)}f({csmSlotId:t,placementId:n,prefix:A.LEGACY_IMPRESSION_COUNTER,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${A.LEGACY_IMPRESSION_COUNTER}:program:${i}`,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${A.LEGACY_IMPRESSION_COUNTER}:template:${o}`,shouldFireSlotAgnosticMetric:!0}),wt().sendLatencyMetric({latencyMetricType:at,placementId:n,placementName:t})}}const St=(e,t,n,r,i,o)=>{const a=bt(e.adCreativeMetaData.adCreativeTemplateName),s=e.adCreativeMetaData.adProgramId?e.adCreativeMetaData.adProgramId:"unknown",l=e.adCreativeMetaData.adId;let c,u=!1;try{if(Re(l),d(o)||i){const t={};d(o)&&(t.measurementMethod=o),i&&(t.ape_al=!0),c=oe(e.aaxImpPixelUrl,"pj",t),u=o===ee.BEGIN_TO_RENDER_CLIENT}else c=e.aaxImpPixelUrl}catch(t){g("Unable to add pj to impression URL",t),c=e.aaxImpPixelUrl}y({pixelUrl:c,id:"ape_impression_"+e.slotId,csmSlotId:n,placementId:t,baseCounterName:M.IMP,baseMetricName:F.IMP,slotId:e.slotId})&&(f({prefix:A.GLOBAL_IMPRESSION_FIRED_COUNTER,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${A.GLOBAL_IMPRESSION_FIRED_COUNTER}:template:${a}`,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${A.GLOBAL_IMPRESSION_FIRED_COUNTER}:program:${s}`,shouldFireSlotAgnosticMetric:!0}),r&&f({prefix:`${A.GLOBAL_IMPRESSION_FIRED_COUNTER}:adid:${l}`,shouldFireSlotAgnosticMetric:!0}),u&&(f({csmSlotId:n,placementId:t,prefix:P.IMPRESSION,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${P.IMPRESSION}:program:${s}`,shouldFireSlotAgnosticMetric:!0}),f({prefix:`${P.IMPRESSION}:template:${a}`,shouldFireSlotAgnosticMetric:!0})),wt().sendLatencyMetric({latencyMetricType:lt,placementId:t,placementName:n}))},yt=(e,t,n,r,i)=>{const o=()=>{var o;r&&(o=e.adCreativeMetaData.adId,f({csmSlotId:null,placementId:null,prefix:"imageLoaded",shouldFireSlotAgnosticMetric:!0}),f({csmSlotId:null,placementId:null,prefix:"imageLoaded:adid:"+o,shouldFireSlotAgnosticMetric:!0})),pe(t,n,e.adPlacementDiv,(r=>{Z(e.adPlacementDiv,(()=>{i(r)}),t,n)}))};if(a=e.slotId,window[a]&&s(a).adLoadTime)wt().sendLatencyMetric({latencyMetricType:st,placementId:n,placementName:t,timestamp:new Date(s(e.slotId).adLoadTime)}),o();else if(function(e){return window[e]&&s(e).setImageOnLoad}(e.slotId)){const r=()=>{wt().sendLatencyMetric({latencyMetricType:st,placementId:n,placementName:t,timestamp:new Date}),o()};s(e.slotId).setImageOnLoad(e.adPlacementDiv,r)}var a;function s(e){return window[e]}},Rt=e=>{const{csmSlotId:t,placementId:n,abpAcceptable:r="false",abpStatus:i="-1"}=e;((e,t,n,r)=>{h({tag:"adrender",csmSlotId:t,placementId:n}),h({tag:"adrender:lightad",csmSlotId:t,placementId:n}),e.adCreativeId&&(h({tag:"adrender",csmSlotId:t,placementId:n,suffix:`creativeid:${e.adCreativeId}`}),b({creativeId:e.adCreativeId.toString()})),e.adProgramId&&(h({tag:"adrender",csmSlotId:t,placementId:n,suffix:`programid:${e.adProgramId}`}),b({programId:e.adProgramId.toString()})),void 0!==r&&b({isCardsFlow:r.toString()});const i=bt(e.adCreativeTemplateName);h({tag:"adrender",csmSlotId:t,placementId:n,suffix:`creativetemplatename:${i}`}),b({adrender:"true",creativeTemplateName:i,isLightAds:"true"})})(e.adCreativeMetaData,t,n,e.isCardsFlow);const o=e.adCreativeMetaData.adCreativeTemplateName,a="Image"===o||"Image - mobile O&O"===o,s="true"===r&&("1"===i||"-1"===i);Z(e.adPlacementDiv,(()=>{Et(e,t,n)}),t,n);yt(e,t,n,a,(r=>{try{St(e,n,t,a,s,r),V(e,s);const i=()=>{((e,t)=>{var n;const r=z(e.adPlacementDiv),i=null==r?void 0:r.geom,o=null==r?void 0:r.payload;t&&(o.ape_al=!0),q({aaxInstrPixelUrl:e.aaxInstrPixelUrl,slotId:e.slotId,csmSlotId:e.csmSlotId,placementId:e.placementId,viewPercentage:null==i||null===(n=i.self)||void 0===n?void 0:n.iv,viewableInfo:o,viewabilityStandards:e.viewabilityStandards,aPageStart:e.aPageStart,adStartTime:e.adStartTime})})(e,s)};if(i(),window.addEventListener("scroll",K(20,i)),window.addEventListener("resize",K(20,i)),document.addEventListener("visibilitychange",K(20,i)),p()){new IntersectionObserver(i,{threshold:[0,.5,1]}).observe(e.adPlacementDiv)}}catch(e){g("Error firing impression and measurability pixels",e)}}))},Ot=(e,t)=>{e.hasChildNodes()||e.appendChild(document.createRange().createContextualFragment(Xe(t)))};var Ct,Mt,Lt,_t={};t(_t,"replace",(function(){return Ct}),(function(e){return Ct=e})),t(_t,"getSlotPlaceholder",(function(){return Mt}),(function(e){return Mt=e})),t(_t,"getClickTrackingParamWithSlotId",(function(){return Lt}),(function(e){return Lt=e}));var Tt,At=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),xt="$1",Pt="$14";Tt=function(){return document};var Nt="data-val";function Dt(e){if("string"!=typeof e||""===e)return"";var t=Tt().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(Nt)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var n=t.getAttribute(Nt);return"string"!=typeof n?"":n}Ct=function(e,t){var n=t,r=e;if("string"!=typeof e||"&pd_rd_plhdr=t"===e||""===e.trim())return n;(r=r.replace(/&amp;/g,"&")).startsWith("&")&&(r=r.replace(/^&+/,"")),r.endsWith("&")&&(r=r.replace(/&+$/,""));try{var i,o=0;do{if(o++,!(i=n.match(At)))break;var a=i[1],s=i[14],l=i[13],c=a.startsWith("&")&&a.endsWith(";")||s.startsWith("&")&&s.endsWith(";"),d=a.startsWith("%")&&s.startsWith("%")&&"%3D"===l;n=c?n.replace(At,xt+r.replace(/&/g,"&amp;")+Pt):d?n.replace(At,xt+encodeURIComponent(r)+Pt):n.replace(At,xt+r+Pt)}while(i&&o<10)}catch(e){return t}return n},Mt=function(e,t,n){return Dt([e,n,t].join("_"))},Lt=Dt;const kt=t=>{try{return e(_t).getClickTrackingParamWithSlotId(t)}catch(e){return""}},Ft=(t,n)=>{try{const r=Xe(n),i=e(_t).replace(t,r);return Qe(i)}catch(e){return n}},Bt=(e,t)=>{const n=Math.floor(t.offsetWidth/e.offsetWidth*100)/100;n&&((e,t)=>{e.style.transform=t})(e,"scale("+n+")")},Ut=(e,t)=>{let{resizePlacementWidthThreshold:n}=t;const{_:r,resizePlacementStyleAboveThreshold:i,resizePlacementStyleBelowThreshold:o}=t;n=parseInt(n,10),e&&n&&i&&o&&(e.offsetWidth<n?m(e,o):m(e,i))};function Ht(e,t,n,r){n&&(window.addEventListener("resize",e),e()),r&&(window.addEventListener("resize",t),t())}var jt={},Wt=jt&&jt.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),$t=jt&&jt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zt=jt&&jt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Wt(t,e,n);return $t(t,e),t};Object.defineProperty(jt,"__esModule",{value:!0}),jt.AD_LOAD_COUNTERS=jt.csa=jt.csm=void 0;var Gt=zt(o("a1rh1"));jt.csm=Gt;var Yt=zt(o("iMV0g"));jt.csa=Yt;var qt={};Object.defineProperty(qt,"__esModule",{value:!0}),qt.AD_LOAD_COUNTERS=void 0,qt.AD_LOAD_COUNTERS={HTML_REACHED:"adload:htmlreached"},Object.defineProperty(jt,"AD_LOAD_COUNTERS",{enumerable:!0,get:function(){return qt.AD_LOAD_COUNTERS}});class Jt{constructor(e,t){a(this,"version",void 0),a(this,"loadComponentsBeforeCreativeRendering",void 0),a(this,"processAds",(()=>{try{const e=s();for(const t of e){const e=c(t),n=e.slotId;window[n]&&!window[n].isProcessed&&this.processAd(e)}}catch(e){g("Unable to process light ads on the page",e)}})),a(this,"processAd",(e=>{window[e.slotId].isProcessed=!0;const t=e.adPlacementDiv,n=e.adPlacementWrapperDiv,r=e.resizePlacementStyle,i=()=>{Bt(t,n)},o=()=>{Ut(t,r)};f({csmSlotId:e.csmSlotId,prefix:M.START,placementId:e.placementId}),jt.csa.events().log(F.START,e.slotId,e.placementId),wt().sendLatencyMetric({latencyMetricType:ot,placementId:e.placementId,placementName:e.csmSlotId}),"clickTracking"in e&&""===e.clickTracking&&(e.clickTracking=kt(e.slotId)),e.clickTracking&&(e.htmlContentEncoded=Ft(e.clickTracking,e.htmlContentEncoded)),this.loadComponentsBeforeCreativeRendering&&this.loadComponentsBeforeCreativeRendering(e),Q({callback:()=>{f({csmSlotId:e.csmSlotId,prefix:M.CALLBACK,placementId:e.placementId}),jt.csa.events().log(F.CALLBACK,e.slotId,e.placementId),Ot(t,e.htmlContentEncoded),Ht(i,o,e.enableScaling,r),Q({callback:()=>{Rt(e)},delayConfig:e.firePixelsAfter,adPlacementDiv:t,csmSlotId:e.csmSlotId})},errorCallback:()=>{f({csmSlotId:e.csmSlotId,prefix:M.RENDER_ERROR,placementId:e.placementId,shouldFireSlotAgnosticMetric:!0}),jt.csa.events().log(F.RENDER_ERROR,e.slotId,e.placementId),n.style.display="none"},delayConfig:e.loadAfter,adPlacementDiv:t})})),this.version=e,this.loadComponentsBeforeCreativeRendering=t}}const Vt=()=>{ye().forEach((e=>{try{I({pixelUrl:e,pixelOnLoadHandler:()=>{f({prefix:Ce.IMPRESSION+"loaded",shouldFireSlotAgnosticMetric:!0}),jt.csa.events().log(Le.IMPRESSION+"loaded")},pixelOnErrorHandler:()=>{f({prefix:Ce.IMPRESSION+"error",shouldFireSlotAgnosticMetric:!0}),jt.csa.events().log(Le.IMPRESSION+"error")}}),f({prefix:Ce.IMPRESSION,shouldFireSlotAgnosticMetric:!0}),jt.csa.events().log(Le.IMPRESSION)}catch(e){f({prefix:Ce.ERROR,shouldFireSlotAgnosticMetric:!0}),console.error(e),jt.csa.events().log(Le.ERROR)}}))};function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function Xt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Qt=e=>e+"_Feedback";var Zt,en;(en=Zt||(Zt={}))[en.BOTTOM=0]="BOTTOM",en[en.TOP=1]="TOP";class tn{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);const n=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);return(null==n?void 0:n.isOk())?(e.updateElement(this.getHtmlId(),n),n):null}getHtmlId(){return Qt(this.parentHtmlId)}isHidden(){return this.hidden}constructor(e,t,n,r,i,o,s){a(this,"parentHtmlId",void 0),a(this,"feedbackStyle",void 0),a(this,"labelText",void 0),a(this,"labelStyle",void 0),a(this,"position",void 0),a(this,"urlPathAndParameter",void 0),a(this,"hidden",void 0),this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=n,this.labelStyle=r,this.position=i,this.urlPathAndParameter=o,this.hidden=s}}class nn{open(e){e.clickChildLink(this)}getHtmlId(){return Qt(this.parentHtmlId)}constructor(e){a(this,"parentHtmlId",void 0),this.parentHtmlId=e}}class rn{createSponsoredLabelWithFeedbackLink(e,t){t.request(),e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort).then((n=>{t.success(n),e.isHidden()||t.labelRenderedHost()})).catch((()=>{t.error()}))}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}constructor(e,t){a(this,"feedbackHtmlPort",void 0),a(this,"feedbackApiPort",void 0),this.feedbackHtmlPort=e,this.feedbackApiPort=t}}class on{logFeedbackRequest(){an(this.tracer,this.tracerFeedback.feedbackRequest)}logFeedbackResponse(e,t){an(this.tracer,this.tracerFeedback.feedbackResponse(t,e))}logRenderSponsoredLabel(){an(this.tracer,this.tracerFeedback.renderSponsoredLabel)}constructor(e,t){a(this,"tracerFeedback",void 0),a(this,"tracer",void 0),this.tracerFeedback=e,this.tracer=t}}const an=(e,t)=>{null==e||e.logTrace("adFeedBack",t)};var sn,ln;(ln=sn||(sn={})).REQUEST="adfeedback:request",ln.SUCCESS="adfeedback:success",ln.ERROR="adfeedback:error",ln.LABEL_RENDERED_CREATIVE="adfeedback:sponsoredlabelrendered:creative",ln.LABEL_RENDERED_HOST="adfeedback:sponsoredlabelrendered:host";class cn{incrementRequest(){dn(sn.REQUEST,this.placementId,this.placementName)}incrementSuccess(){dn(sn.SUCCESS,this.placementId,this.placementName)}incrementError(){dn(sn.ERROR,this.placementId,this.placementName)}incrementLabelRenderedHost(){dn(sn.LABEL_RENDERED_HOST,this.placementId,this.placementName)}incrementLabelRenderedCreative(){dn(sn.LABEL_RENDERED_CREATIVE,this.placementId,this.placementName)}constructor(e,t){a(this,"placementName",void 0),a(this,"placementId",void 0),this.placementName=e,this.placementId=t}}const dn=(e,t,n)=>{et(n,t,e,1)};var un,mn;(mn=un||(un={})).REQUEST="adfeedback_request",mn.SUCCESS="adfeedback_success",mn.ERROR="adfeedback_error",mn.LABEL_RENDERED_CREATIVE="adfeedback_sponsoredlabelrendered_creative",mn.LABEL_RENDERED_HOST="adfeedback_sponsoredlabelrendered_host";class pn{logRequest(){jt.csa.events().log(un.REQUEST,this.placementName,this.placementId)}logSuccess(){jt.csa.events().log(un.SUCCESS,this.placementName,this.placementId)}logError(){jt.csa.events().log(un.ERROR,this.placementName,this.placementId)}logLabelRenderedCreative(){jt.csa.events().log(un.LABEL_RENDERED_CREATIVE,this.placementName,this.placementId)}logLabelRenderedHost(){jt.csa.events().log(un.LABEL_RENDERED_HOST,this.placementName,this.placementId)}constructor(e,t){a(this,"placementName",void 0),a(this,"placementId",void 0),this.placementName=e,this.placementId=t}}class fn{get feedbackRequest(){return{adFeedbackRequest:{slot:this.placementName,placementId:this.placementId,endPoint:this.endpoint,feedbackDivStyle:this.feedbackDivStyle,requestUrl:this.endpoint}}}feedbackResponse(e,t){return{adFeedBackResponse:{feedbackResponseStarted:!0,feedBackResponseReturned:t,response:e}}}get renderSponsoredLabel(){return{renderSponsoredLabel:!0}}constructor(e,t,n,r){a(this,"placementName",void 0),a(this,"placementId",void 0),a(this,"endpoint",void 0),a(this,"feedbackDivStyle",void 0),this.placementName=e,this.placementId=t,this.endpoint=n,this.feedbackDivStyle=r}}const hn=(e,t,n,r,i)=>new gn(new on(new fn(e,t,n,r),i),new cn(e,t),new pn(e,t));class gn{request(){this.tracerService.logFeedbackRequest(),this.sendCsmCounterService.incrementRequest(),this.logCsaEventService.logRequest()}success(e){this.sendCsmCounterService.incrementSuccess(),this.logCsaEventService.logSuccess(),this.tracerService.logFeedbackResponse(!0,e)}error(){this.sendCsmCounterService.incrementError(),this.logCsaEventService.logError(),this.tracerService.logFeedbackResponse(!1)}labelRenderedCreative(){this.tracerService.logRenderSponsoredLabel(),this.sendCsmCounterService.incrementLabelRenderedCreative(),this.logCsaEventService.logLabelRenderedCreative()}labelRenderedHost(){this.tracerService.logRenderSponsoredLabel(),this.sendCsmCounterService.incrementLabelRenderedHost(),this.logCsaEventService.logLabelRenderedHost()}constructor(e,t,n){a(this,"tracerService",void 0),a(this,"sendCsmCounterService",void 0),a(this,"logCsaEventService",void 0),this.tracerService=e,this.sendCsmCounterService=t,this.logCsaEventService=n}}class vn{isOk(){return"ok"===this.status}constructor(e,t,n){a(this,"status",void 0),a(this,"html",void 0),a(this,"script",void 0),this.status=e,this.html=t,this.script=n}}class wn{async getSponsoredLabelAndFeedbackLink(e){return fetch(this.windowRepo.origin()+e).then((e=>e.ok?e.json().then((e=>Promise.resolve(new vn(e.status,e.html,e.script)))):Promise.reject(null))).catch((()=>Promise.reject(null)))}constructor(e){a(this,"windowRepo",void 0),this.windowRepo=e}}class bn{appendChildTo(e,t){var n,r;function i(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),n(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,n(t,e.labelStyle),t}(e)),t;function n(e,t){for(const n in t)e.style.setProperty(n,t[n])}}t.position===Zt.TOP?null===(n=In(e))||void 0===n||n.prepend(i(t)):t.position===Zt.BOTTOM&&(null===(r=In(e))||void 0===r||r.append(i(t)))}updateElement(e,t){const n=In(e);n&&(n.innerHTML=t.html,function(e,t){(function(e){const t=document.createElement("script");return e.prepend(t),t}(e)).innerHTML=t.script}(n,t))}clickChildLink(e){const t=document.getElementById(e.getHtmlId());var n;if(t)for(const e of t.children)if("A"===(n=e).tagName||"DIV"===n.tagName)return void e.click()}}const In=e=>document.getElementById(e);class En{postSponsoredLabelWithFeedbackLink({parentHtmlId:e,placement:t,feedback:n,tracer:r}){n.hidden&&(n.style=Xt(Kt({},n.style),{display:"none"}),n.label.style=Xt(Kt({},n.label.style),{display:"none"})),this.feedbackService.createSponsoredLabelWithFeedbackLink(function(e,t){return new tn(e,t.style,t.label.text,t.label.style,"TOP"===t.position?Zt.TOP:Zt.BOTTOM,Sn(t.url.path,t.url.parameters),t.hidden)}(e,n),hn(t.name,t.id,Sn(n.url.path,n.url.parameters),n.style,r))}openModal(e){this.feedbackService.openModal(new nn(e))}labelRendered({placement:e,feedback:t,tracer:n}){this.feedbackService.labelRendered(hn(e.name,e.id,Sn(t.url.path,t.url.parameters),t.style,n))}constructor(e){a(this,"feedbackService",void 0),this.feedbackService=e}}const Sn=(e,t)=>e+"?pl="+t;(e=>{var t,n,r,i;window.APE_LA||("t1"===(null===window||void 0===window||null===(t=window.renderingWeblabs)||void 0===t||null===(n=t.ADPT_SF_MRC_RETEST_643771)||void 0===n?void 0:n.toLowerCase())?(f({prefix:Ce.TREATMENT,shouldFireSlotAgnosticMetric:!0}),Vt()):"c"===(null===window||void 0===window||null===(r=window.renderingWeblabs)||void 0===r||null===(i=r.ADPT_SF_MRC_RETEST_643771)||void 0===i?void 0:i.toLowerCase())?f({prefix:Ce.CONTROL,shouldFireSlotAgnosticMetric:!0}):(f({prefix:Ce.NO_WEBLAB,shouldFireSlotAgnosticMetric:!0}),Ee()),window.APE_LA=new Jt("1.50.f6332db",e));window.APE_LA.processAds()})((e=>{new En(new rn(new bn,new wn({origin:()=>window.location.origin}))).postSponsoredLabelWithFeedbackLink({parentHtmlId:e.adPlacementWrapperDiv.id,placement:{id:e.placementId,name:e.slotId},feedback:{position:e.adFeedbackInfo.adFeedbackOnTop?"TOP":"BOTTOM",hidden:!0==!e.adFeedbackInfo.boolFeedback,style:e.adFeedbackInfo.feedbackDivStyle,label:{text:Xe(e.adFeedbackInfo.sponsoredText),style:e.adFeedbackInfo.fallbackTextStyle},url:{path:e.adFeedbackInfo.endPoint,parameters:encodeURIComponent(JSON.stringify({adPlacementMetaData:e.adPlacementMetaData,adCreativeMetaData:e.adCreativeMetaData}))}}})}))}();
//# sourceMappingURL=lightAdMobile.min.js.map
